import"../chunks/Bzak7iHL.js";import{i as yi,c as bi,d as ct,n as _i,a as wi,o as sn,b as ki,s as xe}from"../chunks/DAr872LH.js";import{T as va,aB as _o,aC as xi,h as _t,Y as gn,a4 as wo,u as ko,j as xo,b as pa,g as dr,d as ia,y as m,F as Di,r as Si,H as Ti,e as Xa,i as Kn,o as on,Z as Do,a1 as Ei,k as qn,m as Ci,l as Ii,aD as Za,ax as Oi,aE as $a,a5 as So,aF as br,n as To,p as Pi,aG as _r,aH as Ai,aI as Xr,aJ as Rn,$ as Eo,aK as Mi,aL as ji,B as Co,aM as Io,aN as Ki,at as Ke,aO as Fi,a2 as qi,a0 as Ri,a9 as eo,aP as Bi,q as Oo,aQ as Ni,aR as Hi,aS as Li,aT as zi,aU as Ui,aV as Yi,aW as Wi,aX as Vi,U as Gi,a7 as Ze,c as At,f as lt,a as ce,aa as $e,A as ie,ay as ke,az as He,aY as Qi,aZ as Ji,au as z,av as N,as as be,aw as Q,a_ as Fn,z as Zr}from"../chunks/a5MbhoEd.js";import{i as rt,r as Xi,p as ge,b as ht}from"../chunks/B3EUUXhI.js";const Zi=[];function $r(o,r=!1,a=!1){return hr(o,new Map,"",Zi,null,a)}function hr(o,r,a,s,l=null,f=!1){if(typeof o=="object"&&o!==null){var h=r.get(o);if(h!==void 0)return h;if(o instanceof Map)return new Map(o);if(o instanceof Set)return new Set(o);if(va(o)){var g=Array(o.length);r.set(o,g),l!==null&&r.set(l,g);for(var k=0;k<o.length;k+=1){var C=o[k];k in o&&(g[k]=hr(C,r,a,s,null,f))}return g}if(_o(o)===xi){g={},r.set(o,g),l!==null&&r.set(l,g);for(var j in o)g[j]=hr(o[j],r,a,s,null,f);return g}if(o instanceof Date)return structuredClone(o);if(typeof o.toJSON=="function"&&!f)return hr(o.toJSON(),r,a,s,o)}if(o instanceof EventTarget)return o;try{return structuredClone(o)}catch{return o}}function $i(o,r){if(r){const a=document.body;o.autofocus=!0,ko(()=>{document.activeElement===a&&o.focus()})}}function es(o){_t&&gn(o)!==null&&wo(o)}function Dt(o,r){return r}function ts(o,r,a){for(var s=o.items,l=[],f=r.length,h=0;h<f;h++)Mi(r[h].e,l,!0);var g=f>0&&l.length===0&&a!==null;if(g){var k=a.parentNode;wo(k),k.append(a),s.clear(),qt(o,r[0].prev,r[f-1].next)}ji(l,()=>{for(var C=0;C<f;C++){var j=r[C];g||(s.delete(j.k),qt(o,j.prev,j.next)),Rn(j.e,!g)}})}function St(o,r,a,s,l,f=null){var h=o,g={flags:r,items:new Map,first:null},k=(r&Io)!==0;if(k){var C=o;h=_t?dr(gn(C)):C.appendChild(xo())}_t&&ia();var j=null,K=!1,P=new Map,V=Di(()=>{var M=a();return va(M)?M:M==null?[]:So(M)}),H,R;function Y(){ns(R,H,g,P,h,l,r,s,a),f!==null&&(H.length===0?j?To(j):j=qn(()=>f(h)):j!==null&&Pi(j,()=>{j=null}))}pa(()=>{R??(R=Co),H=m(V);var M=H.length;if(K&&M===0)return;K=M===0;let _=!1;if(_t){var I=Si(h)===Ti;I!==(M===0)&&(h=Xa(),dr(h),Kn(!1),_=!0)}if(_t){for(var A=null,W,q=0;q<M;q++){if(on.nodeType===Do&&on.data===Ei){h=on,_=!0,Kn(!1);break}var F=H[q],se=s(F,q);W=sa(on,g,A,null,F,se,q,l,r,a),g.items.set(se,W),A=W}M>0&&dr(Xa())}if(_t)M===0&&f&&(j=qn(()=>f(h)));else if(Ci()){var pe=new Set,le=Ii;for(q=0;q<M;q+=1){F=H[q],se=s(F,q);var Te=g.items.get(se)??P.get(se);Te?(r&(_r|br))!==0&&Po(Te,F,q,r):(W=sa(null,g,null,null,F,se,q,l,r,a,!0),P.set(se,W)),pe.add(se)}for(const[ve,me]of g.items)pe.has(ve)||le.skipped_effects.add(me.e);le.add_callback(Y)}else Y();_&&Kn(!0),m(V)}),_t&&(h=on)}function ns(o,r,a,s,l,f,h,g,k){var it,Le,te,fe;var C=(h&Ki)!==0,j=(h&(_r|br))!==0,K=r.length,P=a.items,V=a.first,H=V,R,Y=null,M,_=[],I=[],A,W,q,F;if(C)for(F=0;F<K;F+=1)A=r[F],W=g(A,F),q=P.get(W),q!==void 0&&((it=q.a)==null||it.measure(),(M??(M=new Set)).add(q));for(F=0;F<K;F+=1){if(A=r[F],W=g(A,F),q=P.get(W),q===void 0){var se=s.get(W);if(se!==void 0){s.delete(W),P.set(W,se);var pe=Y?Y.next:H;qt(a,Y,se),qt(a,se,pe),ea(se,pe,l),Y=se}else{var le=H?H.e.nodes_start:l;Y=sa(le,a,Y,Y===null?a.first:Y.next,A,W,F,f,h,k)}P.set(W,Y),_=[],I=[],H=Y.next;continue}if(j&&Po(q,A,F,h),(q.e.f&Xr)!==0&&(To(q.e),C&&((Le=q.a)==null||Le.unfix(),(M??(M=new Set)).delete(q))),q!==H){if(R!==void 0&&R.has(q)){if(_.length<I.length){var Te=I[0],ve;Y=Te.prev;var me=_[0],Ue=_[_.length-1];for(ve=0;ve<_.length;ve+=1)ea(_[ve],Te,l);for(ve=0;ve<I.length;ve+=1)R.delete(I[ve]);qt(a,me.prev,Ue.next),qt(a,Y,me),qt(a,Ue,Te),H=Te,Y=Ue,F-=1,_=[],I=[]}else R.delete(q),ea(q,H,l),qt(a,q.prev,q.next),qt(a,q,Y===null?a.first:Y.next),qt(a,Y,q),Y=q;continue}for(_=[],I=[];H!==null&&H.k!==W;)(H.e.f&Xr)===0&&(R??(R=new Set)).add(H),I.push(H),H=H.next;if(H===null)continue;q=H}_.push(q),Y=q,H=q.next}if(H!==null||R!==void 0){for(var Ce=R===void 0?[]:So(R);H!==null;)(H.e.f&Xr)===0&&Ce.push(H),H=H.next;var We=Ce.length;if(We>0){var at=(h&Io)!==0&&K===0?l:null;if(C){for(F=0;F<We;F+=1)(te=Ce[F].a)==null||te.measure();for(F=0;F<We;F+=1)(fe=Ce[F].a)==null||fe.fix()}ts(a,Ce,at)}}C&&ko(()=>{var de;if(M!==void 0)for(q of M)(de=q.a)==null||de.apply()}),o.first=a.first&&a.first.e,o.last=Y&&Y.e;for(var ot of s.values())Rn(ot.e);s.clear()}function Po(o,r,a,s){(s&_r)!==0&&Za(o.v,r),(s&br)!==0?Za(o.i,a):o.i=a}function sa(o,r,a,s,l,f,h,g,k,C,j){var K=(k&_r)!==0,P=(k&Ai)===0,V=K?P?Oi(l,!1,!1):$a(l):l,H=(k&br)===0?h:$a(h),R={i:H,v:V,k:f,a:null,e:null,prev:a,next:s};try{if(o===null){var Y=document.createDocumentFragment();Y.append(o=xo())}return R.e=qn(()=>g(o,V,H,C),_t),R.e.prev=a&&a.e,R.e.next=s&&s.e,a===null?j||(r.first=R):(a.next=R,a.e.next=R.e),s!==null&&(s.prev=R,s.e.prev=R.e),R}finally{}}function ea(o,r,a){for(var s=o.next?o.next.e.nodes_start:a,l=r?r.e.nodes_start:a,f=o.e.nodes_start;f!==null&&f!==s;){var h=Eo(f);l.before(f),f=h}}function qt(o,r,a){r===null?o.first=a:(r.next=a,r.e.next=a&&a.e),a!==null&&(a.prev=r,a.e.prev=r&&r.e)}function rs(o,r,a=!1,s=!1,l=!1){var f=o,h="";Ke(()=>{var g=Co;if(h===(h=r()??"")){_t&&ia();return}if(g.nodes_start!==null&&(Fi(g.nodes_start,g.nodes_end),g.nodes_start=g.nodes_end=null),h!==""){if(_t){on.data;for(var k=ia(),C=k;k!==null&&(k.nodeType!==Do||k.data!=="");)C=k,k=Eo(k);if(k===null)throw qi(),Ri;eo(on,C),f=dr(k);return}var j=h+"";a?j=`<svg>${j}</svg>`:s&&(j=`<math>${j}</math>`);var K=Bi(j);if((a||s)&&(K=gn(K)),eo(gn(K),K.lastChild),a||s)for(;gn(K);)f.before(gn(K));else f.before(K)}})}function as(o,r){var a=void 0,s;pa(()=>{a!==(a=r())&&(s&&(Rn(s),s=null),a&&(s=qn(()=>{Oo(()=>a(o))})))})}function Ao(o){var r,a,s="";if(typeof o=="string"||typeof o=="number")s+=o;else if(typeof o=="object")if(Array.isArray(o)){var l=o.length;for(r=0;r<l;r++)o[r]&&(a=Ao(o[r]))&&(s&&(s+=" "),s+=a)}else for(a in o)o[a]&&(s&&(s+=" "),s+=a);return s}function os(){for(var o,r,a=0,s="",l=arguments.length;a<l;a++)(o=arguments[a])&&(r=Ao(o))&&(s&&(s+=" "),s+=r);return s}function is(o){return typeof o=="object"?os(o):o??""}const to=[...` 	
\r\f \v\uFEFF`];function ss(o,r,a){var s=o==null?"":""+o;if(r&&(s=s?s+" "+r:r),a){for(var l in a)if(a[l])s=s?s+" "+l:l;else if(s.length)for(var f=l.length,h=0;(h=s.indexOf(l,h))>=0;){var g=h+f;(h===0||to.includes(s[h-1]))&&(g===s.length||to.includes(s[g]))?s=(h===0?"":s.substring(0,h))+s.substring(g+1):h=g}}return s===""?null:s}function no(o,r=!1){var a=r?" !important;":";",s="";for(var l in o){var f=o[l];f!=null&&f!==""&&(s+=" "+l+": "+f+a)}return s}function ta(o){return o[0]!=="-"||o[1]!=="-"?o.toLowerCase():o}function us(o,r){if(r){var a="",s,l;if(Array.isArray(r)?(s=r[0],l=r[1]):s=r,o){o=String(o).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var f=!1,h=0,g=!1,k=[];s&&k.push(...Object.keys(s).map(ta)),l&&k.push(...Object.keys(l).map(ta));var C=0,j=-1;const R=o.length;for(var K=0;K<R;K++){var P=o[K];if(g?P==="/"&&o[K-1]==="*"&&(g=!1):f?f===P&&(f=!1):P==="/"&&o[K+1]==="*"?g=!0:P==='"'||P==="'"?f=P:P==="("?h++:P===")"&&h--,!g&&f===!1&&h===0){if(P===":"&&j===-1)j=K;else if(P===";"||K===R-1){if(j!==-1){var V=ta(o.substring(C,j).trim());if(!k.includes(V)){P!==";"&&K++;var H=o.substring(C,K).trim();a+=" "+H+";"}}C=K+1,j=-1}}}}return s&&(a+=no(s)),l&&(a+=no(l,!0)),a=a.trim(),a===""?null:a}return o==null?null:String(o)}function Xe(o,r,a,s,l,f){var h=o.__className;if(_t||h!==a||h===void 0){var g=ss(a,s,f);(!_t||g!==o.getAttribute("class"))&&(g==null?o.removeAttribute("class"):r?o.className=g:o.setAttribute("class",g)),o.__className=a}else if(f&&l!==f)for(var k in f){var C=!!f[k];(l==null||C!==!!l[k])&&o.classList.toggle(k,C)}return f}function na(o,r={},a,s){for(var l in a){var f=a[l];r[l]!==f&&(a[l]==null?o.style.removeProperty(l):o.style.setProperty(l,f,s))}}function mn(o,r,a,s){var l=o.__style;if(_t||l!==r){var f=us(r,s);(!_t||f!==o.getAttribute("style"))&&(f==null?o.removeAttribute("style"):o.style.cssText=f),o.__style=r}else s&&(Array.isArray(s)?(na(o,a==null?void 0:a[0],s[0]),na(o,a==null?void 0:a[1],s[1],"important")):na(o,a,s));return s}function ua(o,r,a=!1){if(o.multiple){if(r==null)return;if(!va(r))return Ni();for(var s of o.options)s.selected=r.includes(ro(s));return}for(s of o.options){var l=ro(s);if(Hi(l,r)){s.selected=!0;return}}(!a||r!==void 0)&&(o.selectedIndex=-1)}function ls(o){var r=new MutationObserver(()=>{ua(o,o.__value)});r.observe(o,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Li(()=>{r.disconnect()})}function ro(o){return"__value"in o?o.__value:o.value}const Pn=Symbol("class"),An=Symbol("style"),Mo=Symbol("is custom element"),jo=Symbol("is html");function cs(o,r){var a=ga(o);a.value===(a.value=r??void 0)||o.value===r&&(r!==0||o.nodeName!=="PROGRESS")||(o.value=r??"")}function fs(o,r){r?o.hasAttribute("selected")||o.setAttribute("selected",""):o.removeAttribute("selected")}function Xt(o,r,a,s){var l=ga(o);_t&&(l[r]=o.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&o.nodeName==="LINK")||l[r]!==(l[r]=a)&&(r==="loading"&&(o[Yi]=a),a==null?o.removeAttribute(r):typeof a!="string"&&Ko(o).includes(r)?o[r]=a:o.setAttribute(r,a))}function ds(o,r,a,s,l=!1){var f=ga(o),h=f[Mo],g=!f[jo];let k=_t&&h;k&&Kn(!1);var C=r||{},j=o.tagName==="OPTION";for(var K in r)K in a||(a[K]=null);a.class?a.class=is(a.class):a[Pn]&&(a.class=null),a[An]&&(a.style??(a.style=null));var P=Ko(o);for(const I in a){let A=a[I];if(j&&I==="value"&&A==null){o.value=o.__value="",C[I]=A;continue}if(I==="class"){var V=o.namespaceURI==="http://www.w3.org/1999/xhtml";Xe(o,V,A,s,r==null?void 0:r[Pn],a[Pn]),C[I]=A,C[Pn]=a[Pn];continue}if(I==="style"){mn(o,A,r==null?void 0:r[An],a[An]),C[I]=A,C[An]=a[An];continue}var H=C[I];if(!(A===H&&!(A===void 0&&o.hasAttribute(I)))){C[I]=A;var R=I[0]+I[1];if(R!=="$$")if(R==="on"){const W={},q="$$"+I;let F=I.slice(2);var Y=wi(F);if(yi(F)&&(F=F.slice(0,-7),W.capture=!0),!Y&&H){if(A!=null)continue;o.removeEventListener(F,C[q],W),C[q]=null}if(A!=null)if(Y)o[`__${F}`]=A,ct([F]);else{let se=function(pe){C[I].call(this,pe)};C[q]=bi(F,o,se,W)}else Y&&(o[`__${F}`]=void 0)}else if(I==="style")Xt(o,I,A);else if(I==="autofocus")$i(o,!!A);else if(!h&&(I==="__value"||I==="value"&&A!=null))o.value=o.__value=A;else if(I==="selected"&&j)fs(o,A);else{var M=I;g||(M=_i(M));var _=M==="defaultValue"||M==="defaultChecked";if(A==null&&!h&&!_)if(f[I]=null,M==="value"||M==="checked"){let W=o;const q=r===void 0;if(M==="value"){let F=W.defaultValue;W.removeAttribute(M),W.defaultValue=F,W.value=W.__value=q?F:null}else{let F=W.defaultChecked;W.removeAttribute(M),W.defaultChecked=F,W.checked=q?F:!1}}else o.removeAttribute(I);else _||P.includes(M)&&(h||typeof A!="string")?(o[M]=A,M in f&&(f[M]=Gi)):typeof A!="function"&&Xt(o,M,A)}}}return k&&Kn(!0),C}function ao(o,r,a=[],s=[],l,f=!1){Wi(a,s,h=>{var g=void 0,k={},C=o.nodeName==="SELECT",j=!1;if(pa(()=>{var P=r(...h.map(m)),V=ds(o,g,P,l,f);j&&C&&"value"in P&&ua(o,P.value);for(let R of Object.getOwnPropertySymbols(k))P[R]||Rn(k[R]);for(let R of Object.getOwnPropertySymbols(P)){var H=P[R];R.description===Vi&&(!g||H!==g[R])&&(k[R]&&Rn(k[R]),k[R]=qn(()=>as(o,()=>H))),V[R]=H}g=V}),C){var K=o;Oo(()=>{ua(K,g.value,!0),ls(K)})}j=!0})}function ga(o){return o.__attributes??(o.__attributes={[Mo]:o.nodeName.includes("-"),[jo]:o.namespaceURI===zi})}var oo=new Map;function Ko(o){var r=oo.get(o.nodeName);if(r)return r;oo.set(o.nodeName,r=[]);for(var a,s=o,l=Element.prototype;l!==s;){a=Ui(s);for(var f in a)a[f].set&&r.push(f);s=_o(s)}return r}var hs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fo(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var vr={exports:{}},vs=vr.exports,io;function ps(){return io||(io=1,(function(o,r){(function(a,s){o.exports=s()})(vs,function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(e,t)},s=function(){return(s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var u in t=arguments[n])Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u]);return e}).apply(this,arguments)};function l(e,t,n){for(var i,u=0,c=t.length;u<c;u++)!i&&u in t||((i=i||Array.prototype.slice.call(t,0,u))[u]=t[u]);return e.concat(i||Array.prototype.slice.call(t))}var f=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:hs,h=Object.keys,g=Array.isArray;function k(e,t){return typeof t!="object"||h(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||f.Promise||(f.Promise=Promise);var C=Object.getPrototypeOf,j={}.hasOwnProperty;function K(e,t){return j.call(e,t)}function P(e,t){typeof t=="function"&&(t=t(C(e))),(typeof Reflect>"u"?h:Reflect.ownKeys)(t).forEach(function(n){H(e,n,t[n])})}var V=Object.defineProperty;function H(e,t,n,i){V(e,t,k(n&&K(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},i))}function R(e){return{from:function(t){return e.prototype=Object.create(t.prototype),H(e.prototype,"constructor",e),{extend:P.bind(null,e.prototype)}}}}var Y=Object.getOwnPropertyDescriptor,M=[].slice;function _(e,t,n){return M.call(e,t,n)}function I(e,t){return t(e)}function A(e){if(!e)throw new Error("Assertion Failed")}function W(e){f.setImmediate?setImmediate(e):setTimeout(e,0)}function q(e,t){if(typeof t=="string"&&K(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],i=0,u=t.length;i<u;++i){var c=q(e,t[i]);n.push(c)}return n}var d=t.indexOf(".");if(d!==-1){var v=e[t.substr(0,d)];return v==null?void 0:q(v,t.substr(d+1))}}function F(e,t,n){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){A(typeof n!="string"&&"length"in n);for(var i=0,u=t.length;i<u;++i)F(e,t[i],n[i])}else{var c,d,v=t.indexOf(".");v!==-1?(c=t.substr(0,v),(d=t.substr(v+1))===""?n===void 0?g(e)&&!isNaN(parseInt(c))?e.splice(c,1):delete e[c]:e[c]=n:F(v=!(v=e[c])||!K(e,c)?e[c]={}:v,d,n)):n===void 0?g(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function se(e){var t,n={};for(t in e)K(e,t)&&(n[t]=e[t]);return n}var pe=[].concat;function le(e){return pe.apply([],e)}var Mt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(le([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return f[e]}),Te=new Set(Mt.map(function(e){return f[e]})),ve=null;function me(e){return ve=new WeakMap,e=(function t(n){if(!n||typeof n!="object")return n;var i=ve.get(n);if(i)return i;if(g(n)){i=[],ve.set(n,i);for(var u=0,c=n.length;u<c;++u)i.push(t(n[u]))}else if(Te.has(n.constructor))i=n;else{var d,v=C(n);for(d in i=v===Object.prototype?{}:Object.create(v),ve.set(n,i),n)K(n,d)&&(i[d]=t(n[d]))}return i})(e),ve=null,e}var Ue={}.toString;function Ce(e){return Ue.call(e).slice(8,-1)}var We=typeof Symbol<"u"?Symbol.iterator:"@@iterator",at=typeof We=="symbol"?function(e){var t;return e!=null&&(t=e[We])&&t.apply(e)}:function(){return null};function ot(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var it={};function Le(e){var t,n,i,u;if(arguments.length===1){if(g(e))return e.slice();if(this===it&&typeof e=="string")return[e];if(u=at(e)){for(n=[];!(i=u.next()).done;)n.push(i.value);return n}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var te=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},zt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Pt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(zt),fe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function de(e,t){this.name=e,this.message=t}function Oe(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,i,u){return u.indexOf(n)===i}).join(`
`)}function Ie(e,t,n,i){this.failures=t,this.failedKeys=i,this.successCount=n,this.message=Oe(e,t)}function Ae(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=Oe(e,this.failures)}R(de).from(Error).extend({toString:function(){return this.name+": "+this.message}}),R(Ie).from(de),R(Ae).from(de);var Fe=Pt.reduce(function(e,t){return e[t]=t+"Error",e},{}),Ne=de,ae=Pt.reduce(function(e,t){var n=t+"Error";function i(u,c){this.name=n,u?typeof u=="string"?(this.message="".concat(u).concat(c?`
 `+c:""),this.inner=c||null):typeof u=="object"&&(this.message="".concat(u.name," ").concat(u.message),this.inner=u):(this.message=fe[t]||n,this.inner=null)}return R(i).from(Ne),e[t]=i,e},{});ae.Syntax=SyntaxError,ae.Type=TypeError,ae.Range=RangeError;var st=zt.reduce(function(e,t){return e[t+"Error"]=ae[t],e},{}),ut=Pt.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=ae[t]),e},{});function De(){}function vt(e){return e}function pt(e,t){return e==null||e===vt?t:function(n){return t(e(n))}}function et(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function It(e,t){return e===De?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var i=this.onsuccess,u=this.onerror;this.onsuccess=null,this.onerror=null;var c=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?et(i,this.onsuccess):i),u&&(this.onerror=this.onerror?et(u,this.onerror):u),c!==void 0?c:n}}function wt(e,t){return e===De?t:function(){e.apply(this,arguments);var n=this.onsuccess,i=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?et(n,this.onsuccess):n),i&&(this.onerror=this.onerror?et(i,this.onerror):i)}}function gt(e,t){return e===De?t:function(n){var i=e.apply(this,arguments);k(n,i);var u=this.onsuccess,c=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?et(u,this.onsuccess):u),c&&(this.onerror=this.onerror?et(c,this.onerror):c),i===void 0?n===void 0?void 0:n:k(i,n)}}function Tt(e,t){return e===De?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function xt(e,t){return e===De?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var i=this,u=arguments.length,c=new Array(u);u--;)c[u]=arguments[u];return n.then(function(){return t.apply(i,c)})}return t.apply(this,arguments)}}ut.ModifyError=Ie,ut.DexieError=de,ut.BulkError=Ae;var ze=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Rt(e){ze=e}var Lt={},Nn=100,Mt=typeof Promise>"u"?[]:(function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,C(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,C(t),e]})(),zt=Mt[0],Pt=Mt[1],Mt=Mt[2],Pt=Pt&&Pt.then,jt=zt&&zt.constructor,bn=!!Mt,ne=function(e,t){Et.push([e,t]),ye&&(queueMicrotask(Ln),ye=!1)},he=!0,ye=!0,Me=[],Pe=[],Re=vt,Ee={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:De,pgp:!1,env:{},finalize:De},$=Ee,Et=[],Bt=0,Ve=[];function X(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=$;if(typeof e!="function"){if(e!==Lt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&un(this,this._value))}this._state=null,this._value=null,++t.ref,(function n(i,u){try{u(function(c){if(i._state===null){if(c===i)throw new TypeError("A promise cannot be resolved with itself.");var d=i._lib&&Ut();c&&typeof c.then=="function"?n(i,function(v,y){c instanceof X?c._then(v,y):c.then(v,y)}):(i._state=!0,i._value=c,_n(i)),d&&ln()}},un.bind(null,i))}catch(c){un(i,c)}})(this,e)}var Zt={get:function(){var e=$,t=Wn;function n(i,u){var c=this,d=!e.global&&(e!==$||t!==Wn),v=d&&!Wt(),y=new X(function(w,D){Ot(c,new Hn(ka(i,e,d,v),ka(u,e,d,v),w,D,e))});return this._consoleTask&&(y._consoleTask=this._consoleTask),y}return n.prototype=Lt,n},set:function(e){H(this,"then",e&&e.prototype===Lt?Zt:{get:function(){return e},set:Zt.set})}};function Hn(e,t,n,i,u){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=i,this.psd=u}function un(e,t){var n,i;Pe.push(t),e._state===null&&(n=e._lib&&Ut(),t=Re(t),e._state=!1,e._value=t,i=e,Me.some(function(u){return u._value===i._value})||Me.push(i),_n(e),n&&ln())}function _n(e){var t=e._listeners;e._listeners=[];for(var n=0,i=t.length;n<i;++n)Ot(e,t[n]);var u=e._PSD;--u.ref||u.finalize(),Bt===0&&(++Bt,ne(function(){--Bt==0&&xr()},[]))}function Ot(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Bt,ne(wn,[n,e,t])}else e._listeners.push(t)}function wn(e,t,n){try{var i,u=t._value;!t._state&&Pe.length&&(Pe=[]),i=ze&&t._consoleTask?t._consoleTask.run(function(){return e(u)}):e(u),t._state||Pe.indexOf(u)!==-1||(function(c){for(var d=Me.length;d;)if(Me[--d]._value===c._value)return Me.splice(d,1)})(t),n.resolve(i)}catch(c){n.reject(c)}finally{--Bt==0&&xr(),--n.psd.ref||n.psd.finalize()}}function Ln(){$t(Ee,function(){Ut()&&ln()})}function Ut(){var e=he;return ye=he=!1,e}function ln(){var e,t,n;do for(;0<Et.length;)for(e=Et,Et=[],n=e.length,t=0;t<n;++t){var i=e[t];i[0].apply(null,i[1])}while(0<Et.length);ye=he=!0}function xr(){var e=Me;Me=[],e.forEach(function(i){i._PSD.onunhandled.call(null,i._value,i)});for(var t=Ve.slice(0),n=t.length;n;)t[--n]()}function zn(e){return new X(Lt,!1,e)}function Ge(e,t){var n=$;return function(){var i=Ut(),u=$;try{return Vt(n,!0),e.apply(this,arguments)}catch(c){t&&t(c)}finally{Vt(u,!1),i&&ln()}}}P(X.prototype,{then:Zt,_then:function(e,t){Ot(this,new Hn(null,null,e,t,$))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,n=arguments[1];return typeof t=="function"?this.then(null,function(i){return(i instanceof t?n:zn)(i)}):this.then(null,function(i){return(i&&i.name===t?n:zn)(i)})},finally:function(e){return this.then(function(t){return X.resolve(e()).then(function(){return t})},function(t){return X.resolve(e()).then(function(){return zn(t)})})},timeout:function(e,t){var n=this;return e<1/0?new X(function(i,u){var c=setTimeout(function(){return u(new ae.Timeout(t))},e);n.then(i,u).finally(clearTimeout.bind(null,c))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&H(X.prototype,Symbol.toStringTag,"Dexie.Promise"),Ee.env=wa(),P(X,{all:function(){var e=Le.apply(null,arguments).map(Vn);return new X(function(t,n){e.length===0&&t([]);var i=e.length;e.forEach(function(u,c){return X.resolve(u).then(function(d){e[c]=d,--i||t(e)},n)})})},resolve:function(e){return e instanceof X?e:e&&typeof e.then=="function"?new X(function(t,n){e.then(t,n)}):new X(Lt,!0,e)},reject:zn,race:function(){var e=Le.apply(null,arguments).map(Vn);return new X(function(t,n){e.map(function(i){return X.resolve(i).then(t,n)})})},PSD:{get:function(){return $},set:function(e){return $=e}},totalEchoes:{get:function(){return Wn}},newPSD:Yt,usePSD:$t,scheduler:{get:function(){return ne},set:function(e){ne=e}},rejectionMapper:{get:function(){return Re},set:function(e){Re=e}},follow:function(e,t){return new X(function(n,i){return Yt(function(u,c){var d=$;d.unhandleds=[],d.onunhandled=c,d.finalize=et(function(){var v,y=this;v=function(){y.unhandleds.length===0?u():c(y.unhandleds[0])},Ve.push(function w(){v(),Ve.splice(Ve.indexOf(w),1)}),++Bt,ne(function(){--Bt==0&&xr()},[])},d.finalize),e()},t,n,i)})}}),jt&&(jt.allSettled&&H(X,"allSettled",function(){var e=Le.apply(null,arguments).map(Vn);return new X(function(t){e.length===0&&t([]);var n=e.length,i=new Array(n);e.forEach(function(u,c){return X.resolve(u).then(function(d){return i[c]={status:"fulfilled",value:d}},function(d){return i[c]={status:"rejected",reason:d}}).then(function(){return--n||t(i)})})})}),jt.any&&typeof AggregateError<"u"&&H(X,"any",function(){var e=Le.apply(null,arguments).map(Vn);return new X(function(t,n){e.length===0&&n(new AggregateError([]));var i=e.length,u=new Array(i);e.forEach(function(c,d){return X.resolve(c).then(function(v){return t(v)},function(v){u[d]=v,--i||n(new AggregateError(u))})})})}),jt.withResolvers&&(X.withResolvers=jt.withResolvers));var ft={awaits:0,echoes:0,id:0},Qo=0,Un=[],Yn=0,Wn=0,Jo=0;function Yt(e,t,n,i){var u=$,c=Object.create(u);return c.parent=u,c.ref=0,c.global=!1,c.id=++Jo,Ee.env,c.env=bn?{Promise:X,PromiseProp:{value:X,configurable:!0,writable:!0},all:X.all,race:X.race,allSettled:X.allSettled,any:X.any,resolve:X.resolve,reject:X.reject}:{},t&&k(c,t),++u.ref,c.finalize=function(){--this.parent.ref||this.parent.finalize()},i=$t(c,e,n,i),c.ref===0&&c.finalize(),i}function cn(){return ft.id||(ft.id=++Qo),++ft.awaits,ft.echoes+=Nn,ft.id}function Wt(){return!!ft.awaits&&(--ft.awaits==0&&(ft.id=0),ft.echoes=ft.awaits*Nn,!0)}function Vn(e){return ft.echoes&&e&&e.constructor===jt?(cn(),e.then(function(t){return Wt(),t},function(t){return Wt(),tt(t)})):e}function Xo(){var e=Un[Un.length-1];Un.pop(),Vt(e,!1)}function Vt(e,t){var n,i=$;(t?!ft.echoes||Yn++&&e===$:!Yn||--Yn&&e===$)||queueMicrotask(t?(function(u){++Wn,ft.echoes&&--ft.echoes!=0||(ft.echoes=ft.awaits=ft.id=0),Un.push($),Vt(u,!0)}).bind(null,e):Xo),e!==$&&($=e,i===Ee&&(Ee.env=wa()),bn&&(n=Ee.env.Promise,t=e.env,(i.global||e.global)&&(Object.defineProperty(f,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function wa(){var e=f.Promise;return bn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(f,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function $t(e,t,n,i,u){var c=$;try{return Vt(e,!0),t(n,i,u)}finally{Vt(c,!1)}}function ka(e,t,n,i){return typeof e!="function"?e:function(){var u=$;n&&cn(),Vt(t,!0);try{return e.apply(this,arguments)}finally{Vt(u,!1),i&&queueMicrotask(Wt)}}}function Dr(e){Promise===jt&&ft.echoes===0?Yn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+Pt).indexOf("[native code]")===-1&&(cn=Wt=De);var tt=X.reject,en="￿",Nt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",xa="String expected.",fn=[],Gn="__dbnames",Sr="readonly",Tr="readwrite";function tn(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Da={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Qn(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=me(t))[e],t}}function Sa(){throw ae.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function je(e,t){try{var n=Ta(e),i=Ta(t);if(n!==i)return n==="Array"?1:i==="Array"?-1:n==="binary"?1:i==="binary"?-1:n==="string"?1:i==="string"?-1:n==="Date"?1:i!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return(function(u,c){for(var d=u.length,v=c.length,y=d<v?d:v,w=0;w<y;++w)if(u[w]!==c[w])return u[w]<c[w]?-1:1;return d===v?0:d<v?-1:1})(Ea(e),Ea(t));case"Array":return(function(u,c){for(var d=u.length,v=c.length,y=d<v?d:v,w=0;w<y;++w){var D=je(u[w],c[w]);if(D!==0)return D}return d===v?0:d<v?-1:1})(e,t)}}catch{}return NaN}function Ta(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=Ce(e),e==="ArrayBuffer"?"binary":e)}function Ea(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function Jn(e,t,n){var i=e.schema.yProps;return i?(t&&0<n.numFailures&&(t=t.filter(function(u,c){return!n.failures[c]})),Promise.all(i.map(function(u){return u=u.updatesTable,t?e.db.table(u).where("k").anyOf(t).delete():e.db.table(u).clear()})).then(function(){return n})):n}var Ca=(Ye.prototype._trans=function(e,t,n){var i=this._tx||$.trans,u=this.name,c=ze&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function d(w,D,p){if(!p.schema[u])throw new ae.NotFound("Table "+u+" not part of transaction");return t(p.idbtrans,p)}var v=Ut();try{var y=i&&i.db._novip===this.db._novip?i===$.trans?i._promise(e,d,n):Yt(function(){return i._promise(e,d,n)},{trans:i,transless:$.transless||$}):(function w(D,p,E,b){if(D.idbdb&&(D._state.openComplete||$.letThrough||D._vip)){var x=D._createTransaction(p,E,D._dbSchema);try{x.create(),D._state.PR1398_maxLoop=3}catch(T){return T.name===Fe.InvalidState&&D.isOpen()&&0<--D._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),D.close({disableAutoOpen:!1}),D.open().then(function(){return w(D,p,E,b)})):tt(T)}return x._promise(p,function(T,S){return Yt(function(){return $.trans=x,b(T,S,x)})}).then(function(T){if(p==="readwrite")try{x.idbtrans.commit()}catch{}return p==="readonly"?T:x._completion.then(function(){return T})})}if(D._state.openComplete)return tt(new ae.DatabaseClosed(D._state.dbOpenError));if(!D._state.isBeingOpened){if(!D._state.autoOpen)return tt(new ae.DatabaseClosed);D.open().catch(De)}return D._state.dbReadyPromise.then(function(){return w(D,p,E,b)})})(this.db,e,[this.name],d);return c&&(y._consoleTask=c,y=y.catch(function(w){return console.trace(w),tt(w)})),y}finally{v&&ln()}},Ye.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?tt(new ae.Type("Invalid argument to Table.get()")):this._trans("readonly",function(i){return n.core.get({trans:i,key:e}).then(function(u){return n.hook.reading.fire(u)})}).then(t)},Ye.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(g(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=h(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(v){if(v.compound&&t.every(function(w){return 0<=v.keyPath.indexOf(w)})){for(var y=0;y<t.length;++y)if(t.indexOf(v.keyPath[y])===-1)return!1;return!0}return!1}).sort(function(v,y){return v.keyPath.length-y.keyPath.length})[0];if(n&&this.db._maxKey!==en){var c=n.keyPath.slice(0,t.length);return this.where(c).equals(c.map(function(y){return e[y]}))}!n&&ze&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var i=this.schema.idxByName;function u(v,y){return je(v,y)===0}var d=t.reduce(function(p,y){var w=p[0],D=p[1],p=i[y],E=e[y];return[w||p,w||!p?tn(D,p&&p.multi?function(b){return b=q(b,y),g(b)&&b.some(function(x){return u(E,x)})}:function(b){return u(E,q(b,y))}):D]},[null,null]),c=d[0],d=d[1];return c?this.where(c.name).equals(e[c.keyPath]).filter(d):n?this.filter(d):this.where(t).equals("")},Ye.prototype.filter=function(e){return this.toCollection().and(e)},Ye.prototype.count=function(e){return this.toCollection().count(e)},Ye.prototype.offset=function(e){return this.toCollection().offset(e)},Ye.prototype.limit=function(e){return this.toCollection().limit(e)},Ye.prototype.each=function(e){return this.toCollection().each(e)},Ye.prototype.toArray=function(e){return this.toCollection().toArray(e)},Ye.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ye.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,g(e)?"[".concat(e.join("+"),"]"):e))},Ye.prototype.reverse=function(){return this.toCollection().reverse()},Ye.prototype.mapToClass=function(e){var t,n=this.db,i=this.name;function u(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof Sa&&((function(y,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function D(){this.constructor=y}a(y,w),y.prototype=w===null?Object.create(w):(D.prototype=w.prototype,new D)})(u,t=e),Object.defineProperty(u.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),u.prototype.table=function(){return i},e=u);for(var c=new Set,d=e.prototype;d;d=C(d))Object.getOwnPropertyNames(d).forEach(function(y){return c.add(y)});function v(y){if(!y)return y;var w,D=Object.create(e.prototype);for(w in y)if(!c.has(w))try{D[w]=y[w]}catch{}return D}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=v,this.hook("reading",v),e},Ye.prototype.defineClass=function(){return this.mapToClass(function(e){k(this,e)})},Ye.prototype.add=function(e,t){var n=this,i=this.schema.primKey,u=i.auto,c=i.keyPath,d=e;return c&&u&&(d=Qn(c)(e)),this._trans("readwrite",function(v){return n.core.mutate({trans:v,type:"add",keys:t!=null?[t]:null,values:[d]})}).then(function(v){return v.numFailures?X.reject(v.failures[0]):v.lastResult}).then(function(v){if(c)try{F(e,c,v)}catch{}return v})},Ye.prototype.update=function(e,t){return typeof e!="object"||g(e)?this.where(":id").equals(e).modify(t):(e=q(e,this.schema.primKey.keyPath),e===void 0?tt(new ae.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},Ye.prototype.put=function(e,t){var n=this,i=this.schema.primKey,u=i.auto,c=i.keyPath,d=e;return c&&u&&(d=Qn(c)(e)),this._trans("readwrite",function(v){return n.core.mutate({trans:v,type:"put",values:[d],keys:t!=null?[t]:null})}).then(function(v){return v.numFailures?X.reject(v.failures[0]):v.lastResult}).then(function(v){if(c)try{F(e,c,v)}catch{}return v})},Ye.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]}).then(function(i){return Jn(t,[e],i)}).then(function(i){return i.numFailures?X.reject(i.failures[0]):void 0})})},Ye.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Da}).then(function(n){return Jn(e,null,n)})}).then(function(t){return t.numFailures?X.reject(t.failures[0]):void 0})},Ye.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(i){return i.map(function(u){return t.hook.reading.fire(u)})})})},Ye.prototype.bulkAdd=function(e,t,n){var i=this,u=Array.isArray(t)?t:void 0,c=(n=n||(u?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(d){var w=i.schema.primKey,v=w.auto,w=w.keyPath;if(w&&u)throw new ae.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(u&&u.length!==e.length)throw new ae.InvalidArgument("Arguments objects and keys must have the same length");var y=e.length,w=w&&v?e.map(Qn(w)):e;return i.core.mutate({trans:d,type:"add",keys:u,values:w,wantResults:c}).then(function(x){var p=x.numFailures,E=x.results,b=x.lastResult,x=x.failures;if(p===0)return c?E:b;throw new Ae("".concat(i.name,".bulkAdd(): ").concat(p," of ").concat(y," operations failed"),x)})})},Ye.prototype.bulkPut=function(e,t,n){var i=this,u=Array.isArray(t)?t:void 0,c=(n=n||(u?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(d){var w=i.schema.primKey,v=w.auto,w=w.keyPath;if(w&&u)throw new ae.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(u&&u.length!==e.length)throw new ae.InvalidArgument("Arguments objects and keys must have the same length");var y=e.length,w=w&&v?e.map(Qn(w)):e;return i.core.mutate({trans:d,type:"put",keys:u,values:w,wantResults:c}).then(function(x){var p=x.numFailures,E=x.results,b=x.lastResult,x=x.failures;if(p===0)return c?E:b;throw new Ae("".concat(i.name,".bulkPut(): ").concat(p," of ").concat(y," operations failed"),x)})})},Ye.prototype.bulkUpdate=function(e){var t=this,n=this.core,i=e.map(function(d){return d.key}),u=e.map(function(d){return d.changes}),c=[];return this._trans("readwrite",function(d){return n.getMany({trans:d,keys:i,cache:"clone"}).then(function(v){var y=[],w=[];e.forEach(function(p,E){var b=p.key,x=p.changes,T=v[E];if(T){for(var S=0,O=Object.keys(x);S<O.length;S++){var B=O[S],L=x[B];if(B===t.schema.primKey.keyPath){if(je(L,b)!==0)throw new ae.Constraint("Cannot update primary key in bulkUpdate()")}else F(T,B,L)}c.push(E),y.push(b),w.push(T)}});var D=y.length;return n.mutate({trans:d,type:"put",keys:y,values:w,updates:{keys:i,changeSpecs:u}}).then(function(p){var E=p.numFailures,b=p.failures;if(E===0)return D;for(var x=0,T=Object.keys(b);x<T.length;x++){var S,O=T[x],B=c[Number(O)];B!=null&&(S=b[O],delete b[O],b[B]=S)}throw new Ae("".concat(t.name,".bulkUpdate(): ").concat(E," of ").concat(D," operations failed"),b)})})})},Ye.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(i){return t.core.mutate({trans:i,type:"delete",keys:e}).then(function(u){return Jn(t,e,u)})}).then(function(d){var u=d.numFailures,c=d.lastResult,d=d.failures;if(u===0)return c;throw new Ae("".concat(t.name,".bulkDelete(): ").concat(u," of ").concat(n," operations failed"),d)})},Ye);function Ye(){}function kn(e){function t(d,v){if(v){for(var y=arguments.length,w=new Array(y-1);--y;)w[y-1]=arguments[y];return n[d].subscribe.apply(null,w),e}if(typeof d=="string")return n[d]}var n={};t.addEventType=c;for(var i=1,u=arguments.length;i<u;++i)c(arguments[i]);return t;function c(d,v,y){if(typeof d!="object"){var w;v=v||Tt;var D={subscribers:[],fire:y=y||De,subscribe:function(p){D.subscribers.indexOf(p)===-1&&(D.subscribers.push(p),D.fire=v(D.fire,p))},unsubscribe:function(p){D.subscribers=D.subscribers.filter(function(E){return E!==p}),D.fire=D.subscribers.reduce(v,y)}};return n[d]=t[d]=D}h(w=d).forEach(function(p){var E=w[p];if(g(E))c(p,w[p][0],w[p][1]);else{if(E!=="asap")throw new ae.InvalidArgument("Invalid event config");var b=c(p,vt,function(){for(var x=arguments.length,T=new Array(x);x--;)T[x]=arguments[x];b.subscribers.forEach(function(S){W(function(){S.apply(null,T)})})})}})}}function xn(e,t){return R(t).from({prototype:e}),t}function dn(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Er(e,t){e.filter=tn(e.filter,t)}function Cr(e,t,n){var i=e.replayFilter;e.replayFilter=i?function(){return tn(i(),t())}:t,e.justLimit=n&&!i}function Xn(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new ae.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Ia(e,t,n){var i=Xn(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:i,range:e.range}})}function Zn(e,t,n,i){var u=e.replayFilter?tn(e.filter,e.replayFilter()):e.filter;if(e.or){var c={},d=function(v,y,w){var D,p;u&&!u(y,w,function(E){return y.stop(E)},function(E){return y.fail(E)})||((p=""+(D=y.primaryKey))=="[object ArrayBuffer]"&&(p=""+new Uint8Array(D)),K(c,p)||(c[p]=!0,t(v,y,w)))};return Promise.all([e.or._iterate(d,n),Oa(Ia(e,i,n),e.algorithm,d,!e.keysOnly&&e.valueMapper)])}return Oa(Ia(e,i,n),tn(e.algorithm,u),t,!e.keysOnly&&e.valueMapper)}function Oa(e,t,n,i){var u=Ge(i?function(c,d,v){return n(i(c),d,v)}:n);return e.then(function(c){if(c)return c.start(function(){var d=function(){return c.continue()};t&&!t(c,function(v){return d=v},function(v){c.stop(v),d=De},function(v){c.fail(v),d=De})||u(c.value,c,function(v){return d=v}),d()})})}var Dn=(Pa.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var n=t.add;if(g(n))return l(l([],g(e)?e:[],!0),n).sort();if(typeof n=="number")return(Number(e)||0)+n;if(typeof n=="bigint")try{return BigInt(e)+n}catch{return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(t.remove!==void 0){var i=t.remove;if(g(i))return g(e)?e.filter(function(u){return!i.includes(u)}).sort():[];if(typeof i=="number")return Number(e)-i;if(typeof i=="bigint")try{return BigInt(e)-i}catch{return BigInt(0)-i}throw new TypeError("Invalid subtrahend ".concat(i))}return n=(n=t.replacePrefix)===null||n===void 0?void 0:n[0],n&&typeof e=="string"&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},Pa);function Pa(e){this["@@propmod"]=e}var Zo=(Be.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,tt.bind(null,n.error)):n.table._trans("readonly",e).then(t)},Be.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,tt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},Be.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=tn(t.algorithm,e)},Be.prototype._iterate=function(e,t){return Zn(this._ctx,e,t,this._ctx.table.core)},Be.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&k(n,e),t._ctx=n,t},Be.prototype.raw=function(){return this._ctx.valueMapper=null,this},Be.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return Zn(t,e,n,t.table.core)})},Be.prototype.count=function(e){var t=this;return this._read(function(n){var i=t._ctx,u=i.table.core;if(dn(i,!0))return u.count({trans:n,query:{index:Xn(i,u.schema),range:i.range}}).then(function(d){return Math.min(d,i.limit)});var c=0;return Zn(i,function(){return++c,!1},n,u).then(function(){return c})}).then(e)},Be.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),i=n[0],u=n.length-1;function c(y,w){return w?c(y[n[w]],w-1):y[i]}var d=this._ctx.dir==="next"?1:-1;function v(y,w){return je(c(y,u),c(w,u))*d}return this.toArray(function(y){return y.sort(v)}).then(t)},Be.prototype.toArray=function(e){var t=this;return this._read(function(n){var i=t._ctx;if(i.dir==="next"&&dn(i,!0)&&0<i.limit){var u=i.valueMapper,c=Xn(i,i.table.core.schema);return i.table.core.query({trans:n,limit:i.limit,values:!0,query:{index:c,range:i.range}}).then(function(v){return v=v.result,u?v.map(u):v})}var d=[];return Zn(i,function(v){return d.push(v)},n,i.table.core).then(function(){return d})},e)},Be.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,dn(t)?Cr(t,function(){var n=e;return function(i,u){return n===0||(n===1?--n:u(function(){i.advance(n),n=0}),!1)}}):Cr(t,function(){var n=e;return function(){return--n<0}})),this},Be.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Cr(this._ctx,function(){var t=e;return function(n,i,u){return--t<=0&&i(u),0<=t}},!0),this},Be.prototype.until=function(e,t){return Er(this._ctx,function(n,i,u){return!e(n.value)||(i(u),t)}),this},Be.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},Be.prototype.last=function(e){return this.reverse().first(e)},Be.prototype.filter=function(e){var t;return Er(this._ctx,function(n){return e(n.value)}),(t=this._ctx).isMatch=tn(t.isMatch,e),this},Be.prototype.and=function(e){return this.filter(e)},Be.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Be.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Be.prototype.desc=function(){return this.reverse()},Be.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,i){e(i.key,i)})},Be.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},Be.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,i){e(i.primaryKey,i)})},Be.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(i,u){n.push(u.key)}).then(function(){return n}).then(e)},Be.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&dn(t,!0)&&0<t.limit)return this._read(function(i){var u=Xn(t,t.table.core.schema);return t.table.core.query({trans:i,values:!1,limit:t.limit,query:{index:u,range:t.range}})}).then(function(i){return i.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(i,u){n.push(u.primaryKey)}).then(function(){return n}).then(e)},Be.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},Be.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},Be.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Be.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return Er(this._ctx,function(u){var i=u.primaryKey.toString(),u=K(t,i);return t[i]=!0,!u}),this},Be.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(i){var u,c,d;d=typeof e=="function"?e:(u=h(e),c=u.length,function(O){for(var B=!1,L=0;L<c;++L){var U=u[L],G=e[U],ee=q(O,U);G instanceof Dn?(F(O,U,G.execute(ee)),B=!0):ee!==G&&(F(O,U,G),B=!0)}return B});var v=n.table.core,p=v.schema.primaryKey,y=p.outbound,w=p.extractKey,D=200,p=t.db._options.modifyChunkSize;p&&(D=typeof p=="object"?p[v.name]||p["*"]||200:p);function E(O,U){var L=U.failures,U=U.numFailures;x+=O-U;for(var G=0,ee=h(L);G<ee.length;G++){var J=ee[G];b.push(L[J])}}var b=[],x=0,T=[],S=e===Aa;return t.clone().primaryKeys().then(function(O){function B(U){var G=Math.min(D,O.length-U),ee=O.slice(U,U+G);return(S?Promise.resolve([]):v.getMany({trans:i,keys:ee,cache:"immutable"})).then(function(J){var Z=[],oe=[],re=y?[]:null,ue=S?ee:[];if(!S)for(var Se=0;Se<G;++Se){var qe=J[Se],we={value:me(qe),primKey:O[U+Se]};d.call(we,we.value,we)!==!1&&(we.value==null?ue.push(O[U+Se]):y||je(w(qe),w(we.value))===0?(oe.push(we.value),y&&re.push(O[U+Se])):(ue.push(O[U+Se]),Z.push(we.value)))}return Promise.resolve(0<Z.length&&v.mutate({trans:i,type:"add",values:Z}).then(function(Je){for(var _e in Je.failures)ue.splice(parseInt(_e),1);E(Z.length,Je)})).then(function(){return(0<oe.length||L&&typeof e=="object")&&v.mutate({trans:i,type:"put",keys:re,values:oe,criteria:L,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<U}).then(function(Je){return E(oe.length,Je)})}).then(function(){return(0<ue.length||L&&S)&&v.mutate({trans:i,type:"delete",keys:ue,criteria:L,isAdditionalChunk:0<U}).then(function(Je){return Jn(n.table,ue,Je)}).then(function(Je){return E(ue.length,Je)})}).then(function(){return O.length>U+G&&B(U+D)})})}var L=dn(n)&&n.limit===1/0&&(typeof e!="function"||S)&&{index:n.index,range:n.range};return B(0).then(function(){if(0<b.length)throw new Ie("Error modifying one or more objects",b,x,T);return O.length})})})},Be.prototype.delete=function(){var e=this._ctx,t=e.range;return!dn(e)||e.table.schema.yProps||!e.isPrimKey&&t.type!==3?this.modify(Aa):this._write(function(n){var i=e.table.core.schema.primaryKey,u=t;return e.table.core.count({trans:n,query:{index:i,range:u}}).then(function(c){return e.table.core.mutate({trans:n,type:"deleteRange",range:u}).then(function(y){var v=y.failures,y=y.numFailures;if(y)throw new Ie("Could not delete some values",Object.keys(v).map(function(w){return v[w]}),c-y);return c-y})})})},Be);function Be(){}var Aa=function(e,t){return t.value=null};function $o(e,t){return e<t?-1:e===t?0:1}function ei(e,t){return t<e?-1:e===t?0:1}function Ct(e,t,n){return e=e instanceof ja?new e.Collection(e):e,e._ctx.error=new(n||TypeError)(t),e}function hn(e){return new e.Collection(e,function(){return Ma("")}).limit(0)}function $n(e,t,n,i){var u,c,d,v,y,w,D,p=n.length;if(!n.every(function(x){return typeof x=="string"}))return Ct(e,xa);function E(x){u=x==="next"?function(S){return S.toUpperCase()}:function(S){return S.toLowerCase()},c=x==="next"?function(S){return S.toLowerCase()}:function(S){return S.toUpperCase()},d=x==="next"?$o:ei;var T=n.map(function(S){return{lower:c(S),upper:u(S)}}).sort(function(S,O){return d(S.lower,O.lower)});v=T.map(function(S){return S.upper}),y=T.map(function(S){return S.lower}),D=(w=x)==="next"?"":i}E("next"),e=new e.Collection(e,function(){return Gt(v[0],y[p-1]+i)}),e._ondirectionchange=function(x){E(x)};var b=0;return e._addAlgorithm(function(x,T,S){var O=x.key;if(typeof O!="string")return!1;var B=c(O);if(t(B,y,b))return!0;for(var L=null,U=b;U<p;++U){var G=(function(ee,J,Z,oe,re,ue){for(var Se=Math.min(ee.length,oe.length),qe=-1,we=0;we<Se;++we){var Je=J[we];if(Je!==oe[we])return re(ee[we],Z[we])<0?ee.substr(0,we)+Z[we]+Z.substr(we+1):re(ee[we],oe[we])<0?ee.substr(0,we)+oe[we]+Z.substr(we+1):0<=qe?ee.substr(0,qe)+J[qe]+Z.substr(qe+1):null;re(ee[we],Je)<0&&(qe=we)}return Se<oe.length&&ue==="next"?ee+Z.substr(ee.length):Se<ee.length&&ue==="prev"?ee.substr(0,Z.length):qe<0?null:ee.substr(0,qe)+oe[qe]+Z.substr(qe+1)})(O,B,v[U],y[U],d,w);G===null&&L===null?b=U+1:(L===null||0<d(L,G))&&(L=G)}return T(L!==null?function(){x.continue(L+D)}:S),!1}),e}function Gt(e,t,n,i){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:i}}function Ma(e){return{type:1,lower:e,upper:e}}var ja=(Object.defineProperty(dt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),dt.prototype.between=function(e,t,n,i){n=n!==!1,i=i===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(n||i)&&(!n||!i)?hn(this):new this.Collection(this,function(){return Gt(e,t,!n,!i)})}catch{return Ct(this,Nt)}},dt.prototype.equals=function(e){return e==null?Ct(this,Nt):new this.Collection(this,function(){return Ma(e)})},dt.prototype.above=function(e){return e==null?Ct(this,Nt):new this.Collection(this,function(){return Gt(e,void 0,!0)})},dt.prototype.aboveOrEqual=function(e){return e==null?Ct(this,Nt):new this.Collection(this,function(){return Gt(e,void 0,!1)})},dt.prototype.below=function(e){return e==null?Ct(this,Nt):new this.Collection(this,function(){return Gt(void 0,e,!1,!0)})},dt.prototype.belowOrEqual=function(e){return e==null?Ct(this,Nt):new this.Collection(this,function(){return Gt(void 0,e)})},dt.prototype.startsWith=function(e){return typeof e!="string"?Ct(this,xa):this.between(e,e+en,!0,!0)},dt.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):$n(this,function(t,n){return t.indexOf(n[0])===0},[e],en)},dt.prototype.equalsIgnoreCase=function(e){return $n(this,function(t,n){return t===n[0]},[e],"")},dt.prototype.anyOfIgnoreCase=function(){var e=Le.apply(it,arguments);return e.length===0?hn(this):$n(this,function(t,n){return n.indexOf(t)!==-1},e,"")},dt.prototype.startsWithAnyOfIgnoreCase=function(){var e=Le.apply(it,arguments);return e.length===0?hn(this):$n(this,function(t,n){return n.some(function(i){return t.indexOf(i)===0})},e,en)},dt.prototype.anyOf=function(){var e=this,t=Le.apply(it,arguments),n=this._cmp;try{t.sort(n)}catch{return Ct(this,Nt)}if(t.length===0)return hn(this);var i=new this.Collection(this,function(){return Gt(t[0],t[t.length-1])});i._ondirectionchange=function(c){n=c==="next"?e._ascending:e._descending,t.sort(n)};var u=0;return i._addAlgorithm(function(c,d,v){for(var y=c.key;0<n(y,t[u]);)if(++u===t.length)return d(v),!1;return n(y,t[u])===0||(d(function(){c.continue(t[u])}),!1)}),i},dt.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},dt.prototype.noneOf=function(){var e=Le.apply(it,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Ct(this,Nt)}var t=e.reduce(function(n,i){return n?n.concat([[n[n.length-1][1],i]]):[[-1/0,i]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},dt.prototype.inAnyRange=function(O,t){var n=this,i=this._cmp,u=this._ascending,c=this._descending,d=this._min,v=this._max;if(O.length===0)return hn(this);if(!O.every(function(B){return B[0]!==void 0&&B[1]!==void 0&&u(B[0],B[1])<=0}))return Ct(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ae.InvalidArgument);var y=!t||t.includeLowers!==!1,w=t&&t.includeUppers===!0,D,p=u;function E(B,L){return p(B[0],L[0])}try{(D=O.reduce(function(B,L){for(var U=0,G=B.length;U<G;++U){var ee=B[U];if(i(L[0],ee[1])<0&&0<i(L[1],ee[0])){ee[0]=d(ee[0],L[0]),ee[1]=v(ee[1],L[1]);break}}return U===G&&B.push(L),B},[])).sort(E)}catch{return Ct(this,Nt)}var b=0,x=w?function(B){return 0<u(B,D[b][1])}:function(B){return 0<=u(B,D[b][1])},T=y?function(B){return 0<c(B,D[b][0])}:function(B){return 0<=c(B,D[b][0])},S=x,O=new this.Collection(this,function(){return Gt(D[0][0],D[D.length-1][1],!y,!w)});return O._ondirectionchange=function(B){p=B==="next"?(S=x,u):(S=T,c),D.sort(E)},O._addAlgorithm(function(B,L,U){for(var G,ee=B.key;S(ee);)if(++b===D.length)return L(U),!1;return!x(G=ee)&&!T(G)||(n._cmp(ee,D[b][1])===0||n._cmp(ee,D[b][0])===0||L(function(){p===u?B.continue(D[b][0]):B.continue(D[b][1])}),!1)}),O},dt.prototype.startsWithAnyOf=function(){var e=Le.apply(it,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?hn(this):this.inAnyRange(e.map(function(t){return[t,t+en]})):Ct(this,"startsWithAnyOf() only works with strings")},dt);function dt(){}function Kt(e){return Ge(function(t){return Sn(t),e(t.target.error),!1})}function Sn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Tn="storagemutated",Ir="x-storagemutated-1",Qt=kn(null,Tn),ti=(Ft.prototype._lock=function(){return A(!$.global),++this._reculock,this._reculock!==1||$.global||($.lockOwnerFor=this),this},Ft.prototype._unlock=function(){if(A(!$.global),--this._reculock==0)for($.global||($.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{$t(e[1],e[0])}catch{}}return this},Ft.prototype._locked=function(){return this._reculock&&$.lockOwnerFor!==this},Ft.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,i=this.db._state.dbOpenError;if(A(!this.idbtrans),!e&&!n)switch(i&&i.name){case"DatabaseClosedError":throw new ae.DatabaseClosed(i);case"MissingAPIError":throw new ae.MissingAPI(i.message,i);default:throw new ae.OpenFailed(i)}if(!this.active)throw new ae.TransactionInactive;return A(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ge(function(u){Sn(u),t._reject(e.error)}),e.onabort=Ge(function(u){Sn(u),t.active&&t._reject(new ae.Abort(e.error)),t.active=!1,t.on("abort").fire(u)}),e.oncomplete=Ge(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Qt.storagemutated.fire(e.mutatedParts)}),this},Ft.prototype._promise=function(e,t,n){var i=this;if(e==="readwrite"&&this.mode!=="readwrite")return tt(new ae.ReadOnly("Transaction is readonly"));if(!this.active)return tt(new ae.TransactionInactive);if(this._locked())return new X(function(c,d){i._blockedFuncs.push([function(){i._promise(e,t,n).then(c,d)},$])});if(n)return Yt(function(){var c=new X(function(d,v){i._lock();var y=t(d,v,i);y&&y.then&&y.then(d,v)});return c.finally(function(){return i._unlock()}),c._lib=!0,c});var u=new X(function(c,d){var v=t(c,d,i);v&&v.then&&v.then(c,d)});return u._lib=!0,u},Ft.prototype._root=function(){return this.parent?this.parent._root():this},Ft.prototype.waitFor=function(e){var t,n=this._root(),i=X.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return i}):(n._waitingFor=i,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),(function c(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=c)})());var u=n._waitingFor;return new X(function(c,d){i.then(function(v){return n._waitingQueue.push(Ge(c.bind(null,v)))},function(v){return n._waitingQueue.push(Ge(d.bind(null,v)))}).finally(function(){n._waitingFor===u&&(n._waitingFor=null)})})},Ft.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ae.Abort))},Ft.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(K(t,e))return t[e];var n=this.schema[e];if(!n)throw new ae.NotFound("Table "+e+" not part of transaction");return n=new this.db.Table(e,n,this),n.core=this.db.core.table(e),t[e]=n},Ft);function Ft(){}function Or(e,t,n,i,u,c,d,v){return{name:e,keyPath:t,unique:n,multi:i,auto:u,compound:c,src:(n&&!d?"&":"")+(i?"*":"")+(u?"++":"")+Ka(t),type:v}}function Ka(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Pr(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(i=function(u){return[u.name,u]},n.reduce(function(u,c,d){return d=i(c,d),d&&(u[d[0]]=d[1]),u},{}))};var i}var En=function(e){try{return e.only([[]]),En=function(){return[[]]},[[]]}catch{return En=function(){return en},en}};function Ar(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(n){return n[t]}:function(n){return q(n,t)}:function(n){return q(n,e)};var t}function Fa(e){return[].slice.call(e)}var ni=0;function Cn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function ri(e,t,y){function i(S){if(S.type===3)return null;if(S.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var b=S.lower,x=S.upper,T=S.lowerOpen,S=S.upperOpen;return b===void 0?x===void 0?null:t.upperBound(x,!!S):x===void 0?t.lowerBound(b,!!T):t.bound(b,x,!!T,!!S)}function u(E){var b,x=E.name;return{name:x,schema:E,mutate:function(T){var S=T.trans,O=T.type,B=T.keys,L=T.values,U=T.range;return new Promise(function(G,ee){G=Ge(G);var J=S.objectStore(x),Z=J.keyPath==null,oe=O==="put"||O==="add";if(!oe&&O!=="delete"&&O!=="deleteRange")throw new Error("Invalid operation type: "+O);var re,ue=(B||L||{length:1}).length;if(B&&L&&B.length!==L.length)throw new Error("Given keys array must have same length as given values array.");if(ue===0)return G({numFailures:0,failures:{},results:[],lastResult:void 0});function Se(kt){++Je,Sn(kt)}var qe=[],we=[],Je=0;if(O==="deleteRange"){if(U.type===4)return G({numFailures:Je,failures:we,results:[],lastResult:void 0});U.type===3?qe.push(re=J.clear()):qe.push(re=J.delete(i(U)))}else{var Z=oe?Z?[L,B]:[L,null]:[B,null],_e=Z[0],yt=Z[1];if(oe)for(var bt=0;bt<ue;++bt)qe.push(re=yt&&yt[bt]!==void 0?J[O](_e[bt],yt[bt]):J[O](_e[bt])),re.onerror=Se;else for(bt=0;bt<ue;++bt)qe.push(re=J[O](_e[bt])),re.onerror=Se}function fr(kt){kt=kt.target.result,qe.forEach(function(an,Jr){return an.error!=null&&(we[Jr]=an.error)}),G({numFailures:Je,failures:we,results:O==="delete"?B:qe.map(function(an){return an.result}),lastResult:kt})}re.onerror=function(kt){Se(kt),fr(kt)},re.onsuccess=fr})},getMany:function(T){var S=T.trans,O=T.keys;return new Promise(function(B,L){B=Ge(B);for(var U,G=S.objectStore(x),ee=O.length,J=new Array(ee),Z=0,oe=0,re=function(qe){qe=qe.target,J[qe._pos]=qe.result,++oe===Z&&B(J)},ue=Kt(L),Se=0;Se<ee;++Se)O[Se]!=null&&((U=G.get(O[Se]))._pos=Se,U.onsuccess=re,U.onerror=ue,++Z);Z===0&&B(J)})},get:function(T){var S=T.trans,O=T.key;return new Promise(function(B,L){B=Ge(B);var U=S.objectStore(x).get(O);U.onsuccess=function(G){return B(G.target.result)},U.onerror=Kt(L)})},query:(b=w,function(T){return new Promise(function(S,O){S=Ge(S);var B,L,U,Z=T.trans,G=T.values,ee=T.limit,re=T.query,J=ee===1/0?void 0:ee,oe=re.index,re=re.range,Z=Z.objectStore(x),oe=oe.isPrimaryKey?Z:Z.index(oe.name),re=i(re);if(ee===0)return S({result:[]});b?((J=G?oe.getAll(re,J):oe.getAllKeys(re,J)).onsuccess=function(ue){return S({result:ue.target.result})},J.onerror=Kt(O)):(B=0,L=!G&&"openKeyCursor"in oe?oe.openKeyCursor(re):oe.openCursor(re),U=[],L.onsuccess=function(ue){var Se=L.result;return Se?(U.push(G?Se.value:Se.primaryKey),++B===ee?S({result:U}):void Se.continue()):S({result:U})},L.onerror=Kt(O))})}),openCursor:function(T){var S=T.trans,O=T.values,B=T.query,L=T.reverse,U=T.unique;return new Promise(function(G,ee){G=Ge(G);var oe=B.index,J=B.range,Z=S.objectStore(x),Z=oe.isPrimaryKey?Z:Z.index(oe.name),oe=L?U?"prevunique":"prev":U?"nextunique":"next",re=!O&&"openKeyCursor"in Z?Z.openKeyCursor(i(J),oe):Z.openCursor(i(J),oe);re.onerror=Kt(ee),re.onsuccess=Ge(function(ue){var Se,qe,we,Je,_e=re.result;_e?(_e.___id=++ni,_e.done=!1,Se=_e.continue.bind(_e),qe=(qe=_e.continuePrimaryKey)&&qe.bind(_e),we=_e.advance.bind(_e),Je=function(){throw new Error("Cursor not stopped")},_e.trans=S,_e.stop=_e.continue=_e.continuePrimaryKey=_e.advance=function(){throw new Error("Cursor not started")},_e.fail=Ge(ee),_e.next=function(){var yt=this,bt=1;return this.start(function(){return bt--?yt.continue():yt.stop()}).then(function(){return yt})},_e.start=function(yt){function bt(){if(re.result)try{yt()}catch(kt){_e.fail(kt)}else _e.done=!0,_e.start=function(){throw new Error("Cursor behind last entry")},_e.stop()}var fr=new Promise(function(kt,an){kt=Ge(kt),re.onerror=Kt(an),_e.fail=an,_e.stop=function(Jr){_e.stop=_e.continue=_e.continuePrimaryKey=_e.advance=Je,kt(Jr)}});return re.onsuccess=Ge(function(kt){re.onsuccess=bt,bt()}),_e.continue=Se,_e.continuePrimaryKey=qe,_e.advance=we,bt(),fr},G(_e)):G(null)},ee)})},count:function(T){var S=T.query,O=T.trans,B=S.index,L=S.range;return new Promise(function(U,G){var ee=O.objectStore(x),J=B.isPrimaryKey?ee:ee.index(B.name),ee=i(L),J=ee?J.count(ee):J.count();J.onsuccess=Ge(function(Z){return U(Z.target.result)}),J.onerror=Kt(G)})}}}var c,d,v,D=(d=y,v=Fa((c=e).objectStoreNames),{schema:{name:c.name,tables:v.map(function(E){return d.objectStore(E)}).map(function(E){var b=E.keyPath,S=E.autoIncrement,x=g(b),T={},S={name:E.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:b==null,compound:x,keyPath:b,autoIncrement:S,unique:!0,extractKey:Ar(b)},indexes:Fa(E.indexNames).map(function(O){return E.index(O)}).map(function(U){var B=U.name,L=U.unique,G=U.multiEntry,U=U.keyPath,G={name:B,compound:g(U),keyPath:U,unique:L,multiEntry:G,extractKey:Ar(U)};return T[Cn(U)]=G}),getIndexByKeyPath:function(O){return T[Cn(O)]}};return T[":id"]=S.primaryKey,b!=null&&(T[Cn(b)]=S.primaryKey),S})},hasGetAll:0<v.length&&"getAll"in d.objectStore(v[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),y=D.schema,w=D.hasGetAll,D=y.tables.map(u),p={};return D.forEach(function(E){return p[E.name]=E}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(E){if(!p[E])throw new Error("Table '".concat(E,"' not found"));return p[E]},MIN_KEY:-1/0,MAX_KEY:En(t),schema:y}}function ai(e,t,n,i){var u=n.IDBKeyRange;return n.indexedDB,{dbcore:(i=ri(t,u,i),e.dbcore.reduce(function(c,d){return d=d.create,s(s({},c),d(c))},i))}}function er(e,i){var n=i.db,i=ai(e._middlewares,n,e._deps,i);e.core=i.dbcore,e.tables.forEach(function(u){var c=u.name;e.core.schema.tables.some(function(d){return d.name===c})&&(u.core=e.core.table(c),e[c]instanceof e.Table&&(e[c].core=u.core))})}function tr(e,t,n,i){n.forEach(function(u){var c=i[u];t.forEach(function(d){var v=(function y(w,D){return Y(w,D)||(w=C(w))&&y(w,D)})(d,u);(!v||"value"in v&&v.value===void 0)&&(d===e.Transaction.prototype||d instanceof e.Transaction?H(d,u,{get:function(){return this.table(u)},set:function(y){V(this,u,{value:y,writable:!0,configurable:!0,enumerable:!0})}}):d[u]=new e.Table(u,c))})})}function Mr(e,t){t.forEach(function(n){for(var i in n)n[i]instanceof e.Table&&delete n[i]})}function oi(e,t){return e._cfg.version-t._cfg.version}function ii(e,t,n,i){var u=e._dbSchema;n.objectStoreNames.contains("$meta")&&!u.$meta&&(u.$meta=Pr("$meta",Ra("")[0],[]),e._storeNames.push("$meta"));var c=e._createTransaction("readwrite",e._storeNames,u);c.create(n),c._completion.catch(i);var d=c._reject.bind(c),v=$.transless||$;Yt(function(){return $.trans=c,$.transless=v,t!==0?(er(e,n),w=t,((y=c).storeNames.includes("$meta")?y.table("$meta").get("version").then(function(D){return D??w}):X.resolve(w)).then(function(D){return E=D,b=c,x=n,T=[],D=(p=e)._versions,S=p._dbSchema=rr(0,p.idbdb,x),(D=D.filter(function(O){return O._cfg.version>=E})).length!==0?(D.forEach(function(O){T.push(function(){var B=S,L=O._cfg.dbschema;ar(p,B,x),ar(p,L,x),S=p._dbSchema=L;var U=jr(B,L);U.add.forEach(function(oe){Kr(x,oe[0],oe[1].primKey,oe[1].indexes)}),U.change.forEach(function(oe){if(oe.recreate)throw new ae.Upgrade("Not yet support for changing primary key");var re=x.objectStore(oe.name);oe.add.forEach(function(ue){return nr(re,ue)}),oe.change.forEach(function(ue){re.deleteIndex(ue.name),nr(re,ue)}),oe.del.forEach(function(ue){return re.deleteIndex(ue)})});var G=O._cfg.contentUpgrade;if(G&&O._cfg.version>E){er(p,x),b._memoizedTables={};var ee=se(L);U.del.forEach(function(oe){ee[oe]=B[oe]}),Mr(p,[p.Transaction.prototype]),tr(p,[p.Transaction.prototype],h(ee),ee),b.schema=ee;var J,Z=te(G);return Z&&cn(),U=X.follow(function(){var oe;(J=G(b))&&Z&&(oe=Wt.bind(null,null),J.then(oe,oe))}),J&&typeof J.then=="function"?X.resolve(J):U.then(function(){return J})}}),T.push(function(B){var L,U,G=O._cfg.dbschema;L=G,U=B,[].slice.call(U.db.objectStoreNames).forEach(function(ee){return L[ee]==null&&U.db.deleteObjectStore(ee)}),Mr(p,[p.Transaction.prototype]),tr(p,[p.Transaction.prototype],p._storeNames,p._dbSchema),b.schema=p._dbSchema}),T.push(function(B){p.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(p.idbdb.version/10)===O._cfg.version?(p.idbdb.deleteObjectStore("$meta"),delete p._dbSchema.$meta,p._storeNames=p._storeNames.filter(function(L){return L!=="$meta"})):B.objectStore("$meta").put(O._cfg.version,"version"))})}),(function O(){return T.length?X.resolve(T.shift()(b.idbtrans)).then(O):X.resolve()})().then(function(){qa(S,x)})):X.resolve();var p,E,b,x,T,S}).catch(d)):(h(u).forEach(function(D){Kr(n,D,u[D].primKey,u[D].indexes)}),er(e,n),void X.follow(function(){return e.on.populate.fire(c)}).catch(d));var y,w})}function si(e,t){qa(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=rr(0,e.idbdb,t);ar(e,e._dbSchema,t);for(var i=0,u=jr(n,e._dbSchema).change;i<u.length;i++){var c=(function(d){if(d.change.length||d.recreate)return console.warn("Unable to patch indexes of table ".concat(d.name," because it has changes on the type of index or primary key.")),{value:void 0};var v=t.objectStore(d.name);d.add.forEach(function(y){ze&&console.debug("Dexie upgrade patch: Creating missing index ".concat(d.name,".").concat(y.src)),nr(v,y)})})(u[i]);if(typeof c=="object")return c.value}}function jr(e,t){var n,i={del:[],add:[],change:[]};for(n in e)t[n]||i.del.push(n);for(n in t){var u=e[n],c=t[n];if(u){var d={name:n,def:c,recreate:!1,del:[],add:[],change:[]};if(""+(u.primKey.keyPath||"")!=""+(c.primKey.keyPath||"")||u.primKey.auto!==c.primKey.auto)d.recreate=!0,i.change.push(d);else{var v=u.idxByName,y=c.idxByName,w=void 0;for(w in v)y[w]||d.del.push(w);for(w in y){var D=v[w],p=y[w];D?D.src!==p.src&&d.change.push(p):d.add.push(p)}(0<d.del.length||0<d.add.length||0<d.change.length)&&i.change.push(d)}}else i.add.push([n,c])}return i}function Kr(e,t,n,i){var u=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return i.forEach(function(c){return nr(u,c)}),u}function qa(e,t){h(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(ze&&console.debug("Dexie: Creating missing table",n),Kr(t,n,e[n].primKey,e[n].indexes))})}function nr(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function rr(e,t,n){var i={};return _(t.objectStoreNames,0).forEach(function(u){for(var c=n.objectStore(u),d=Or(Ka(w=c.keyPath),w||"",!0,!1,!!c.autoIncrement,w&&typeof w!="string",!0),v=[],y=0;y<c.indexNames.length;++y){var D=c.index(c.indexNames[y]),w=D.keyPath,D=Or(D.name,w,!!D.unique,!!D.multiEntry,!1,w&&typeof w!="string",!1);v.push(D)}i[u]=Pr(u,d,v)}),i}function ar(e,t,n){for(var i=n.db.objectStoreNames,u=0;u<i.length;++u){var c=i[u],d=n.objectStore(c);e._hasGetAll="getAll"in d;for(var v=0;v<d.indexNames.length;++v){var y=d.indexNames[v],w=d.index(y).keyPath,D=typeof w=="string"?w:"["+_(w).join("+")+"]";!t[c]||(w=t[c].idxByName[D])&&(w.name=y,delete t[c].idxByName[D],t[c].idxByName[y]=w)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&f.WorkerGlobalScope&&f instanceof f.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Ra(e){return e.split(",").map(function(t,n){var c=t.split(":"),i=(u=c[1])===null||u===void 0?void 0:u.trim(),u=(t=c[0].trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(u)?u.match(/^\[(.*)\]$/)[1].split("+"):u;return Or(u,c||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),g(c),n===0,i)})}var ui=(vn.prototype._createTableSchema=Pr,vn.prototype._parseIndexSyntax=Ra,vn.prototype._parseStoresSpec=function(e,t){var n=this;h(e).forEach(function(i){if(e[i]!==null){var u=n._parseIndexSyntax(e[i]),c=u.shift();if(!c)throw new ae.Schema("Invalid schema for table "+i+": "+e[i]);if(c.unique=!0,c.multi)throw new ae.Schema("Primary key cannot be multiEntry*");u.forEach(function(d){if(d.auto)throw new ae.Schema("Only primary key can be marked as autoIncrement (++)");if(!d.keyPath)throw new ae.Schema("Index must have a name and cannot be an empty string")}),u=n._createTableSchema(i,c,u),t[i]=u}})},vn.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?k(this._cfg.storesSource,n):n;var n=t._versions,i={},u={};return n.forEach(function(c){k(i,c._cfg.storesSource),u=c._cfg.dbschema={},c._parseStoresSpec(i,u)}),t._dbSchema=u,Mr(t,[t._allTables,t,t.Transaction.prototype]),tr(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],h(u),u),t._storeNames=h(u),this},vn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=xt(this._cfg.contentUpgrade||De,e),this},vn);function vn(){}function Fr(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Ht(Gn,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function qr(e){return e&&typeof e.databases=="function"}function Rr(e){return Yt(function(){return $.letThrough=!0,e()})}function Br(e){return!("from"in e)}var mt=function(e,t){if(!this){var n=new mt;return e&&"d"in e&&k(n,e),n}k(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function In(e,t,n){var i=je(t,n);if(!isNaN(i)){if(0<i)throw RangeError();if(Br(e))return k(e,{from:t,to:n,d:1});var u=e.l,i=e.r;if(je(n,e.from)<0)return u?In(u,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Na(e);if(0<je(t,e.to))return i?In(i,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Na(e);je(t,e.from)<0&&(e.from=t,e.l=null,e.d=i?i.d+1:1),0<je(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,u&&!e.l&&On(e,u),i&&n&&On(e,i)}}function On(e,t){Br(t)||(function n(i,y){var c=y.from,d=y.to,v=y.l,y=y.r;In(i,c,d),v&&n(i,v),y&&n(i,y)})(e,t)}function Ba(e,t){var n=or(t),i=n.next();if(i.done)return!1;for(var u=i.value,c=or(e),d=c.next(u.from),v=d.value;!i.done&&!d.done;){if(je(v.from,u.to)<=0&&0<=je(v.to,u.from))return!0;je(u.from,v.from)<0?u=(i=n.next(v.from)).value:v=(d=c.next(u.from)).value}return!1}function or(e){var t=Br(e)?null:{s:0,n:e};return{next:function(n){for(var i=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,i)for(;t.n.l&&je(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!i||je(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Na(e){var t,n,i=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),u=1<i?"r":i<-1?"l":"";u&&(t=u=="r"?"l":"r",n=s({},e),i=e[u],e.from=i.from,e.to=i.to,e[u]=i[u],n[u]=i[t],(e[t]=n).d=Ha(n)),e.d=Ha(e)}function Ha(n){var t=n.r,n=n.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function ir(e,t){return h(t).forEach(function(n){e[n]?On(e[n],t[n]):e[n]=(function i(u){var c,d,v={};for(c in u)K(u,c)&&(d=u[c],v[c]=!d||typeof d!="object"||Te.has(d.constructor)?d:i(d));return v})(t[n])}),e}function Nr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&Ba(t[n],e[n])})}P(mt.prototype,((Pt={add:function(e){return On(this,e),this},addKey:function(e){return In(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return In(t,n,n)}),this},hasKey:function(e){var t=or(this).next(e).value;return t&&je(t.from,e)<=0&&0<=je(t.to,e)}})[We]=function(){return or(this)},Pt));var nn={},Hr={},Lr=!1;function sr(e){ir(Hr,e),Lr||(Lr=!0,setTimeout(function(){Lr=!1,zr(Hr,!(Hr={}))},0))}function zr(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var i=0,u=Object.values(nn);i<u.length;i++)La(d=u[i],e,n,t);else for(var c in e){var d,v=/^idb\:\/\/(.*)\/(.*)\//.exec(c);v&&(c=v[1],v=v[2],(d=nn["idb://".concat(c,"/").concat(v)])&&La(d,e,n,t))}n.forEach(function(y){return y()})}function La(e,t,n,i){for(var u=[],c=0,d=Object.entries(e.queries.query);c<d.length;c++){for(var v=d[c],y=v[0],w=[],D=0,p=v[1];D<p.length;D++){var E=p[D];Nr(t,E.obsSet)?E.subscribers.forEach(function(S){return n.add(S)}):i&&w.push(E)}i&&u.push([y,w])}if(i)for(var b=0,x=u;b<x.length;b++){var T=x[b],y=T[0],w=T[1];e.queries.query[y]=w}}function li(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?tt(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var i=t.openCanceller,u=Math.round(10*e.verno),c=!1;function d(){if(t.openCanceller!==i)throw new ae.DatabaseClosed("db.open() was cancelled")}function v(){return new X(function(E,b){if(d(),!n)throw new ae.MissingAPI;var x=e.name,T=t.autoSchema||!u?n.open(x):n.open(x,u);if(!T)throw new ae.MissingAPI;T.onerror=Kt(b),T.onblocked=Ge(e._fireOnBlocked),T.onupgradeneeded=Ge(function(S){var O;D=T.transaction,t.autoSchema&&!e._options.allowEmptyDB?(T.onerror=Sn,D.abort(),T.result.close(),(O=n.deleteDatabase(x)).onsuccess=O.onerror=Ge(function(){b(new ae.NoSuchDatabase("Database ".concat(x," doesnt exist")))})):(D.onerror=Kt(b),S=S.oldVersion>Math.pow(2,62)?0:S.oldVersion,p=S<1,e.idbdb=T.result,c&&si(e,D),ii(e,S/10,D,b))},b),T.onsuccess=Ge(function(){D=null;var S,O,B,L,U,G=e.idbdb=T.result,ee=_(G.objectStoreNames);if(0<ee.length)try{var J=G.transaction((L=ee).length===1?L[0]:L,"readonly");if(t.autoSchema)O=G,B=J,(S=e).verno=O.version/10,B=S._dbSchema=rr(0,O,B),S._storeNames=_(O.objectStoreNames,0),tr(S,[S._allTables],h(B),B);else if(ar(e,e._dbSchema,J),((U=jr(rr(0,(U=e).idbdb,J),U._dbSchema)).add.length||U.change.some(function(Z){return Z.add.length||Z.change.length}))&&!c)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),G.close(),u=G.version+1,c=!0,E(v());er(e,J)}catch{}fn.push(e),G.onversionchange=Ge(function(Z){t.vcFired=!0,e.on("versionchange").fire(Z)}),G.onclose=Ge(function(Z){e.on("close").fire(Z)}),p&&(U=e._deps,J=x,G=U.indexedDB,U=U.IDBKeyRange,qr(G)||J===Gn||Fr(G,U).put({name:J}).catch(De)),E()},b)}).catch(function(E){switch(E==null?void 0:E.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),v();break;case"VersionError":if(0<u)return u=0,v()}return X.reject(E)})}var y,w=t.dbReadyResolve,D=null,p=!1;return X.race([i,(typeof navigator>"u"?X.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(E){function b(){return indexedDB.databases().finally(E)}y=setInterval(b,100),b()}).finally(function(){return clearInterval(y)}):Promise.resolve()).then(v)]).then(function(){return d(),t.onReadyBeingFired=[],X.resolve(Rr(function(){return e.on.ready.fire(e.vip)})).then(function E(){if(0<t.onReadyBeingFired.length){var b=t.onReadyBeingFired.reduce(xt,De);return t.onReadyBeingFired=[],X.resolve(Rr(function(){return b(e.vip)})).then(E)}})}).finally(function(){t.openCanceller===i&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(E){t.dbOpenError=E;try{D&&D.abort()}catch{}return i===t.openCanceller&&e._close(),tt(E)}).finally(function(){t.openComplete=!0,w()}).then(function(){var E;return p&&(E={},e.tables.forEach(function(b){b.schema.indexes.forEach(function(x){x.name&&(E["idb://".concat(e.name,"/").concat(b.name,"/").concat(x.name)]=new mt(-1/0,[[[]]]))}),E["idb://".concat(e.name,"/").concat(b.name,"/")]=E["idb://".concat(e.name,"/").concat(b.name,"/:dels")]=new mt(-1/0,[[[]]])}),Qt(Tn).fire(E),zr(E,!0)),e})}function Ur(e){function t(c){return e.next(c)}var n=u(t),i=u(function(c){return e.throw(c)});function u(c){return function(y){var v=c(y),y=v.value;return v.done?y:y&&typeof y.then=="function"?y.then(n,i):g(y)?Promise.all(y).then(n,i):n(y)}}return u(t)()}function ur(e,t,n){for(var i=g(e)?e.slice():[e],u=0;u<n;++u)i.push(t);return i}var ci={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return s(s({},e),{table:function(t){var n=e.table(t),i=n.schema,u={},c=[];function d(p,E,b){var x=Cn(p),T=u[x]=u[x]||[],S=p==null?0:typeof p=="string"?1:p.length,O=0<E,O=s(s({},b),{name:O?"".concat(x,"(virtual-from:").concat(b.name,")"):b.name,lowLevelIndex:b,isVirtual:O,keyTail:E,keyLength:S,extractKey:Ar(p),unique:!O&&b.unique});return T.push(O),O.isPrimaryKey||c.push(O),1<S&&d(S===2?p[0]:p.slice(0,S-1),E+1,b),T.sort(function(B,L){return B.keyTail-L.keyTail}),O}t=d(i.primaryKey.keyPath,0,i.primaryKey),u[":id"]=[t];for(var v=0,y=i.indexes;v<y.length;v++){var w=y[v];d(w.keyPath,0,w)}function D(p){var E,b=p.query.index;return b.isVirtual?s(s({},p),{query:{index:b.lowLevelIndex,range:(E=p.query.range,b=b.keyTail,{type:E.type===1?2:E.type,lower:ur(E.lower,E.lowerOpen?e.MAX_KEY:e.MIN_KEY,b),lowerOpen:!0,upper:ur(E.upper,E.upperOpen?e.MIN_KEY:e.MAX_KEY,b),upperOpen:!0})}}):p}return s(s({},n),{schema:s(s({},i),{primaryKey:t,indexes:c,getIndexByKeyPath:function(p){return(p=u[Cn(p)])&&p[0]}}),count:function(p){return n.count(D(p))},query:function(p){return n.query(D(p))},openCursor:function(p){var E=p.query.index,b=E.keyTail,x=E.isVirtual,T=E.keyLength;return x?n.openCursor(D(p)).then(function(O){return O&&S(O)}):n.openCursor(p);function S(O){return Object.create(O,{continue:{value:function(B){B!=null?O.continue(ur(B,p.reverse?e.MAX_KEY:e.MIN_KEY,b)):p.unique?O.continue(O.key.slice(0,T).concat(p.reverse?e.MIN_KEY:e.MAX_KEY,b)):O.continue()}},continuePrimaryKey:{value:function(B,L){O.continuePrimaryKey(ur(B,e.MAX_KEY,b),L)}},primaryKey:{get:function(){return O.primaryKey}},key:{get:function(){var B=O.key;return T===1?B[0]:B.slice(0,T)}},value:{get:function(){return O.value}}})}}})}})}};function Yr(e,t,n,i){return n=n||{},i=i||"",h(e).forEach(function(u){var c,d,v;K(t,u)?(c=e[u],d=t[u],typeof c=="object"&&typeof d=="object"&&c&&d?(v=Ce(c))!==Ce(d)?n[i+u]=t[u]:v==="Object"?Yr(c,d,n,i+u+"."):c!==d&&(n[i+u]=t[u]):c!==d&&(n[i+u]=t[u])):n[i+u]=void 0}),h(t).forEach(function(u){K(e,u)||(n[i+u]=t[u])}),n}function Wr(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var fi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return s(s({},e),{table:function(t){var n=e.table(t),i=n.schema.primaryKey;return s(s({},n),{mutate:function(u){var c=$.trans,d=c.table(t).hook,v=d.deleting,y=d.creating,w=d.updating;switch(u.type){case"add":if(y.fire===De)break;return c._promise("readwrite",function(){return D(u)},!0);case"put":if(y.fire===De&&w.fire===De)break;return c._promise("readwrite",function(){return D(u)},!0);case"delete":if(v.fire===De)break;return c._promise("readwrite",function(){return D(u)},!0);case"deleteRange":if(v.fire===De)break;return c._promise("readwrite",function(){return(function p(E,b,x){return n.query({trans:E,values:!1,query:{index:i,range:b},limit:x}).then(function(T){var S=T.result;return D({type:"delete",keys:S,trans:E}).then(function(O){return 0<O.numFailures?Promise.reject(O.failures[0]):S.length<x?{failures:[],numFailures:0,lastResult:void 0}:p(E,s(s({},b),{lower:S[S.length-1],lowerOpen:!0}),x)})})})(u.trans,u.range,1e4)},!0)}return n.mutate(u);function D(p){var E,b,x,T=$.trans,S=p.keys||Wr(i,p);if(!S)throw new Error("Keys missing");return(p=p.type==="add"||p.type==="put"?s(s({},p),{keys:S}):s({},p)).type!=="delete"&&(p.values=l([],p.values)),p.keys&&(p.keys=l([],p.keys)),E=n,x=S,((b=p).type==="add"?Promise.resolve([]):E.getMany({trans:b.trans,keys:x,cache:"immutable"})).then(function(O){var B=S.map(function(L,U){var G,ee,J,Z=O[U],oe={onerror:null,onsuccess:null};return p.type==="delete"?v.fire.call(oe,L,Z,T):p.type==="add"||Z===void 0?(G=y.fire.call(oe,L,p.values[U],T),L==null&&G!=null&&(p.keys[U]=L=G,i.outbound||F(p.values[U],i.keyPath,L))):(G=Yr(Z,p.values[U]),(ee=w.fire.call(oe,G,L,Z,T))&&(J=p.values[U],Object.keys(ee).forEach(function(re){K(J,re)?J[re]=ee[re]:F(J,re,ee[re])}))),oe});return n.mutate(p).then(function(L){for(var U=L.failures,G=L.results,ee=L.numFailures,L=L.lastResult,J=0;J<S.length;++J){var Z=(G||S)[J],oe=B[J];Z==null?oe.onerror&&oe.onerror(U[J]):oe.onsuccess&&oe.onsuccess(p.type==="put"&&O[J]?p.values[J]:Z)}return{failures:U,results:G,numFailures:ee,lastResult:L}}).catch(function(L){return B.forEach(function(U){return U.onerror&&U.onerror(L)}),Promise.reject(L)})})}}})}})}};function za(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var i=[],u=0,c=0;u<t.keys.length&&c<e.length;++u)je(t.keys[u],e[c])===0&&(i.push(n?me(t.values[u]):t.values[u]),++c);return i.length===e.length?i:null}catch{return null}}var di={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return s(s({},n),{getMany:function(i){if(!i.cache)return n.getMany(i);var u=za(i.keys,i.trans._cache,i.cache==="clone");return u?X.resolve(u):n.getMany(i).then(function(c){return i.trans._cache={keys:i.keys,values:i.cache==="clone"?me(c):c},c})},mutate:function(i){return i.type!=="add"&&(i.trans._cache=null),n.mutate(i)}})}}}};function Ua(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Ya(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var hi={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new mt(e.MIN_KEY,e.MAX_KEY);return s(s({},e),{transaction:function(i,u,c){if($.subscr&&u!=="readonly")throw new ae.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat($.querier));return e.transaction(i,u,c)},table:function(i){var u=e.table(i),c=u.schema,d=c.primaryKey,p=c.indexes,v=d.extractKey,y=d.outbound,w=d.autoIncrement&&p.filter(function(b){return b.compound&&b.keyPath.includes(d.keyPath)}),D=s(s({},u),{mutate:function(b){function x(re){return re="idb://".concat(t,"/").concat(i,"/").concat(re),L[re]||(L[re]=new mt)}var T,S,O,B=b.trans,L=b.mutatedParts||(b.mutatedParts={}),U=x(""),G=x(":dels"),ee=b.type,oe=b.type==="deleteRange"?[b.range]:b.type==="delete"?[b.keys]:b.values.length<50?[Wr(d,b).filter(function(re){return re}),b.values]:[],J=oe[0],Z=oe[1],oe=b.trans._cache;return g(J)?(U.addKeys(J),(oe=ee==="delete"||J.length===Z.length?za(J,oe):null)||G.addKeys(J),(oe||Z)&&(T=x,S=oe,O=Z,c.indexes.forEach(function(re){var ue=T(re.name||"");function Se(we){return we!=null?re.extractKey(we):null}function qe(we){return re.multiEntry&&g(we)?we.forEach(function(Je){return ue.addKey(Je)}):ue.addKey(we)}(S||O).forEach(function(we,yt){var _e=S&&Se(S[yt]),yt=O&&Se(O[yt]);je(_e,yt)!==0&&(_e!=null&&qe(_e),yt!=null&&qe(yt))})}))):J?(Z={from:(Z=J.lower)!==null&&Z!==void 0?Z:e.MIN_KEY,to:(Z=J.upper)!==null&&Z!==void 0?Z:e.MAX_KEY},G.add(Z),U.add(Z)):(U.add(n),G.add(n),c.indexes.forEach(function(re){return x(re.name).add(n)})),u.mutate(b).then(function(re){return!J||b.type!=="add"&&b.type!=="put"||(U.addKeys(re.results),w&&w.forEach(function(ue){for(var Se=b.values.map(function(_e){return ue.extractKey(_e)}),qe=ue.keyPath.findIndex(function(_e){return _e===d.keyPath}),we=0,Je=re.results.length;we<Je;++we)Se[we][qe]=re.results[we];x(ue.name).addKeys(Se)})),B.mutatedParts=ir(B.mutatedParts||{},L),re})}}),p=function(x){var T=x.query,x=T.index,T=T.range;return[x,new mt((x=T.lower)!==null&&x!==void 0?x:e.MIN_KEY,(T=T.upper)!==null&&T!==void 0?T:e.MAX_KEY)]},E={get:function(b){return[d,new mt(b.key)]},getMany:function(b){return[d,new mt().addKeys(b.keys)]},count:p,query:p,openCursor:p};return h(E).forEach(function(b){D[b]=function(x){var T=$.subscr,S=!!T,O=Ua($,u)&&Ya(b,x)?x.obsSet={}:T;if(S){var B=function(Z){return Z="idb://".concat(t,"/").concat(i,"/").concat(Z),O[Z]||(O[Z]=new mt)},L=B(""),U=B(":dels"),T=E[b](x),S=T[0],T=T[1];if((b==="query"&&S.isPrimaryKey&&!x.values?U:B(S.name||"")).add(T),!S.isPrimaryKey){if(b!=="count"){var G=b==="query"&&y&&x.values&&u.query(s(s({},x),{values:!1}));return u[b].apply(this,arguments).then(function(Z){if(b==="query"){if(y&&x.values)return G.then(function(Se){return Se=Se.result,L.addKeys(Se),Z});var oe=x.values?Z.result.map(v):Z.result;(x.values?L:U).addKeys(oe)}else if(b==="openCursor"){var re=Z,ue=x.values;return re&&Object.create(re,{key:{get:function(){return U.addKey(re.primaryKey),re.key}},primaryKey:{get:function(){var Se=re.primaryKey;return U.addKey(Se),Se}},value:{get:function(){return ue&&L.addKey(re.primaryKey),re.value}}})}return Z})}U.add(n)}}return u[b].apply(this,arguments)}}),D}})}};function Wa(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var i=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return n.numFailures===i?null:(t=s({},t),g(t.keys)&&(t.keys=t.keys.filter(function(u,c){return!(c in n.failures)})),"values"in t&&g(t.values)&&(t.values=t.values.filter(function(u,c){return!(c in n.failures)})),t)}function Vr(e,t){return n=e,((i=t).lower===void 0||(i.lowerOpen?0<je(n,i.lower):0<=je(n,i.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?je(e,t.upper)<0:je(e,t.upper)<=0));var n,i}function Va(e,t,E,i,u,c){if(!E||E.length===0)return e;var d=t.query.index,v=d.multiEntry,y=t.query.range,w=i.schema.primaryKey.extractKey,D=d.extractKey,p=(d.lowLevelIndex||d).extractKey,E=E.reduce(function(b,x){var T=b,S=[];if(x.type==="add"||x.type==="put")for(var O=new mt,B=x.values.length-1;0<=B;--B){var L,U=x.values[B],G=w(U);O.hasKey(G)||(L=D(U),(v&&g(L)?L.some(function(re){return Vr(re,y)}):Vr(L,y))&&(O.addKey(G),S.push(U)))}switch(x.type){case"add":var ee=new mt().addKeys(t.values?b.map(function(ue){return w(ue)}):b),T=b.concat(t.values?S.filter(function(ue){return ue=w(ue),!ee.hasKey(ue)&&(ee.addKey(ue),!0)}):S.map(function(ue){return w(ue)}).filter(function(ue){return!ee.hasKey(ue)&&(ee.addKey(ue),!0)}));break;case"put":var J=new mt().addKeys(x.values.map(function(ue){return w(ue)}));T=b.filter(function(ue){return!J.hasKey(t.values?w(ue):ue)}).concat(t.values?S:S.map(function(ue){return w(ue)}));break;case"delete":var Z=new mt().addKeys(x.keys);T=b.filter(function(ue){return!Z.hasKey(t.values?w(ue):ue)});break;case"deleteRange":var oe=x.range;T=b.filter(function(ue){return!Vr(w(ue),oe)})}return T},e);return E===e?e:(E.sort(function(b,x){return je(p(b),p(x))||je(w(b),w(x))}),t.limit&&t.limit<1/0&&(E.length>t.limit?E.length=t.limit:e.length===t.limit&&E.length<t.limit&&(u.dirty=!0)),c?Object.freeze(E):E)}function Ga(e,t){return je(e.lower,t.lower)===0&&je(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function vi(e,t){return(function(n,i,u,c){if(n===void 0)return i!==void 0?-1:0;if(i===void 0)return 1;if((i=je(n,i))===0){if(u&&c)return 0;if(u)return 1;if(c)return-1}return i})(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=(function(n,i,u,c){if(n===void 0)return i!==void 0?1:0;if(i===void 0)return-1;if((i=je(n,i))===0){if(u&&c)return 0;if(u)return-1;if(c)return 1}return i})(e.upper,t.upper,e.upperOpen,t.upperOpen)}function pi(e,t,n,i){e.subscribers.add(n),i.addEventListener("abort",function(){var u,c;e.subscribers.delete(n),e.subscribers.size===0&&(u=e,c=t,setTimeout(function(){u.subscribers.size===0&&ot(c,u)},3e3))})}var gi={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return s(s({},e),{transaction:function(n,i,u){var c,d,v=e.transaction(n,i,u);return i==="readwrite"&&(d=(c=new AbortController).signal,u=function(y){return function(){if(c.abort(),i==="readwrite"){for(var w=new Set,D=0,p=n;D<p.length;D++){var E=p[D],b=nn["idb://".concat(t,"/").concat(E)];if(b){var x=e.table(E),T=b.optimisticOps.filter(function(ue){return ue.trans===v});if(v._explicit&&y&&v.mutatedParts)for(var S=0,O=Object.values(b.queries.query);S<O.length;S++)for(var B=0,L=(ee=O[S]).slice();B<L.length;B++)Nr((J=L[B]).obsSet,v.mutatedParts)&&(ot(ee,J),J.subscribers.forEach(function(ue){return w.add(ue)}));else if(0<T.length){b.optimisticOps=b.optimisticOps.filter(function(ue){return ue.trans!==v});for(var U=0,G=Object.values(b.queries.query);U<G.length;U++)for(var ee,J,Z,oe=0,re=(ee=G[U]).slice();oe<re.length;oe++)(J=re[oe]).res!=null&&v.mutatedParts&&(y&&!J.dirty?(Z=Object.isFrozen(J.res),Z=Va(J.res,J.req,T,x,J,Z),J.dirty?(ot(ee,J),J.subscribers.forEach(function(ue){return w.add(ue)})):Z!==J.res&&(J.res=Z,J.promise=X.resolve({result:Z}))):(J.dirty&&ot(ee,J),J.subscribers.forEach(function(ue){return w.add(ue)})))}}}w.forEach(function(ue){return ue()})}}},v.addEventListener("abort",u(!1),{signal:d}),v.addEventListener("error",u(!1),{signal:d}),v.addEventListener("complete",u(!0),{signal:d})),v},table:function(n){var i=e.table(n),u=i.schema.primaryKey;return s(s({},i),{mutate:function(c){var d=$.trans;if(u.outbound||d.db._options.cache==="disabled"||d.explicit||d.idbtrans.mode!=="readwrite")return i.mutate(c);var v=nn["idb://".concat(t,"/").concat(n)];return v?(d=i.mutate(c),c.type!=="add"&&c.type!=="put"||!(50<=c.values.length||Wr(u,c).some(function(y){return y==null}))?(v.optimisticOps.push(c),c.mutatedParts&&sr(c.mutatedParts),d.then(function(y){0<y.numFailures&&(ot(v.optimisticOps,c),(y=Wa(0,c,y))&&v.optimisticOps.push(y),c.mutatedParts&&sr(c.mutatedParts))}),d.catch(function(){ot(v.optimisticOps,c),c.mutatedParts&&sr(c.mutatedParts)})):d.then(function(y){var w=Wa(0,s(s({},c),{values:c.values.map(function(D,p){var E;return y.failures[p]?D:(D=(E=u.keyPath)!==null&&E!==void 0&&E.includes(".")?me(D):s({},D),F(D,u.keyPath,y.results[p]),D)})}),y);v.optimisticOps.push(w),queueMicrotask(function(){return c.mutatedParts&&sr(c.mutatedParts)})}),d):i.mutate(c)},query:function(c){if(!Ua($,i)||!Ya("query",c))return i.query(c);var d=((w=$.trans)===null||w===void 0?void 0:w.db._options.cache)==="immutable",p=$,v=p.requery,y=p.signal,w=(function(x,T,S,O){var B=nn["idb://".concat(x,"/").concat(T)];if(!B)return[];if(!(T=B.queries[S]))return[null,!1,B,null];var L=T[(O.query?O.query.index.name:null)||""];if(!L)return[null,!1,B,null];switch(S){case"query":var U=L.find(function(G){return G.req.limit===O.limit&&G.req.values===O.values&&Ga(G.req.query.range,O.query.range)});return U?[U,!0,B,L]:[L.find(function(G){return("limit"in G.req?G.req.limit:1/0)>=O.limit&&(!O.values||G.req.values)&&vi(G.req.query.range,O.query.range)}),!1,B,L];case"count":return U=L.find(function(G){return Ga(G.req.query.range,O.query.range)}),[U,!!U,B,L]}})(t,n,"query",c),D=w[0],p=w[1],E=w[2],b=w[3];return D&&p?D.obsSet=c.obsSet:(p=i.query(c).then(function(x){var T=x.result;if(D&&(D.res=T),d){for(var S=0,O=T.length;S<O;++S)Object.freeze(T[S]);Object.freeze(T)}else x.result=me(T);return x}).catch(function(x){return b&&D&&ot(b,D),Promise.reject(x)}),D={obsSet:c.obsSet,promise:p,subscribers:new Set,type:"query",req:c,dirty:!1},b?b.push(D):(b=[D],(E=E||(nn["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[c.query.index.name||""]=b)),pi(D,b,v,y),D.promise.then(function(x){return{result:Va(x.result,c,E==null?void 0:E.optimisticOps,i,D,d)}})}})}})}};function lr(e,t){return new Proxy(e,{get:function(n,i,u){return i==="db"?t:Reflect.get(n,i,u)}})}var Ht=(nt.prototype.version=function(e){if(isNaN(e)||e<.1)throw new ae.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ae.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(i){return i._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(oi),n.stores({}),this._state.autoSchema=!1,n)},nt.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||$.letThrough||this._vip)?e():new X(function(n,i){if(t._state.openComplete)return i(new ae.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void i(new ae.DatabaseClosed);t.open().catch(De)}t._state.dbReadyPromise.then(n,i)}).then(e)},nt.prototype.use=function(e){var t=e.stack,n=e.create,i=e.level,u=e.name;return u&&this.unuse({stack:t,name:u}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:n,level:i??10,name:u}),e.sort(function(c,d){return c.level-d.level}),this},nt.prototype.unuse=function(e){var t=e.stack,n=e.name,i=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(u){return i?u.create!==i:!!n&&u.name!==n})),this},nt.prototype.open=function(){var e=this;return $t(Ee,function(){return li(e)})},nt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,t=fn.indexOf(this);if(0<=t&&fn.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new X(function(n){e.dbReadyResolve=n}),e.openCanceller=new X(function(n,i){e.cancelOpen=i}))},nt.prototype.close=function(n){var t=(n===void 0?{disableAutoOpen:!0}:n).disableAutoOpen,n=this._state;t?(n.isBeingOpened&&n.cancelOpen(new ae.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new ae.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},nt.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var n=0<arguments.length&&typeof arguments[0]!="object",i=this._state;return new X(function(u,c){function d(){t.close(e);var v=t._deps.indexedDB.deleteDatabase(t.name);v.onsuccess=Ge(function(){var y,w,D;y=t._deps,w=t.name,D=y.indexedDB,y=y.IDBKeyRange,qr(D)||w===Gn||Fr(D,y).delete(w).catch(De),u()}),v.onerror=Kt(c),v.onblocked=t._fireOnBlocked}if(n)throw new ae.InvalidArgument("Invalid closeOptions argument to db.delete()");i.isBeingOpened?i.dbReadyPromise.then(d):d()})},nt.prototype.backendDB=function(){return this.idbdb},nt.prototype.isOpen=function(){return this.idbdb!==null},nt.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},nt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},nt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(nt.prototype,"tables",{get:function(){var e=this;return h(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),nt.prototype.transaction=function(){var e=(function(t,n,i){var u=arguments.length;if(u<2)throw new ae.InvalidArgument("Too few arguments");for(var c=new Array(u-1);--u;)c[u-1]=arguments[u];return i=c.pop(),[t,le(c),i]}).apply(this,arguments);return this._transaction.apply(this,e)},nt.prototype._transaction=function(e,t,n){var i=this,u=$.trans;u&&u.db===this&&e.indexOf("!")===-1||(u=null);var c,d,v=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(d=t.map(function(w){if(w=w instanceof i.Table?w.name:w,typeof w!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return w}),e=="r"||e===Sr)c=Sr;else{if(e!="rw"&&e!=Tr)throw new ae.InvalidArgument("Invalid transaction mode: "+e);c=Tr}if(u){if(u.mode===Sr&&c===Tr){if(!v)throw new ae.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");u=null}u&&d.forEach(function(w){if(u&&u.storeNames.indexOf(w)===-1){if(!v)throw new ae.SubTransaction("Table "+w+" not included in parent transaction.");u=null}}),v&&u&&!u.active&&(u=null)}}catch(w){return u?u._promise(null,function(D,p){p(w)}):tt(w)}var y=(function w(D,p,E,b,x){return X.resolve().then(function(){var T=$.transless||$,S=D._createTransaction(p,E,D._dbSchema,b);if(S.explicit=!0,T={trans:S,transless:T},b)S.idbtrans=b.idbtrans;else try{S.create(),S.idbtrans._explicit=!0,D._state.PR1398_maxLoop=3}catch(L){return L.name===Fe.InvalidState&&D.isOpen()&&0<--D._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),D.close({disableAutoOpen:!1}),D.open().then(function(){return w(D,p,E,null,x)})):tt(L)}var O,B=te(x);return B&&cn(),T=X.follow(function(){var L;(O=x.call(S,S))&&(B?(L=Wt.bind(null,null),O.then(L,L)):typeof O.next=="function"&&typeof O.throw=="function"&&(O=Ur(O)))},T),(O&&typeof O.then=="function"?X.resolve(O).then(function(L){return S.active?L:tt(new ae.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):T.then(function(){return O})).then(function(L){return b&&S._resolve(),S._completion.then(function(){return L})}).catch(function(L){return S._reject(L),tt(L)})})}).bind(null,this,c,d,u,n);return u?u._promise(c,y,"lock"):$.trans?$t($.transless,function(){return i._whenReady(y)}):this._whenReady(y)},nt.prototype.table=function(e){if(!K(this._allTables,e))throw new ae.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},nt);function nt(e,t){var n=this;this._middlewares={},this.verno=0;var i=nt.dependencies;this._options=t=s({addons:nt.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},i=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var u,c,d,v,y,w={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:De,dbReadyPromise:null,cancelOpen:De,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};w.dbReadyPromise=new X(function(p){w.dbReadyResolve=p}),w.openCanceller=new X(function(p,E){w.cancelOpen=E}),this._state=w,this.name=e,this.on=kn(this,"populate","blocked","versionchange","close",{ready:[xt,De]}),this.once=function(p,E){var b=function(){for(var x=[],T=0;T<arguments.length;T++)x[T]=arguments[T];n.on(p).unsubscribe(b),E.apply(n,x)};return n.on(p,b)},this.on.ready.subscribe=I(this.on.ready.subscribe,function(p){return function(E,b){nt.vip(function(){var x,T=n._state;T.openComplete?(T.dbOpenError||X.resolve().then(E),b&&p(E)):T.onReadyBeingFired?(T.onReadyBeingFired.push(E),b&&p(E)):(p(E),x=n,b||p(function S(){x.on.ready.unsubscribe(E),x.on.ready.unsubscribe(S)}))})}}),this.Collection=(u=this,xn(Zo.prototype,function(O,S){this.db=u;var b=Da,x=null;if(S)try{b=S()}catch(B){x=B}var T=O._ctx,S=T.table,O=S.hook.reading.fire;this._ctx={table:S,index:T.index,isPrimKey:!T.index||S.schema.primKey.keyPath&&T.index===S.schema.primKey.name,range:b,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:x,or:T.or,valueMapper:O!==vt?O:null}})),this.Table=(c=this,xn(Ca.prototype,function(p,E,b){this.db=c,this._tx=b,this.name=p,this.schema=E,this.hook=c._allTables[p]?c._allTables[p].hook:kn(null,{creating:[It,De],reading:[pt,vt],updating:[gt,De],deleting:[wt,De]})})),this.Transaction=(d=this,xn(ti.prototype,function(p,E,b,x,T){var S=this;p!=="readonly"&&E.forEach(function(O){O=(O=b[O])===null||O===void 0?void 0:O.yProps,O&&(E=E.concat(O.map(function(B){return B.updatesTable})))}),this.db=d,this.mode=p,this.storeNames=E,this.schema=b,this.chromeTransactionDurability=x,this.idbtrans=null,this.on=kn(this,"complete","error","abort"),this.parent=T||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new X(function(O,B){S._resolve=O,S._reject=B}),this._completion.then(function(){S.active=!1,S.on.complete.fire()},function(O){var B=S.active;return S.active=!1,S.on.error.fire(O),S.parent?S.parent._reject(O):B&&S.idbtrans&&S.idbtrans.abort(),tt(O)})})),this.Version=(v=this,xn(ui.prototype,function(p){this.db=v,this._cfg={version:p,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(y=this,xn(ja.prototype,function(p,E,b){if(this.db=y,this._ctx={table:p,index:E===":id"?null:E,or:b},this._cmp=this._ascending=je,this._descending=function(x,T){return je(T,x)},this._max=function(x,T){return 0<je(x,T)?x:T},this._min=function(x,T){return je(x,T)<0?x:T},this._IDBKeyRange=y._deps.IDBKeyRange,!this._IDBKeyRange)throw new ae.MissingAPI})),this.on("versionchange",function(p){0<p.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(p){!p.newVersion||p.newVersion<p.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(p.oldVersion/10))}),this._maxKey=En(t.IDBKeyRange),this._createTransaction=function(p,E,b,x){return new n.Transaction(p,E,b,n._options.chromeTransactionDurability,x)},this._fireOnBlocked=function(p){n.on("blocked").fire(p),fn.filter(function(E){return E.name===n.name&&E!==n&&!E._state.vcFired}).map(function(E){return E.on("versionchange").fire(p)})},this.use(di),this.use(gi),this.use(hi),this.use(ci),this.use(fi);var D=new Proxy(this,{get:function(p,E,b){if(E==="_vip")return!0;if(E==="table")return function(T){return lr(n.table(T),D)};var x=Reflect.get(p,E,b);return x instanceof Ca?lr(x,D):E==="tables"?x.map(function(T){return lr(T,D)}):E==="_createTransaction"?function(){return lr(x.apply(this,arguments),D)}:x}});this.vip=D,i.forEach(function(p){return p(n)})}var cr,Pt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",mi=(Gr.prototype.subscribe=function(e,t,n){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:n})},Gr.prototype[Pt]=function(){return this},Gr);function Gr(e){this._subscribe=e}try{cr={indexedDB:f.indexedDB||f.mozIndexedDB||f.webkitIndexedDB||f.msIndexedDB,IDBKeyRange:f.IDBKeyRange||f.webkitIDBKeyRange}}catch{cr={indexedDB:null,IDBKeyRange:null}}function Qa(e){var t,n=!1,i=new mi(function(u){var c=te(e),d,v=!1,y={},w={},D={get closed(){return v},unsubscribe:function(){v||(v=!0,d&&d.abort(),p&&Qt.storagemutated.unsubscribe(b))}};u.start&&u.start(D);var p=!1,E=function(){return Dr(x)},b=function(T){ir(y,T),Nr(w,y)&&E()},x=function(){var T,S,O;!v&&cr.indexedDB&&(y={},T={},d&&d.abort(),d=new AbortController,O=(function(B){var L=Ut();try{c&&cn();var U=Yt(e,B);return U=c?U.finally(Wt):U}finally{L&&ln()}})(S={subscr:T,signal:d.signal,requery:E,querier:e,trans:null}),Promise.resolve(O).then(function(B){n=!0,t=B,v||S.signal.aborted||(y={},(function(L){for(var U in L)if(K(L,U))return;return 1})(w=T)||p||(Qt(Tn,b),p=!0),Dr(function(){return!v&&u.next&&u.next(B)}))},function(B){n=!1,["DatabaseClosedError","AbortError"].includes(B==null?void 0:B.name)||v||Dr(function(){v||u.error&&u.error(B)})}))};return setTimeout(E,0),D});return i.hasValue=function(){return n},i.getValue=function(){return t},i}var rn=Ht;function Qr(e){var t=Jt;try{Jt=!0,Qt.storagemutated.fire(e),zr(e,!0)}finally{Jt=t}}P(rn,s(s({},ut),{delete:function(e){return new rn(e,{addons:[]}).delete()},exists:function(e){return new rn(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=rn.dependencies,n=t.indexedDB,t=t.IDBKeyRange,(qr(n)?Promise.resolve(n.databases()).then(function(i){return i.map(function(u){return u.name}).filter(function(u){return u!==Gn})}):Fr(n,t).toCollection().primaryKeys()).then(e)}catch{return tt(new ae.MissingAPI)}var t,n},defineClass:function(){return function(e){k(this,e)}},ignoreTransaction:function(e){return $.trans?$t($.transless,e):e()},vip:Rr,async:function(e){return function(){try{var t=Ur(e.apply(this,arguments));return t&&typeof t.then=="function"?t:X.resolve(t)}catch(n){return tt(n)}}},spawn:function(e,t,n){try{var i=Ur(e.apply(n,t||[]));return i&&typeof i.then=="function"?i:X.resolve(i)}catch(u){return tt(u)}},currentTransaction:{get:function(){return $.trans||null}},waitFor:function(e,t){return t=X.resolve(typeof e=="function"?rn.ignoreTransaction(e):e).timeout(t||6e4),$.trans?$.trans.waitFor(t):t},Promise:X,debug:{get:function(){return ze},set:function(e){Rt(e)}},derive:R,extend:k,props:P,override:I,Events:kn,on:Qt,liveQuery:Qa,extendObservabilitySet:ir,getByKeyPath:q,setByKeyPath:F,delByKeyPath:function(e,t){typeof t=="string"?F(e,t,void 0):"length"in t&&[].map.call(t,function(n){F(e,n,void 0)})},shallowClone:se,deepClone:me,getObjectDiff:Yr,cmp:je,asap:W,minKey:-1/0,addons:[],connections:fn,errnames:Fe,dependencies:cr,cache:nn,semVer:"4.2.0",version:"4.2.0".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),rn.maxKey=En(rn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Qt(Tn,function(e){Jt||(e=new CustomEvent(Ir,{detail:e}),Jt=!0,dispatchEvent(e),Jt=!1)}),addEventListener(Ir,function(e){e=e.detail,Jt||Qr(e)}));var pn,Jt=!1,Ja=function(){};return typeof BroadcastChannel<"u"&&((Ja=function(){(pn=new BroadcastChannel(Ir)).onmessage=function(e){return e.data&&Qr(e.data)}})(),typeof pn.unref=="function"&&pn.unref(),Qt(Tn,function(e){Jt||pn.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Ht.disableBfCache&&e.persisted){ze&&console.debug("Dexie: handling persisted pagehide"),pn!=null&&pn.close();for(var t=0,n=fn;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Ht.disableBfCache&&e.persisted&&(ze&&console.debug("Dexie: handling persisted pageshow"),Ja(),Qr({all:new mt(-1/0,[[]])}))})),X.rejectionMapper=function(e,t){return!e||e instanceof de||e instanceof TypeError||e instanceof SyntaxError||!e.name||!st[e.name]?e:(t=new st[e.name](t||e.message,e),"stack"in e&&H(t,"stack",{get:function(){return this.inner.stack}}),t)},Rt(ze),s(Ht,Object.freeze({__proto__:null,Dexie:Ht,liveQuery:Qa,Entity:Sa,cmp:je,PropModification:Dn,replacePrefix:function(e,t){return new Dn({replacePrefix:[e,t]})},add:function(e){return new Dn({add:e})},remove:function(e){return new Dn({remove:e})},default:Ht,RangeSet:mt,mergeRanges:On,rangesOverlap:Ba}),{default:Ht}),Ht})})(vr)),vr.exports}var gs=ps();const la=Fo(gs),so=Symbol.for("Dexie"),mr=globalThis[so]||(globalThis[so]=la);if(la.semVer!==mr.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${la.semVer} and ${mr.semVer}`);const{liveQuery:Cc,mergeRanges:Ic,rangesOverlap:Oc,RangeSet:Pc,cmp:Ac,Entity:Mc,PropModification:jc,replacePrefix:Kc,add:Fc,remove:qc,DexieYProvider:Rc}=mr;class ms{constructor(){this._db=new mr("FastingHours"),this._db.version(20).stores({history:"id, started",hunger:"id, created",water:"id, created"})}browseHistory(){return this._db.history.toArray()}browseHistoryByEnd(){return this._db.history.toArray().then(r=>r.filter(s=>s.ended===null)[0])}readHistory(r){return this._db.history.get({id:r})}editHistory(r){const a=$r(r);return a.updated=new Date,this._db.history.put(a).then(()=>this._db.history.get({id:r.id}))}addHistory(){const r={id:crypto.randomUUID(),type:"history",created:new Date,updated:new Date,started:new Date,ended:null,notes:null};return this._db.history.add(r).then(()=>this._db.history.get({id:r.id}))}deleteHistory(r){return this._db.history.delete(r)}browseHunger(r=!1){return this._db.hunger.toArray().then(a=>r?(a.sort((s,l)=>s.created.getTime()<l.created.getTime()?1:s.created.getTime()>l.created.getTime()?-1:0),a.length===0?null:a[0]):a)}readHunger(r){return this._db.hunger.get({id:r})}editHunger(r){const a=$r(r);return a.updated=new Date,this._db.hunger.put(a).then(()=>this._db.hunger.get({id:r.id}))}addHunger(r=5){const a={id:crypto.randomUUID(),type:"hunger",created:new Date,updated:new Date,level:r};return this._db.hunger.add(a).then(()=>this._db.hunger.get({id:a.id}))}deleteHunger(r){return this._db.hunger.delete(r)}browseWater(r=!1){return this._db.water.toArray().then(a=>{if(r){const s=new Date;s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0);const l=new Date(s.getTime());return l.setDate(l.getDate()+1),a.filter(f=>f.created.getTime()>s.getTime()&&f.created.getTime()<l.getTime())}else return a})}readWater(r){return this._db.water.get({id:r})}editWater(r){const a=$r(r);return a.updated=new Date,this._db.water.put(a).then(()=>this._db.water.get({id:r.id}))}addWater(r){const a={id:crypto.randomUUID(),type:"water",created:new Date,updated:new Date,volume:r};return crypto.randomUUID(),this._db.water.add(a).then(()=>this._db.water.get({id:a.id}))}deleteWater(r){return this._db.water.delete(r)}}var ra={exports:{}},uo;function ys(){return uo||(uo=1,(function(o,r){(function(){var a=Math.PI,s=Math.sin,l=Math.cos,f=Math.tan,h=Math.asin,g=Math.atan2,k=Math.acos,C=a/180,j=1e3*60*60*24,K=2440588,P=2451545;function V(te){return te.valueOf()/j-.5+K}function H(te){return new Date((te+.5-K)*j)}function R(te){return V(te)-P}var Y=C*23.4397;function M(te,fe){return g(s(te)*l(Y)-f(fe)*s(Y),l(te))}function _(te,fe){return h(s(fe)*l(Y)+l(fe)*s(Y)*s(te))}function I(te,fe,de){return g(s(te),l(te)*s(fe)-f(de)*l(fe))}function A(te,fe,de){return h(s(fe)*s(de)+l(fe)*l(de)*l(te))}function W(te,fe){return C*(280.16+360.9856235*te)-fe}function q(te){return te<0&&(te=0),2967e-7/Math.tan(te+.00312536/(te+.08901179))}function F(te){return C*(357.5291+.98560028*te)}function se(te){var fe=C*(1.9148*s(te)+.02*s(2*te)+3e-4*s(3*te)),de=C*102.9372;return te+fe+de+a}function pe(te){var fe=F(te),de=se(fe);return{dec:_(de,0),ra:M(de,0)}}var le={};le.getPosition=function(te,fe,de){var Oe=C*-de,Ie=C*fe,Ae=R(te),Fe=pe(Ae),Ne=W(Ae,Oe)-Fe.ra;return{azimuth:I(Ne,Ie,Fe.dec),altitude:A(Ne,Ie,Fe.dec)}};var Te=le.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];le.addTime=function(te,fe,de){Te.push([te,fe,de])};var ve=9e-4;function me(te,fe){return Math.round(te-ve-fe/(2*a))}function Ue(te,fe,de){return ve+(te+fe)/(2*a)+de}function Ce(te,fe,de){return P+te+.0053*s(fe)-.0069*s(2*de)}function We(te,fe,de){return k((s(te)-s(fe)*s(de))/(l(fe)*l(de)))}function at(te){return-2.076*Math.sqrt(te)/60}function ot(te,fe,de,Oe,Ie,Ae,Fe){var Ne=We(te,de,Oe),ae=Ue(Ne,fe,Ie);return Ce(ae,Ae,Fe)}le.getTimes=function(te,fe,de,Oe){Oe=Oe||0;var Ie=C*-de,Ae=C*fe,Fe=at(Oe),Ne=R(te),ae=me(Ne,Ie),st=Ue(0,Ie,ae),ut=F(st),De=se(ut),vt=_(De,0),pt=Ce(st,ut,De),et,It,wt,gt,Tt,xt,ze={solarNoon:H(pt),nadir:H(pt-.5)};for(et=0,It=Te.length;et<It;et+=1)wt=Te[et],gt=(wt[0]+Fe)*C,Tt=ot(gt,Ie,Ae,vt,ae,ut,De),xt=pt-(Tt-pt),ze[wt[1]]=H(xt),ze[wt[2]]=H(Tt);return ze};function it(te){var fe=C*(218.316+13.176396*te),de=C*(134.963+13.064993*te),Oe=C*(93.272+13.22935*te),Ie=fe+C*6.289*s(de),Ae=C*5.128*s(Oe),Fe=385001-20905*l(de);return{ra:M(Ie,Ae),dec:_(Ie,Ae),dist:Fe}}le.getMoonPosition=function(te,fe,de){var Oe=C*-de,Ie=C*fe,Ae=R(te),Fe=it(Ae),Ne=W(Ae,Oe)-Fe.ra,ae=A(Ne,Ie,Fe.dec),st=g(s(Ne),f(Ie)*l(Fe.dec)-s(Fe.dec)*l(Ne));return ae=ae+q(ae),{azimuth:I(Ne,Ie,Fe.dec),altitude:ae,distance:Fe.dist,parallacticAngle:st}},le.getMoonIllumination=function(te){var fe=R(te||new Date),de=pe(fe),Oe=it(fe),Ie=149598e3,Ae=k(s(de.dec)*s(Oe.dec)+l(de.dec)*l(Oe.dec)*l(de.ra-Oe.ra)),Fe=g(Ie*s(Ae),Oe.dist-Ie*l(Ae)),Ne=g(l(de.dec)*s(de.ra-Oe.ra),s(de.dec)*l(Oe.dec)-l(de.dec)*s(Oe.dec)*l(de.ra-Oe.ra));return{fraction:(1+l(Fe))/2,phase:.5+.5*Fe*(Ne<0?-1:1)/Math.PI,angle:Ne}};function Le(te,fe){return new Date(te.valueOf()+fe*j/24)}le.getMoonTimes=function(te,fe,de,Oe){var Ie=new Date(te);Oe?Ie.setUTCHours(0,0,0,0):Ie.setHours(0,0,0,0);for(var Ae=.133*C,Fe=le.getMoonPosition(Ie,fe,de).altitude-Ae,Ne,ae,st,ut,De,vt,pt,et,It,wt,gt,Tt,xt,ze=1;ze<=24&&(Ne=le.getMoonPosition(Le(Ie,ze),fe,de).altitude-Ae,ae=le.getMoonPosition(Le(Ie,ze+1),fe,de).altitude-Ae,De=(Fe+ae)/2-Ne,vt=(ae-Fe)/2,pt=-vt/(2*De),et=(De*pt+vt)*pt+Ne,It=vt*vt-4*De*Ne,wt=0,It>=0&&(xt=Math.sqrt(It)/(Math.abs(De)*2),gt=pt-xt,Tt=pt+xt,Math.abs(gt)<=1&&wt++,Math.abs(Tt)<=1&&wt++,gt<-1&&(gt=Tt)),wt===1?Fe<0?st=ze+gt:ut=ze+gt:wt===2&&(st=ze+(et<0?Tt:gt),ut=ze+(et<0?gt:Tt)),!(st&&ut));ze+=2)Fe=ae;var Rt={};return st&&(Rt.rise=Le(Ie,st)),ut&&(Rt.set=Le(Ie,ut)),!st&&!ut&&(Rt[et>0?"alwaysUp":"alwaysDown"]=!0),Rt},o.exports=le})()})(ra)),ra.exports}var bs=ys();const _s=Fo(bs),qo=/^[a-z0-9]+(-[a-z0-9]+)*$/,wr=(o,r,a,s="")=>{const l=o.split(":");if(o.slice(0,1)==="@"){if(l.length<2||l.length>3)return null;s=l.shift().slice(1)}if(l.length>3||!l.length)return null;if(l.length>1){const g=l.pop(),k=l.pop(),C={provider:l.length>0?l[0]:s,prefix:k,name:g};return r&&!pr(C)?null:C}const f=l[0],h=f.split("-");if(h.length>1){const g={provider:s,prefix:h.shift(),name:h.join("-")};return r&&!pr(g)?null:g}if(a&&s===""){const g={provider:s,prefix:"",name:f};return r&&!pr(g,a)?null:g}return null},pr=(o,r)=>o?!!((r&&o.prefix===""||o.prefix)&&o.name):!1,Ro=Object.freeze({left:0,top:0,width:16,height:16}),yr=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),kr=Object.freeze({...Ro,...yr}),ca=Object.freeze({...kr,body:"",hidden:!1});function ws(o,r){const a={};!o.hFlip!=!r.hFlip&&(a.hFlip=!0),!o.vFlip!=!r.vFlip&&(a.vFlip=!0);const s=((o.rotate||0)+(r.rotate||0))%4;return s&&(a.rotate=s),a}function lo(o,r){const a=ws(o,r);for(const s in ca)s in yr?s in o&&!(s in a)&&(a[s]=yr[s]):s in r?a[s]=r[s]:s in o&&(a[s]=o[s]);return a}function ks(o,r){const a=o.icons,s=o.aliases||Object.create(null),l=Object.create(null);function f(h){if(a[h])return l[h]=[];if(!(h in l)){l[h]=null;const g=s[h]&&s[h].parent,k=g&&f(g);k&&(l[h]=[g].concat(k))}return l[h]}return Object.keys(a).concat(Object.keys(s)).forEach(f),l}function xs(o,r,a){const s=o.icons,l=o.aliases||Object.create(null);let f={};function h(g){f=lo(s[g]||l[g],f)}return h(r),a.forEach(h),lo(o,f)}function Bo(o,r){const a=[];if(typeof o!="object"||typeof o.icons!="object")return a;o.not_found instanceof Array&&o.not_found.forEach(l=>{r(l,null),a.push(l)});const s=ks(o);for(const l in s){const f=s[l];f&&(r(l,xs(o,l,f)),a.push(l))}return a}const Ds={provider:"",aliases:{},not_found:{},...Ro};function aa(o,r){for(const a in r)if(a in o&&typeof o[a]!=typeof r[a])return!1;return!0}function No(o){if(typeof o!="object"||o===null)return null;const r=o;if(typeof r.prefix!="string"||!o.icons||typeof o.icons!="object"||!aa(o,Ds))return null;const a=r.icons;for(const l in a){const f=a[l];if(!l||typeof f.body!="string"||!aa(f,ca))return null}const s=r.aliases||Object.create(null);for(const l in s){const f=s[l],h=f.parent;if(!l||typeof h!="string"||!a[h]&&!s[h]||!aa(f,ca))return null}return r}const co=Object.create(null);function Ss(o,r){return{provider:o,prefix:r,icons:Object.create(null),missing:new Set}}function yn(o,r){const a=co[o]||(co[o]=Object.create(null));return a[r]||(a[r]=Ss(o,r))}function Ho(o,r){return No(r)?Bo(r,(a,s)=>{s?o.icons[a]=s:o.missing.add(a)}):[]}function Ts(o,r,a){try{if(typeof a.body=="string")return o.icons[r]={...a},!0}catch{}return!1}let Bn=!1;function Lo(o){return typeof o=="boolean"&&(Bn=o),Bn}function Es(o){const r=typeof o=="string"?wr(o,!0,Bn):o;if(r){const a=yn(r.provider,r.prefix),s=r.name;return a.icons[s]||(a.missing.has(s)?null:void 0)}}function Cs(o,r){const a=wr(o,!0,Bn);if(!a)return!1;const s=yn(a.provider,a.prefix);return r?Ts(s,a.name,r):(s.missing.add(a.name),!0)}function Is(o,r){if(typeof o!="object")return!1;if(typeof r!="string"&&(r=o.provider||""),Bn&&!r&&!o.prefix){let l=!1;return No(o)&&(o.prefix="",Bo(o,(f,h)=>{Cs(f,h)&&(l=!0)})),l}const a=o.prefix;if(!pr({prefix:a,name:"a"}))return!1;const s=yn(r,a);return!!Ho(s,o)}const zo=Object.freeze({width:null,height:null}),Uo=Object.freeze({...zo,...yr}),Os=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Ps=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function fo(o,r,a){if(r===1)return o;if(a=a||100,typeof o=="number")return Math.ceil(o*r*a)/a;if(typeof o!="string")return o;const s=o.split(Os);if(s===null||!s.length)return o;const l=[];let f=s.shift(),h=Ps.test(f);for(;;){if(h){const g=parseFloat(f);isNaN(g)?l.push(f):l.push(Math.ceil(g*r*a)/a)}else l.push(f);if(f=s.shift(),f===void 0)return l.join("");h=!h}}function As(o,r="defs"){let a="";const s=o.indexOf("<"+r);for(;s>=0;){const l=o.indexOf(">",s),f=o.indexOf("</"+r);if(l===-1||f===-1)break;const h=o.indexOf(">",f);if(h===-1)break;a+=o.slice(l+1,f).trim(),o=o.slice(0,s).trim()+o.slice(h+1)}return{defs:a,content:o}}function Ms(o,r){return o?"<defs>"+o+"</defs>"+r:r}function js(o,r,a){const s=As(o);return Ms(s.defs,r+s.content+a)}const Ks=o=>o==="unset"||o==="undefined"||o==="none";function Fs(o,r){const a={...kr,...o},s={...Uo,...r},l={left:a.left,top:a.top,width:a.width,height:a.height};let f=a.body;[a,s].forEach(R=>{const Y=[],M=R.hFlip,_=R.vFlip;let I=R.rotate;M?_?I+=2:(Y.push("translate("+(l.width+l.left).toString()+" "+(0-l.top).toString()+")"),Y.push("scale(-1 1)"),l.top=l.left=0):_&&(Y.push("translate("+(0-l.left).toString()+" "+(l.height+l.top).toString()+")"),Y.push("scale(1 -1)"),l.top=l.left=0);let A;switch(I<0&&(I-=Math.floor(I/4)*4),I=I%4,I){case 1:A=l.height/2+l.top,Y.unshift("rotate(90 "+A.toString()+" "+A.toString()+")");break;case 2:Y.unshift("rotate(180 "+(l.width/2+l.left).toString()+" "+(l.height/2+l.top).toString()+")");break;case 3:A=l.width/2+l.left,Y.unshift("rotate(-90 "+A.toString()+" "+A.toString()+")");break}I%2===1&&(l.left!==l.top&&(A=l.left,l.left=l.top,l.top=A),l.width!==l.height&&(A=l.width,l.width=l.height,l.height=A)),Y.length&&(f=js(f,'<g transform="'+Y.join(" ")+'">',"</g>"))});const h=s.width,g=s.height,k=l.width,C=l.height;let j,K;h===null?(K=g===null?"1em":g==="auto"?C:g,j=fo(K,k/C)):(j=h==="auto"?k:h,K=g===null?fo(j,C/k):g==="auto"?C:g);const P={},V=(R,Y)=>{Ks(Y)||(P[R]=Y.toString())};V("width",j),V("height",K);const H=[l.left,l.top,k,C];return P.viewBox=H.join(" "),{attributes:P,viewBox:H,body:f}}const qs=/\sid="(\S+)"/g,Rs="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let Bs=0;function Ns(o,r=Rs){const a=[];let s;for(;s=qs.exec(o);)a.push(s[1]);if(!a.length)return o;const l="suffix"+(Math.random()*16777216|Date.now()).toString(16);return a.forEach(f=>{const h=typeof r=="function"?r(f):r+(Bs++).toString(),g=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");o=o.replace(new RegExp('([#;"])('+g+')([")]|\\.[a-z])',"g"),"$1"+h+l+"$3")}),o=o.replace(new RegExp(l,"g"),""),o}const fa=Object.create(null);function Hs(o,r){fa[o]=r}function da(o){return fa[o]||fa[""]}function ma(o){let r;if(typeof o.resources=="string")r=[o.resources];else if(r=o.resources,!(r instanceof Array)||!r.length)return null;return{resources:r,path:o.path||"/",maxURL:o.maxURL||500,rotate:o.rotate||750,timeout:o.timeout||5e3,random:o.random===!0,index:o.index||0,dataAfterTimeout:o.dataAfterTimeout!==!1}}const ya=Object.create(null),Mn=["https://api.simplesvg.com","https://api.unisvg.com"],gr=[];for(;Mn.length>0;)Mn.length===1||Math.random()>.5?gr.push(Mn.shift()):gr.push(Mn.pop());ya[""]=ma({resources:["https://api.iconify.design"].concat(gr)});function Ls(o,r){const a=ma(r);return a===null?!1:(ya[o]=a,!0)}function ba(o){return ya[o]}const zs=()=>{let o;try{if(o=fetch,typeof o=="function")return o}catch{}};let ho=zs();function Us(o,r){const a=ba(o);if(!a)return 0;let s;if(!a.maxURL)s=0;else{let l=0;a.resources.forEach(h=>{l=Math.max(l,h.length)});const f=r+".json?icons=";s=a.maxURL-l-a.path.length-f.length}return s}function Ys(o){return o===404}const Ws=(o,r,a)=>{const s=[],l=Us(o,r),f="icons";let h={type:f,provider:o,prefix:r,icons:[]},g=0;return a.forEach((k,C)=>{g+=k.length+1,g>=l&&C>0&&(s.push(h),h={type:f,provider:o,prefix:r,icons:[]},g=k.length),h.icons.push(k)}),s.push(h),s};function Vs(o){if(typeof o=="string"){const r=ba(o);if(r)return r.path}return"/"}const Gs=(o,r,a)=>{if(!ho){a("abort",424);return}let s=Vs(r.provider);switch(r.type){case"icons":{const f=r.prefix,g=r.icons.join(","),k=new URLSearchParams({icons:g});s+=f+".json?"+k.toString();break}case"custom":{const f=r.uri;s+=f.slice(0,1)==="/"?f.slice(1):f;break}default:a("abort",400);return}let l=503;ho(o+s).then(f=>{const h=f.status;if(h!==200){setTimeout(()=>{a(Ys(h)?"abort":"next",h)});return}return l=501,f.json()}).then(f=>{if(typeof f!="object"||f===null){setTimeout(()=>{f===404?a("abort",f):a("next",l)});return}setTimeout(()=>{a("success",f)})}).catch(()=>{a("next",l)})},Qs={prepare:Ws,send:Gs};function Js(o){const r={loaded:[],missing:[],pending:[]},a=Object.create(null);o.sort((l,f)=>l.provider!==f.provider?l.provider.localeCompare(f.provider):l.prefix!==f.prefix?l.prefix.localeCompare(f.prefix):l.name.localeCompare(f.name));let s={provider:"",prefix:"",name:""};return o.forEach(l=>{if(s.name===l.name&&s.prefix===l.prefix&&s.provider===l.provider)return;s=l;const f=l.provider,h=l.prefix,g=l.name,k=a[f]||(a[f]=Object.create(null)),C=k[h]||(k[h]=yn(f,h));let j;g in C.icons?j=r.loaded:h===""||C.missing.has(g)?j=r.missing:j=r.pending;const K={provider:f,prefix:h,name:g};j.push(K)}),r}function Yo(o,r){o.forEach(a=>{const s=a.loaderCallbacks;s&&(a.loaderCallbacks=s.filter(l=>l.id!==r))})}function Xs(o){o.pendingCallbacksFlag||(o.pendingCallbacksFlag=!0,setTimeout(()=>{o.pendingCallbacksFlag=!1;const r=o.loaderCallbacks?o.loaderCallbacks.slice(0):[];if(!r.length)return;let a=!1;const s=o.provider,l=o.prefix;r.forEach(f=>{const h=f.icons,g=h.pending.length;h.pending=h.pending.filter(k=>{if(k.prefix!==l)return!0;const C=k.name;if(o.icons[C])h.loaded.push({provider:s,prefix:l,name:C});else if(o.missing.has(C))h.missing.push({provider:s,prefix:l,name:C});else return a=!0,!0;return!1}),h.pending.length!==g&&(a||Yo([o],f.id),f.callback(h.loaded.slice(0),h.missing.slice(0),h.pending.slice(0),f.abort))})}))}let Zs=0;function $s(o,r,a){const s=Zs++,l=Yo.bind(null,a,s);if(!r.pending.length)return l;const f={id:s,icons:r,callback:o,abort:l};return a.forEach(h=>{(h.loaderCallbacks||(h.loaderCallbacks=[])).push(f)}),l}function eu(o,r=!0,a=!1){const s=[];return o.forEach(l=>{const f=typeof l=="string"?wr(l,r,a):l;f&&s.push(f)}),s}var tu={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function nu(o,r,a,s){const l=o.resources.length,f=o.random?Math.floor(Math.random()*l):o.index;let h;if(o.random){let q=o.resources.slice(0);for(h=[];q.length>1;){const F=Math.floor(Math.random()*q.length);h.push(q[F]),q=q.slice(0,F).concat(q.slice(F+1))}h=h.concat(q)}else h=o.resources.slice(f).concat(o.resources.slice(0,f));const g=Date.now();let k="pending",C=0,j,K=null,P=[],V=[];typeof s=="function"&&V.push(s);function H(){K&&(clearTimeout(K),K=null)}function R(){k==="pending"&&(k="aborted"),H(),P.forEach(q=>{q.status==="pending"&&(q.status="aborted")}),P=[]}function Y(q,F){F&&(V=[]),typeof q=="function"&&V.push(q)}function M(){return{startTime:g,payload:r,status:k,queriesSent:C,queriesPending:P.length,subscribe:Y,abort:R}}function _(){k="failed",V.forEach(q=>{q(void 0,j)})}function I(){P.forEach(q=>{q.status==="pending"&&(q.status="aborted")}),P=[]}function A(q,F,se){const pe=F!=="success";switch(P=P.filter(le=>le!==q),k){case"pending":break;case"failed":if(pe||!o.dataAfterTimeout)return;break;default:return}if(F==="abort"){j=se,_();return}if(pe){j=se,P.length||(h.length?W():_());return}if(H(),I(),!o.random){const le=o.resources.indexOf(q.resource);le!==-1&&le!==o.index&&(o.index=le)}k="completed",V.forEach(le=>{le(se)})}function W(){if(k!=="pending")return;H();const q=h.shift();if(q===void 0){if(P.length){K=setTimeout(()=>{H(),k==="pending"&&(I(),_())},o.timeout);return}_();return}const F={status:"pending",resource:q,callback:(se,pe)=>{A(F,se,pe)}};P.push(F),C++,K=setTimeout(W,o.rotate),a(q,r,F.callback)}return setTimeout(W),M}function Wo(o){const r={...tu,...o};let a=[];function s(){a=a.filter(g=>g().status==="pending")}function l(g,k,C){const j=nu(r,g,k,(K,P)=>{s(),C&&C(K,P)});return a.push(j),j}function f(g){return a.find(k=>g(k))||null}return{query:l,find:f,setIndex:g=>{r.index=g},getIndex:()=>r.index,cleanup:s}}function vo(){}const oa=Object.create(null);function ru(o){if(!oa[o]){const r=ba(o);if(!r)return;const a=Wo(r),s={config:r,redundancy:a};oa[o]=s}return oa[o]}function au(o,r,a){let s,l;if(typeof o=="string"){const f=da(o);if(!f)return a(void 0,424),vo;l=f.send;const h=ru(o);h&&(s=h.redundancy)}else{const f=ma(o);if(f){s=Wo(f);const h=o.resources?o.resources[0]:"",g=da(h);g&&(l=g.send)}}return!s||!l?(a(void 0,424),vo):s.query(r,l,a)().abort}function po(){}function ou(o){o.iconsLoaderFlag||(o.iconsLoaderFlag=!0,setTimeout(()=>{o.iconsLoaderFlag=!1,Xs(o)}))}function iu(o){const r=[],a=[];return o.forEach(s=>{(s.match(qo)?r:a).push(s)}),{valid:r,invalid:a}}function jn(o,r,a){function s(){const l=o.pendingIcons;r.forEach(f=>{l&&l.delete(f),o.icons[f]||o.missing.add(f)})}if(a&&typeof a=="object")try{if(!Ho(o,a).length){s();return}}catch(l){console.error(l)}s(),ou(o)}function go(o,r){o instanceof Promise?o.then(a=>{r(a)}).catch(()=>{r(null)}):r(o)}function su(o,r){o.iconsToLoad?o.iconsToLoad=o.iconsToLoad.concat(r).sort():o.iconsToLoad=r,o.iconsQueueFlag||(o.iconsQueueFlag=!0,setTimeout(()=>{o.iconsQueueFlag=!1;const{provider:a,prefix:s}=o,l=o.iconsToLoad;if(delete o.iconsToLoad,!l||!l.length)return;const f=o.loadIcon;if(o.loadIcons&&(l.length>1||!f)){go(o.loadIcons(l,s,a),j=>{jn(o,l,j)});return}if(f){l.forEach(j=>{const K=f(j,s,a);go(K,P=>{const V=P?{prefix:s,icons:{[j]:P}}:null;jn(o,[j],V)})});return}const{valid:h,invalid:g}=iu(l);if(g.length&&jn(o,g,null),!h.length)return;const k=s.match(qo)?da(a):null;if(!k){jn(o,h,null);return}k.prepare(a,s,h).forEach(j=>{au(a,j,K=>{jn(o,j.icons,K)})})}))}const uu=(o,r)=>{const a=eu(o,!0,Lo()),s=Js(a);if(!s.pending.length){let k=!0;return r&&setTimeout(()=>{k&&r(s.loaded,s.missing,s.pending,po)}),()=>{k=!1}}const l=Object.create(null),f=[];let h,g;return s.pending.forEach(k=>{const{provider:C,prefix:j}=k;if(j===g&&C===h)return;h=C,g=j,f.push(yn(C,j));const K=l[C]||(l[C]=Object.create(null));K[j]||(K[j]=[])}),s.pending.forEach(k=>{const{provider:C,prefix:j,name:K}=k,P=yn(C,j),V=P.pendingIcons||(P.pendingIcons=new Set);V.has(K)||(V.add(K),l[C][j].push(K))}),f.forEach(k=>{const C=l[k.provider][k.prefix];C.length&&su(k,C)}),r?$s(r,s,f):po};function lu(o,r){const a={...o};for(const s in r){const l=r[s],f=typeof l;s in zo?(l===null||l&&(f==="string"||f==="number"))&&(a[s]=l):f===typeof a[s]&&(a[s]=s==="rotate"?l%4:l)}return a}const cu=/[\s,]+/;function fu(o,r){r.split(cu).forEach(a=>{switch(a.trim()){case"horizontal":o.hFlip=!0;break;case"vertical":o.vFlip=!0;break}})}function du(o,r=0){const a=o.replace(/^-?[0-9.]*/,"");function s(l){for(;l<0;)l+=4;return l%4}if(a===""){const l=parseInt(o);return isNaN(l)?0:s(l)}else if(a!==o){let l=0;switch(a){case"%":l=25;break;case"deg":l=90}if(l){let f=parseFloat(o.slice(0,o.length-a.length));return isNaN(f)?0:(f=f/l,f%1===0?s(f):0)}}return r}function hu(o,r){let a=o.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const s in r)a+=" "+s+'="'+r[s]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+a+">"+o+"</svg>"}function vu(o){return o.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function pu(o){return"data:image/svg+xml,"+vu(o)}function gu(o){return'url("'+pu(o)+'")'}const mo={...Uo,inline:!1},mu={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},yu={display:"inline-block"},ha={"background-color":"currentColor"},Vo={"background-color":"transparent"},yo={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},bo={"-webkit-mask":ha,mask:ha,background:Vo};for(const o in bo){const r=bo[o];for(const a in yo)r[o+"-"+a]=yo[a]}function bu(o){return o+(o.match(/^[-0-9.]+$/)?"px":"")}function _u(o,r){const a=lu(mo,r),s=r.mode||"svg",l=s==="svg"?{...mu}:{};o.body.indexOf("xlink:")===-1&&delete l["xmlns:xlink"];let f=typeof r.style=="string"?r.style:"";for(let M in r){const _=r[M];if(_!==void 0)switch(M){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":a[M]=_===!0||_==="true"||_===1;break;case"flip":typeof _=="string"&&fu(a,_);break;case"color":f=f+(f.length>0&&f.trim().slice(-1)!==";"?";":"")+"color: "+_+"; ";break;case"rotate":typeof _=="string"?a[M]=du(_):typeof _=="number"&&(a[M]=_);break;case"ariaHidden":case"aria-hidden":_!==!0&&_!=="true"&&delete l["aria-hidden"];break;default:if(M.slice(0,3)==="on:")break;mo[M]===void 0&&(l[M]=_)}}const h=Fs(o,a),g=h.attributes;if(a.inline&&(f="vertical-align: -0.125em; "+f),s==="svg"){Object.assign(l,g),f!==""&&(l.style=f);let M=0,_=r.id;return typeof _=="string"&&(_=_.replace(/-/g,"_")),{svg:!0,attributes:l,body:Ns(h.body,_?()=>_+"ID"+M++:"iconifySvelte")}}const{body:k,width:C,height:j}=o,K=s==="mask"||(s==="bg"?!1:k.indexOf("currentColor")!==-1),P=hu(k,{...g,width:C+"",height:j+""}),H={"--svg":gu(P)},R=M=>{const _=g[M];_&&(H[M]=bu(_))};R("width"),R("height"),Object.assign(H,yu,K?ha:Vo);let Y="";for(const M in H)Y+=M+": "+H[M]+";";return l.style=Y+f,{svg:!1,attributes:l}}Lo(!0);Hs("",Qs);if(typeof document<"u"&&typeof window<"u"){const o=window;if(o.IconifyPreload!==void 0){const r=o.IconifyPreload,a="Invalid IconifyPreload syntax.";typeof r=="object"&&r!==null&&(r instanceof Array?r:[r]).forEach(s=>{try{(typeof s!="object"||s===null||s instanceof Array||typeof s.icons!="object"||typeof s.prefix!="string"||!Is(s))&&console.error(a)}catch{console.error(a)}})}if(o.IconifyProviders!==void 0){const r=o.IconifyProviders;if(typeof r=="object"&&r!==null)for(let a in r){const s="IconifyProviders["+a+"] is invalid.";try{const l=r[a];if(typeof l!="object"||!l||l.resources===void 0)continue;Ls(a,l)||console.error(s)}catch{console.error(s)}}}}function wu(o,r,a,s,l){function f(){r.loading&&(r.loading.abort(),r.loading=null)}if(typeof o=="object"&&o!==null&&typeof o.body=="string")return r.name="",f(),{data:{...kr,...o}};let h;if(typeof o!="string"||(h=wr(o,!1,!0))===null)return f(),null;const g=Es(h);if(!g)return a&&(!r.loading||r.loading.name!==o)&&(f(),r.name="",r.loading={name:o,abort:uu([h],s)}),null;f(),r.name!==o&&(r.name=o,l&&!r.destroyed&&setTimeout(()=>{l(o)}));const k=["iconify"];return h.prefix!==""&&k.push("iconify--"+h.prefix),h.provider!==""&&k.push("iconify--"+h.provider),{data:g,classes:k}}function ku(o,r){return o?_u({...kr,...o},r):null}var xu=Ji("<svg><!></svg>"),Du=be("<span></span>");function Qe(o,r){Ze(r,!0);const a={name:"",loading:null,destroyed:!1},s=Xi(r,["$$slots","$$events","$$legacy"]);let l=ke(!1),f=ke(0),h=He(()=>!!r.ssr||m(l)),g=He(()=>(m(f),wu(r.icon,a,m(h),C,r.onload))),k=He(()=>{const V=m(g)?ku(m(g).data,s):null;return V&&m(g).classes&&(V.attributes.class=(typeof s.class=="string"?s.class+" ":"")+m(g).classes.join(" ")),V});function C(){Qi(f)}sn(()=>{ie(l,!0)}),ki(()=>{a.destroyed=!0,a.loading&&(a.loading.abort(),a.loading=null)});var j=At(),K=lt(j);{var P=V=>{var H=At(),R=lt(H);{var Y=_=>{var I=xu();ao(I,()=>({...m(k).attributes}));var A=z(I);rs(A,()=>m(k).body,!0),N(I),ce(_,I)},M=_=>{var I=Du();ao(I,()=>({...m(k).attributes})),ce(_,I)};rt(R,_=>{m(k).svg?_(Y):_(M,!1)})}ce(V,H)};rt(K,V=>{m(k)&&V(P)})}ce(o,j),$e()}var Su=(o,r)=>r(0),Tu=(o,r)=>r(14),Eu=(o,r)=>r(16),Cu=(o,r)=>r(23),Iu=(o,r)=>r(40),Ou=be('<div class="svelte-ziixid"><button type="button"><!></button> <button type="button">14h</button> <button type="button">16h</button> <button type="button">23h</button> <button type="button">40h</button></div>');function Pu(o,r){Ze(r,!0);let a=ge(r,"value",7,0);function s(Y){a(Y),r.onchange&&r.onchange(a())}var l=Ou(),f=z(l);f.__click=[Su,s];let h;var g=z(f);Qe(g,{height:"20",icon:"stash:infinity-duotone",width:"20"}),N(f);var k=Q(f,2);k.__click=[Tu,s];let C;var j=Q(k,2);j.__click=[Eu,s];let K;var P=Q(j,2);P.__click=[Cu,s];let V;var H=Q(P,2);H.__click=[Iu,s];let R;N(l),Ke((Y,M,_,I,A)=>{h=Xe(f,1,"svelte-ziixid",null,h,Y),C=Xe(k,1,"svelte-ziixid",null,C,M),K=Xe(j,1,"svelte-ziixid",null,K,_),V=Xe(P,1,"svelte-ziixid",null,V,I),R=Xe(H,1,"svelte-ziixid",null,R,A)},[()=>({selected:a()===0}),()=>({selected:a()===14}),()=>({selected:a()===16}),()=>({selected:a()===23}),()=>({selected:a()===40})]),ce(o,l),$e()}ct(["click"]);var Au=be('<div class="hour svelte-z94qzf"></div>'),Mu=be('<div class="day svelte-z94qzf"><!></div>'),ju=be('<p class="day svelte-z94qzf"> </p> <!>',1),Ku=be('<div class="day svelte-z94qzf"><div class="hour svelte-z94qzf"></div></div>'),Fu=be('<figure class="svelte-z94qzf"><div class="labels svelte-z94qzf"><p class="date svelte-z94qzf">Date</p> <p class="hour svelte-z94qzf">0</p> <p class="hour svelte-z94qzf">12</p> <p class="hour svelte-z94qzf">24</p></div> <div class="grid svelte-z94qzf"><!></div> <div class="average grid svelte-z94qzf"><p class="day svelte-z94qzf">Avg</p> <!></div></figure>');function qu(o,r){Ze(r,!0);let a=ge(r,"average",19,()=>[]),s=ge(r,"daily",3,null);ge(r,"days",3,10);function l(P){return P=new Date(P+"T00:00:00"),new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(P)}function f(P,V){return P===0||V[P-1]===0?(1-V[P])*100+"%":0}var h=Fu(),g=Q(z(h),2),k=z(g);{var C=P=>{var V=At(),H=lt(V);St(H,17,()=>Object.keys(s()),Dt,(R,Y)=>{const M=He(()=>s()[m(Y)]);var _=ju(),I=lt(_),A=z(I,!0);N(I);var W=Q(I,2);St(W,16,()=>({length:24}),Dt,(q,F,se)=>{var pe=Mu(),le=z(pe);{var Te=ve=>{var me=Au();let Ue;Ke(Ce=>Ue=mn(me,"",Ue,Ce),[()=>({"margin-left":f(se,m(M)),width:100*m(M)[se]+"%"})]),ce(ve,me)};rt(le,ve=>{m(M)[se]!==0&&ve(Te)})}N(pe),ce(q,pe)}),Ke(q=>xe(A,q),[()=>l(m(Y))]),ce(R,_)}),ce(P,V)};rt(k,P=>{s()!==null&&P(C)})}N(g);var j=Q(g,2),K=Q(z(j),2);St(K,16,()=>({length:24}),Dt,(P,V,H)=>{var R=Ku(),Y=z(R);let M;N(R),Ke(_=>M=mn(Y,"",M,_),[()=>({opacity:a()[H],width:"100%"})]),ce(P,R)}),N(j),N(h),ce(o,h),$e()}function Ru(o,r,a,s){const l=m(r).getBoundingClientRect();m(a).style.width=l.width-2+"px",ie(s,!m(s))}var Bu=(o,r,a)=>r(m(a)),Nu=be('<li><button type="button" class="svelte-dpktq5"><!> <span class="svelte-dpktq5"> </span> <!></button></li>'),Hu=be('<label class="svelte-dpktq5"><button type="button" class="svelte-dpktq5"><!> <span class="svelte-dpktq5"> </span> <!></button> <ul></ul></label>');function Lu(o,r){Ze(r,!0);let a=ge(r,"items",19,()=>[]),s=ge(r,"value",7,0),l=ke(!1),f=ke(void 0),h=ke(void 0),g=He(()=>a().length>0?a()[s()].icon:""),k=He(()=>a().length>0?a()[s()].label:"");sn(()=>(document.addEventListener("click",C),()=>{document.removeEventListener("click",C)}));function C(I){!m(f).contains(I.target)&&!m(h).contains(I.target)&&ie(l,!1)}function j(I){s(I.value),ie(l,!1),r.onchange&&r.onchange(I)}var K=Hu(),P=z(K);P.__click=[Ru,f,h,l];var V=z(P);Qe(V,{height:"20",get icon(){return m(g)},width:"20"});var H=Q(V,2),R=z(H,!0);N(H);var Y=Q(H,2);Qe(Y,{height:"20",icon:"material-symbols:keyboard-arrow-down-rounded",width:"20"}),N(P),ht(P,I=>ie(f,I),()=>m(f));var M=Q(P,2);let _;St(M,21,a,Dt,(I,A)=>{var W=Nu();let q;var F=z(W);F.__click=[Bu,j,A];var se=z(F);Qe(se,{height:"20",get icon(){return m(A).icon},width:"20"});var pe=Q(se,2),le=z(pe,!0);N(pe);var Te=Q(pe,2);{var ve=me=>{Qe(me,{height:"20",icon:"material-symbols:check-rounded",width:"20"})};rt(Te,me=>{m(A).value===s()&&me(ve)})}N(F),N(W),Ke(me=>{q=Xe(W,1,"svelte-dpktq5",null,q,me),xe(le,m(A).label)},[()=>({selected:s()===m(A).value})]),ce(I,W)}),N(M),ht(M,I=>ie(h,I),()=>m(h)),N(K),Ke(I=>{xe(R,m(k)),_=Xe(M,1,"svelte-dpktq5",null,_,I)},[()=>({open:m(l)})]),ce(o,K),$e()}ct(["click"]);var zu=be('<p class="svelte-1lve2pk">0</p>'),Uu=be('<p class="svelte-1lve2pk"> </p>'),Yu=be('<p class="svelte-1lve2pk"> </p>'),Wu=be('<div class="column svelte-1lve2pk"><p class="svelte-1lve2pk"> </p></div>'),Vu=be('<div class="line svelte-1lve2pk"></div>'),Gu=be('<div class="average svelte-1lve2pk"></div>'),Qu=be('<figure class="svelte-1lve2pk"><div class="labels svelte-1lve2pk"><!></div> <div class="chart svelte-1lve2pk"><div class="labels svelte-1lve2pk"></div> <div class="columns svelte-1lve2pk"><!> <!> <!></div></div></figure>');function Ju(o,r){Ze(r,!0);let a=ge(r,"average",3,0),s=ge(r,"daily",19,()=>[]),l=He(()=>s().reduce((A,W)=>(A=W.volume>A?W.volume:A,A),0)),f=He(()=>{const A=Math.floor(m(l)+m(l)*.1);return[0,Math.round(A/4)*1,Math.round(A/4)*2,Math.round(A/4)*3,A]});function h(A){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(A)}var g=Qu(),k=z(g),C=z(k);{var j=A=>{var W=zu();ce(A,W)},K=A=>{var W=At(),q=lt(W);St(q,17,()=>m(f),Dt,(F,se)=>{const pe=He(()=>m(se)===0?"0":m(se)+" oz");var le=Uu(),Te=z(le,!0);N(le),Ke(()=>xe(Te,m(pe))),ce(F,le)}),ce(A,W)};rt(C,A=>{m(l)===0?A(j):A(K,!1)})}N(k);var P=Q(k,2),V=z(P);St(V,21,s,Dt,(A,W)=>{var q=Yu(),F=z(q,!0);N(q),Ke(se=>xe(F,se),[()=>h(m(W).created)]),ce(A,q)}),N(V);var H=Q(V,2),R=z(H);{var Y=A=>{var W=At(),q=lt(W);St(q,17,s,Dt,(F,se)=>{var pe=Wu();let le;var Te=z(pe),ve=z(Te);N(Te),N(pe),Ke(me=>{le=mn(pe,"",le,me),xe(ve,`${m(se).volume??""} oz`)},[()=>({width:`${m(se).volume/Math.floor(m(l)+m(l)*.1)*100}%`})]),ce(F,pe)}),ce(A,W)};rt(R,A=>{m(l)!==0&&A(Y)})}var M=Q(R,2);St(M,16,()=>({length:4}),Dt,(A,W,q)=>{var F=Vu();Xt(F,"data-value",q),mn(F,"",{},{left:`${25*(q+1)}%`}),ce(A,F)});var _=Q(M,2);{var I=A=>{var W=Gu();let q;Ke(F=>{Xt(W,"data-value",a()),q=mn(W,"",q,F)},[()=>({left:`${a()/Math.floor(m(l)+m(l)*.1)*100}%`})]),ce(A,W)};rt(_,A=>{a()>0&&A(I)})}N(H),N(P),N(g),ce(o,g),$e()}var Xu=be('<button class="sun svelte-wl8176" type="button">Sunrise/sunset</button>'),Zu=be('<!> <p class="svelte-wl8176"> </p>',1),$u=be('<section class="svelte-wl8176"><!> <footer class="svelte-wl8176"><div class="daynight svelte-wl8176"><!></div> <!></footer></section>');function Go(o,r){Ze(r,!0);let a=ge(r,"activity",3,null),s=ge(r,"days",3,10),l=ge(r,"water",3,null);const f=[{icon:"material-symbols:local-fire-department-outline-rounded",label:"Fasting",value:0},{icon:"material-symbols:water-drop-outline-rounded",label:"Water",value:1}];let h=ke(0);function g(_){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(_)}var k=$u(),C=z(k);{var j=_=>{{let I=He(()=>a()&&a().average?a().average:[]),A=He(()=>a()&&a().daily?a().daily:[]);qu(_,{get average(){return m(I)},get daily(){return m(A)},get days(){return s()}})}},K=_=>{var I=At(),A=lt(I);{var W=q=>{{let F=He(()=>l()&&l().average?l().average:null),se=He(()=>l()&&l().daily?l().daily:null);Ju(q,{get average(){return m(F)},get daily(){return m(se)}})}};rt(A,q=>{m(h)===1&&q(W)},!0)}ce(_,I)};rt(C,_=>{m(h)===0?_(j):_(K,!1)})}var P=Q(C,2),V=z(P),H=z(V);{var R=_=>{var I=Xu();I.__click=function(...A){var W;(W=r.onsun)==null||W.apply(this,A)},ce(_,I)},Y=_=>{var I=Zu(),A=lt(I);{let F=He(()=>r.sun&&r.sun.icon?r.sun.icon:null);Qe(A,{height:"16",get icon(){return m(F)},width:"16"})}var W=Q(A,2),q=z(W,!0);N(W),Ke(F=>xe(q,F),[()=>r.sun&&r.sun.timing?g(r.sun.timing):""]),ce(_,I)};rt(H,_=>{r.sun===null?_(R):_(Y,!1)})}N(V);var M=Q(V,2);Lu(M,{get items(){return f},mount:"top",onchange:_=>ie(h,_.value,!0)}),N(P),N(k),ce(o,k),$e()}ct(["click"]);function el(o,r){ie(r,!m(r))}var tl=(o,r,a)=>r(m(a)),nl=be('<li class="svelte-a6ycms"><button type="button" class="svelte-a6ycms"><span class="svelte-a6ycms"> </span></button></li>'),rl=be('<label class="svelte-a6ycms"><button type="button" class="svelte-a6ycms"><!> <span class="svelte-a6ycms"> </span> <!></button> <ul></ul></label>');function al(o,r){Ze(r,!0);let a=ge(r,"items",19,()=>[]),s=ge(r,"value",3,5),l=ke(!1),f=ke(void 0),h=ke(void 0),g=He(()=>a().find(I=>I.value===s()).label);sn(()=>(document.addEventListener("click",k),()=>{document.removeEventListener("click",k)}));function k(_){!m(f).contains(_.target)&&!m(h).contains(_.target)&&ie(l,!1)}function C(_){ie(l,!1),r.onchange&&r.onchange(_.value)}var j=rl(),K=z(j);K.__click=[el,l];var P=z(K);Qe(P,{height:"20",icon:"material-symbols:fork-spoon-rounded",width:"20"});var V=Q(P,2),H=z(V,!0);N(V);var R=Q(V,2);Qe(R,{height:"20",icon:"material-symbols:keyboard-arrow-down-rounded",width:"20"}),N(K),ht(K,_=>ie(f,_),()=>m(f));var Y=Q(K,2);let M;St(Y,21,a,Dt,(_,I)=>{var A=nl(),W=z(A);W.__click=[tl,C,I];var q=z(W),F=z(q,!0);N(q),N(W),N(A),Ke(()=>xe(F,m(I).label)),ce(_,A)}),N(Y),ht(Y,_=>ie(h,_),()=>m(h)),N(j),Ke(_=>{xe(H,m(g)),M=Xe(Y,1,"svelte-a6ycms",null,M,_)},[()=>({open:m(l)})]),ce(o,j),$e()}ct(["click"]);var ol=be('<article><p class="svelte-1yn3hhw"><span class="svelte-1yn3hhw"> </span> <span class="units svelte-1yn3hhw">hrs</span></p> <p class="colon svelte-1yn3hhw">:</p> <p class="svelte-1yn3hhw"><span class="svelte-1yn3hhw"> </span> <span class="units svelte-1yn3hhw">min</span></p> <p class="colon svelte-1yn3hhw">:</p> <p class="svelte-1yn3hhw"><span class="svelte-1yn3hhw"> </span> <span class="units svelte-1yn3hhw">sec</span></p></article>');function il(o,r){Ze(r,!0);let a=ge(r,"duration",3,0),s=ge(r,"now",3,null),l=ge(r,"started",3,null),f=He(()=>{let _=Math.floor((s()-l().getTime())/1e3);if(a()!==0){const I=new Date(l().getTime()+a()*36e5);_=Math.floor((I.getTime()-s())/1e3)}return _}),h=He(()=>{if(l()===null)return{hours:0,minutes:"00",seconds:"00"};let _=Math.floor(m(f)/3600);return _=_<0?"+"+Math.abs(_).toString(10):Math.abs(_).toString(10),{hours:_,minutes:Math.abs(Math.floor(m(f)%3600/60)).toString(10).padStart(2,"0"),seconds:Math.abs(m(f)%60).toString(10).padStart(2,"0")}});var g=ol();let k;var C=z(g),j=z(C),K=z(j,!0);N(j),Fn(2),N(C);var P=Q(C,4),V=z(P),H=z(V,!0);N(V),Fn(2),N(P);var R=Q(P,4),Y=z(R),M=z(Y,!0);N(Y),Fn(2),N(R),N(g),Ke(_=>{k=Xe(g,1,"svelte-1yn3hhw",null,k,_),xe(K,m(h).hours),xe(H,m(h).minutes),xe(M,m(h).seconds)},[()=>({complete:m(f)<0})]),ce(o,g),$e()}function sl(o,r){ie(r,!m(r))}var ul=(o,r,a)=>r(m(a)),ll=be('<li class="svelte-1yteqtn"><button type="button" class="svelte-1yteqtn"><span class="svelte-1yteqtn"> </span> <span class="svelte-1yteqtn"> </span></button></li>'),cl=be('<label class="svelte-1yteqtn"><button type="button" class="svelte-1yteqtn"><!> <span class="svelte-1yteqtn"> </span> <!></button> <ul></ul></label>');function fl(o,r){Ze(r,!0);let a=ge(r,"items",19,()=>[]),s=ge(r,"units",3,"oz"),l=ge(r,"value",3,0),f=ke(!1),h=ke(void 0),g=ke(void 0);sn(()=>(document.addEventListener("click",k),()=>{document.removeEventListener("click",k)}));function k(_){!m(h).contains(_.target)&&!m(g).contains(_.target)&&ie(f,!1)}function C(_){ie(f,!1),r.onchange&&r.onchange(_.value)}var j=cl(),K=z(j);K.__click=[sl,f];var P=z(K);Qe(P,{height:"20",icon:"material-symbols:water-drop-outline-rounded",width:"20"});var V=Q(P,2),H=z(V);N(V);var R=Q(V,2);Qe(R,{height:"20",icon:"material-symbols:keyboard-arrow-down-rounded",width:"20"}),N(K),ht(K,_=>ie(h,_),()=>m(h));var Y=Q(K,2);let M;St(Y,21,a,Dt,(_,I)=>{var A=ll(),W=z(A);W.__click=[ul,C,I];var q=z(W),F=z(q,!0);N(q);var se=Q(q,2),pe=z(se);N(se),N(W),N(A),Ke(()=>{xe(F,m(I).label),xe(pe,`${m(I).value??""} ${s()??""}`)}),ce(_,A)}),N(Y),ht(Y,_=>ie(g,_),()=>m(g)),N(j),Ke(_=>{xe(H,`${l()??""} ${s()??""}`),M=Xe(Y,1,"svelte-1yteqtn",null,M,_)},[()=>({open:m(f)})]),ce(o,j),$e()}ct(["click"]);function dl(o,r,a){r()===null?a.onstart&&a.onstart():a.onend&&a.onend()}var hl=be('<p class="svelte-1wi0ic3">You are not fasting.</p>'),vl=be('<p class="svelte-1wi0ic3">You are fasting.</p> <!> <!> <p class="started svelte-1wi0ic3"> </p>',1),pl=be('<section class="svelte-1wi0ic3"><header class="svelte-1wi0ic3"><h3 class="svelte-1wi0ic3">Fasting</h3> <button type="button" class="svelte-1wi0ic3"><!></button></header> <article class="svelte-1wi0ic3"><!> <button class="primary svelte-1wi0ic3" type="button"> </button></article> <div class="graph svelte-1wi0ic3"><!></div> <footer class="svelte-1wi0ic3"><!> <!></footer></section>');function gl(o,r){Ze(r,!0);let a=ge(r,"activity",3,null),s=ge(r,"duration",3,0),l=ge(r,"hunger",3,5),f=ge(r,"levels",19,()=>[]),h=ge(r,"now",3,null),g=ge(r,"started",3,null),k=ge(r,"sun",3,null),C=ge(r,"volume",3,null),j=ge(r,"volumes",19,()=>[]),K=ge(r,"water",3,0);function P(ve){return ve===null?null:new Intl.DateTimeFormat(navigator.language,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(ve)}var V=pl(),H=z(V),R=Q(z(H),2);R.__click=function(...ve){var me;(me=r.onsettings)==null||me.apply(this,ve)};var Y=z(R);Qe(Y,{height:"20",icon:"material-symbols:person-outline-rounded",width:"20"}),N(R),N(H);var M=Q(H,2),_=z(M);{var I=ve=>{var me=hl();ce(ve,me)},A=ve=>{var me=vl(),Ue=Q(lt(me),2);il(Ue,{get duration(){return s()},get now(){return h()},get started(){return g()}});var Ce=Q(Ue,2);Pu(Ce,{get onchange(){return r.onduration},get value(){return s()}});var We=Q(Ce,2),at=z(We);N(We),Ke(ot=>xe(at,`Started ${ot??""}`),[()=>P(g())]),ce(ve,me)};rt(_,ve=>{g()===null?ve(I):ve(A,!1)})}var W=Q(_,2);W.__click=[dl,g,r];var q=z(W);N(W),N(M);var F=Q(M,2),se=z(F);Go(se,{get activity(){return a()},days:7,get onsun(){return r.onsun},get sun(){return k()},get water(){return C()}}),N(F);var pe=Q(F,2),le=z(pe);al(le,{get items(){return f()},get onchange(){return r.onhunger},get value(){return l()}});var Te=Q(le,2);fl(Te,{get items(){return j()},get onchange(){return r.onwater},get value(){return K()}}),N(pe),N(V),Ke(()=>xe(q,`${g()===null?"Start":"Stop"} fasting`)),ce(o,V),$e()}ct(["click"]);function ml(o,r,a,s){const l=new Date(parseInt(o.currentTarget.getAttribute("data-year")),parseInt(o.currentTarget.getAttribute("data-month")),parseInt(o.currentTarget.getAttribute("data-date")));l.getMonth()!==r().getMonth()&&r(new Date(l.getTime())),a(new Date(l.getTime())),s.onchange&&s.onchange(a())}var yl=be('<button type="button"> </button>'),bl=be('<section><header class="svelte-1ll096s"><h3 class="svelte-1ll096s"> </h3> <button type="button" class="svelte-1ll096s"><!></button> <button type="button" class="svelte-1ll096s"><!></button></header> <article class="svelte-1ll096s"><p class="svelte-1ll096s">Sun</p> <p class="svelte-1ll096s">Mon</p> <p class="svelte-1ll096s">Tue</p> <p class="svelte-1ll096s">Wed</p> <p class="svelte-1ll096s">Thu</p> <p class="svelte-1ll096s">Fri</p> <p class="svelte-1ll096s">Sat</p></article> <article class="svelte-1ll096s"></article></section>');function _l(o,r){Ze(r,!0);let a=ge(r,"display",23,()=>new Date),s=ge(r,"value",23,()=>new Date),l=He(()=>new Intl.DateTimeFormat(navigator.language,{month:"long",year:"numeric"}).format(a())),f=He(()=>{const M=[],_=new Date,I=new Date(a().getFullYear(),a().getMonth(),1);I.setDate(I.getDate()-I.getDay());for(let A=0;A<42;A++){const W={date:I.getDate(),month:I.getMonth(),year:I.getFullYear(),outside:!0,today:!1,selected:!1,after:!1};I.getFullYear()===a().getFullYear()&&I.getMonth()===a().getMonth()&&(W.outside=!1),I.getTime()>Date.now()&&(W.after=!0),I.getFullYear()===_.getFullYear()&&I.getMonth()===_.getMonth()&&I.getDate()===_.getDate()&&(W.today=!0),I.getFullYear()===s().getFullYear()&&I.getMonth()===s().getMonth()&&I.getDate()===s().getDate()&&(W.selected=!0),I.setDate(I.getDate()+1),M.push(W)}return M});function h(){let M=a().getMonth(),_=a().getFullYear();_=M===0?_-1:_,M=M===0?11:M-1,a(new Date(_,M,a().getDate()))}function g(){let M=a().getMonth(),_=a().getFullYear();_=M===11?_+1:_,M=(M+1)%12,a(new Date(_,M,a().getDate()))}var k=bl(),C=z(k),j=z(C),K=z(j,!0);N(j);var P=Q(j,2);P.__click=h;var V=z(P);Qe(V,{height:"24",icon:"material-symbols:navigate-before",width:"24"}),N(P);var H=Q(P,2);H.__click=g;var R=z(H);Qe(R,{height:"24",icon:"material-symbols:navigate-next",width:"24"}),N(H),N(C);var Y=Q(C,4);St(Y,21,()=>m(f),Dt,(M,_)=>{var I=yl();I.__click=[ml,a,s,r];let A;var W=z(I,!0);N(I),Ke(q=>{Xt(I,"data-year",m(_).year),Xt(I,"data-month",m(_).month),Xt(I,"data-date",m(_).date),I.disabled=m(_).after,A=Xe(I,1,"svelte-1ll096s",null,A,q),xe(W,m(_).date)},[()=>({outside:m(_).outside,today:m(_).today,selected:m(_).selected})]),ce(M,I)}),N(Y),N(k),Ke(()=>xe(K,m(l))),ce(o,k),$e()}ct(["click"]);function wl(o,r,a){const s=new Date(r().getTime());s.getHours()>=12?s.getHours()===12?s.setHours(23):s.setHours(s.getHours()-1):s.getHours()===0?s.setHours(11):s.setHours(s.getHours()-1),r(new Date(s.getTime())),a.onchange&&a.onchange(r())}function kl(o,r,a){const s=new Date(r().getTime());s.getHours()>=12?s.getHours()===23?s.setHours(12):s.setHours(s.getHours()+1):s.getHours()===11?s.setHours(0):s.setHours(s.getHours()+1),r(new Date(s.getTime())),a.onchange&&a.onchange(r())}function xl(o,r,a){const s=new Date(r().getTime());s.getHours()>=12&&s.setHours(s.getHours()-12),r(new Date(s.getTime())),a.onchange&&a.onchange(r())}function Dl(o,r,a){const s=new Date(r().getTime());s.getHours()<12&&s.setHours(s.getHours()+12),r(new Date(s.getTime())),a.onchange&&a.onchange(r())}function Sl(o,r,a){const s=new Date(r().getTime());s.getMinutes()===0?s.setMinutes(59):s.setMinutes(s.getMinutes()-1),r(new Date(s.getTime())),a.onchange&&a.onchange(r())}function Tl(o,r,a){const s=new Date(r().getTime());s.getMinutes()===59?s.setMinutes(0):s.setMinutes(s.getMinutes()+1),r(new Date(s.getTime())),a.onchange&&a.onchange(r())}var El=be('<article class="svelte-1bevvpj"><div class="time svelte-1bevvpj"><div class="dial svelte-1bevvpj"><button type="button" class="svelte-1bevvpj"><!></button> <p class="svelte-1bevvpj"> </p> <button type="button" class="svelte-1bevvpj"><!></button></div> <p class="svelte-1bevvpj">:</p> <div class="dial svelte-1bevvpj"><button type="button" class="svelte-1bevvpj"><!></button> <p class="svelte-1bevvpj"> </p> <button type="button" class="svelte-1bevvpj"><!></button></div></div> <div class="meridian svelte-1bevvpj"><button type="button">AM</button> <button type="button">PM</button></div></article>');function Cl(o,r){Ze(r,!0);let a=ge(r,"value",23,()=>new Date),s=He(()=>a().getHours()%12||12),l=He(()=>a().getMinutes().toString(10).padStart(2,"0")),f=He(()=>a().getHours()>=12?"PM":"AM");var h=El(),g=z(h),k=z(g),C=z(k);C.__click=[kl,a,r];var j=z(C);Qe(j,{height:"24",icon:"material-symbols:keyboard-arrow-up-rounded",width:"24"}),N(C);var K=Q(C,2),P=z(K,!0);N(K);var V=Q(K,2);V.__click=[wl,a,r];var H=z(V);Qe(H,{height:"24",icon:"material-symbols:keyboard-arrow-down-rounded",width:"24"}),N(V),N(k);var R=Q(k,4),Y=z(R);Y.__click=[Tl,a,r];var M=z(Y);Qe(M,{height:"24",icon:"material-symbols:keyboard-arrow-up-rounded",width:"24"}),N(Y);var _=Q(Y,2),I=z(_,!0);N(_);var A=Q(_,2);A.__click=[Sl,a,r];var W=z(A);Qe(W,{height:"24",icon:"material-symbols:keyboard-arrow-down-rounded",width:"24"}),N(A),N(R),N(g);var q=Q(g,2),F=z(q);F.__click=[xl,a,r];let se;var pe=Q(F,2);pe.__click=[Dl,a,r];let le;N(q),N(h),Ke((Te,ve)=>{xe(P,m(s)),xe(I,m(l)),se=Xe(F,1,"svelte-1bevvpj",null,se,Te),le=Xe(pe,1,"svelte-1bevvpj",null,le,ve)},[()=>({selected:m(f)==="AM"}),()=>({selected:m(f)==="PM"})]),ce(o,h),$e()}ct(["click"]);function Il(o,r){ie(r,"calendar")}function Ol(o,r){ie(r,"clock")}var Pl=be('<article class="svelte-8yzu2w"><header class="svelte-8yzu2w"><button type="button"><p class="svelte-8yzu2w"> </p> <p class="svelte-8yzu2w"> </p></button> <button type="button"><p class="svelte-8yzu2w"> </p></button></header> <!></article>');function _a(o,r){Ze(r,!0);let a=ge(r,"value",23,()=>new Date),s=ke("calendar");function l(F){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(F)}function f(F){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(F)}function h(F){F.setHours(a().getHours()),F.setMinutes(a().getMinutes()),F.setSeconds(a().getSeconds()),a(new Date(F.getTime())),r.onchange&&r.onchange(a())}function g(F){F.setFullYear(a().getFullYear()),F.getMonth(a().getMonth()),F.getDate(a().getDate()),a(new Date(F.getTime())),r.onchange&&r.onchange(a())}var k=Pl(),C=z(k),j=z(C);j.__click=[Il,s];let K;var P=z(j),V=z(P,!0);N(P);var H=Q(P,2),R=z(H,!0);N(H),N(j);var Y=Q(j,2);Y.__click=[Ol,s];let M;var _=z(Y),I=z(_,!0);N(_),N(Y),N(C);var A=Q(C,2);{var W=F=>{_l(F,{onchange:h,get value(){return a()}})},q=F=>{Cl(F,{onchange:g,get value(){return a()}})};rt(A,F=>{m(s)===null||m(s)==="calendar"?F(W):F(q,!1)})}N(k),Ke((F,se,pe,le)=>{K=Xe(j,1,"svelte-8yzu2w",null,K,F),xe(V,r.label),xe(R,se),M=Xe(Y,1,"svelte-8yzu2w",null,M,pe),xe(I,le)},[()=>({selected:m(s)==="calendar"}),()=>l(a()),()=>({selected:m(s)==="clock"}),()=>f(a())]),ce(o,k),$e()}ct(["click"]);function Al(o,r,a,s){r(),a(null),s.oncancel&&s.oncancel()}function Ml(o,r,a){r.ondelete&&r.ondelete(a().id)}function jl(o,r){const a=o.currentTarget.value.trim().length===0?null:o.currentTarget.value;r({...r(),notes:a})}function Kl(o,r,a){r.onsave&&r.onsave(a())}var Fl=be('<dialog class="svelte-13glclx"><h3 class="svelte-13glclx"> </h3> <!> <textarea placeholder="Notes" class="svelte-13glclx"></textarea> <footer class="svelte-13glclx"><button class="delete svelte-13glclx" type="button">Delete</button> <button class="cancel svelte-13glclx" type="button">Cancel</button> <button type="button" class="svelte-13glclx">Save</button></footer></dialog>');function ql(o,r){Ze(r,!0);let a=ge(r,"field",3,"started"),s=ge(r,"item",7,null),l=ge(r,"label",3,"Started"),f=ge(r,"title",3,"Edit Fast Start"),h=ke(void 0);function g(I){const A={...s()};A[a()]=new Date(I.getTime()),s({...A})}function k(){m(h).close()}function C(){m(h).showModal()}var j=Fl(),K=z(j),P=z(K,!0);N(K);var V=Q(K,2);{let I=He(()=>s()&&s().id&&s().id!==null?s()[a()]:new Date);_a(V,{get label(){return l()},onchange:g,get value(){return m(I)}})}var H=Q(V,2);es(H),H.__input=[jl,s];var R=Q(H,2),Y=z(R);Y.__click=[Ml,r,s];var M=Q(Y,2);M.__click=[Al,k,s,r];var _=Q(M,2);return _.__click=[Kl,r,s],N(R),N(j),ht(j,I=>ie(h,I),()=>m(h)),Ke(()=>{xe(P,f()),cs(H,s()&&s().id&&s().id!==null?s().notes:"")}),ce(o,j),$e({close:k,showModal:C})}ct(["input","click"]);var Rl=be('<article class="svelte-1vxkmhw"><p class="svelte-1vxkmhw">Your fasting history<br/>will be displayed here.</p></article>'),Bl=be('<li class="header svelte-1vxkmhw"><p class="svelte-1vxkmhw"> </p></li>'),Nl=(o,r,a)=>r(m(a).type,m(a).id),Hl=be('<p class="svelte-1vxkmhw">Started Fast</p> <p class="svelte-1vxkmhw"></p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Ll=be('<p class="svelte-1vxkmhw">Water</p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),zl=be('<p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"></p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Ul=be('<p class="svelte-1vxkmhw">Ended Fast</p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Yl=be('<li class="svelte-1vxkmhw"><button type="button" class="svelte-1vxkmhw"><!></button></li>'),Wl=be('<ul class="svelte-1vxkmhw"></ul>');function Vl(o,r){Ze(r,!0);let a=ge(r,"items",19,()=>[]);function s(P){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric",year:"numeric"}).format(P)}function l(P,V){const H=V.getTime()-P.getTime(),R=Math.floor(H/1e3),Y=Math.floor(R/3600),M=Math.floor(R%3600/60);return new Intl.DurationFormat(navigator.language,{style:"short",units:["hour","minute"]}).format({hours:Y,minutes:M})}function f(P){return new Intl.DateTimeFormat(navigator.language,{weekday:"long",month:"short",day:"numeric"}).format(P)}function h(P){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(P)}function g(P,V){r.onchange&&r.onchange(P,V)}var k=At(),C=lt(k);{var j=P=>{var V=Rl();ce(P,V)},K=P=>{var V=Wl();St(V,21,a,Dt,(H,R)=>{var Y=At(),M=lt(Y);{var _=A=>{var W=Bl(),q=z(W),F=z(q,!0);N(q),N(W),Ke(se=>xe(F,se),[()=>f(m(R).timed)]),ce(A,W)},I=A=>{var W=Yl(),q=z(W);q.__click=[Nl,g,R];var F=z(q);{var se=le=>{var Te=Hl(),ve=Q(lt(Te),4),me=z(ve,!0);N(ve);var Ue=Q(ve,2),Ce=z(Ue,!0);N(Ue),Ke((We,at)=>{xe(me,We),xe(Ce,at)},[()=>s(m(R).timed),()=>h(m(R).timed)]),ce(le,Te)},pe=le=>{var Te=At(),ve=lt(Te);{var me=Ce=>{var We=Ll(),at=Q(lt(We),2),ot=z(at);N(at);var it=Q(at,2),Le=z(it,!0);N(it);var te=Q(it,2),fe=z(te,!0);N(te),Ke((de,Oe)=>{xe(ot,`${m(R).volume??""} oz`),xe(Le,de),xe(fe,Oe)},[()=>s(m(R).timed),()=>h(m(R).timed)]),ce(Ce,We)},Ue=Ce=>{var We=At(),at=lt(We);{var ot=Le=>{var te=zl(),fe=lt(te),de=z(fe,!0);N(fe);var Oe=Q(fe,4),Ie=z(Oe,!0);N(Oe);var Ae=Q(Oe,2),Fe=z(Ae,!0);N(Ae),Ke((Ne,ae)=>{xe(de,m(R).level),xe(Ie,Ne),xe(Fe,ae)},[()=>s(m(R).timed),()=>h(m(R).timed)]),ce(Le,te)},it=Le=>{var te=At(),fe=lt(te);{var de=Oe=>{var Ie=Ul(),Ae=Q(lt(Ie),2),Fe=z(Ae,!0);N(Ae);var Ne=Q(Ae,2),ae=z(Ne,!0);N(Ne);var st=Q(Ne,2),ut=z(st,!0);N(st),Ke((De,vt,pt)=>{xe(Fe,De),xe(ae,vt),xe(ut,pt)},[()=>l(m(R).started,m(R).ended),()=>s(m(R).timed),()=>h(m(R).timed)]),ce(Oe,Ie)};rt(fe,Oe=>{m(R).type==="end"&&Oe(de)},!0)}ce(Le,te)};rt(at,Le=>{m(R).type==="hunger"?Le(ot):Le(it,!1)},!0)}ce(Ce,We)};rt(ve,Ce=>{m(R).type==="water"?Ce(me):Ce(Ue,!1)},!0)}ce(le,Te)};rt(F,le=>{m(R).type==="start"?le(se):le(pe,!1)})}N(q),N(W),ce(A,W)};rt(M,A=>{m(R).type==="header"?A(_):A(I,!1)})}ce(H,Y)}),N(V),ce(P,V)};rt(C,P=>{a().length===0?P(j):P(K,!1)})}ce(o,k),$e()}ct(["click"]);var Gl=be('<section class="svelte-1moll0f"><header class="svelte-1moll0f"><h3 class="svelte-1moll0f">Hours</h3></header> <div class="svelte-1moll0f"><!></div> <article class="svelte-1moll0f"><!></article></section>');function Ql(o,r){let a=ge(r,"activity",3,null),s=ge(r,"history",19,()=>[]);ge(r,"levels",19,()=>[]);let l=ge(r,"sun",3,null);var f=Gl(),h=Q(z(f),2),g=z(h);Go(g,{get activity(){return a()},days:7,get onsun(){return r.onsun},get sun(){return l()},get water(){return r.volume}}),N(h);var k=Q(h,2),C=z(k);Vl(C,{get items(){return s()},get onchange(){return r.onchange}}),N(k),N(f),ce(o,f)}function Jl(o,r,a,s){const l=m(r).getBoundingClientRect();m(a).style.width=l.width-2+"px",ie(s,!m(s))}var Xl=(o,r,a)=>r(m(a)),Zl=be('<li><button type="button" class="svelte-148k8wo"><span class="svelte-148k8wo"> </span> <!></button></li>'),$l=be('<label class="svelte-148k8wo"><button tabindex="-1" type="button" class="svelte-148k8wo"><span class="svelte-148k8wo"> </span> <!></button> <ul></ul></label>');function ec(o,r){Ze(r,!0);let a=ge(r,"items",19,()=>[]),s=ge(r,"value",7,0),l=ke(!1),f=ke(void 0),h=ke(void 0),g=He(()=>a().length===0?"":a().find(_=>_.value===s()).label);sn(()=>(document.addEventListener("click",k),()=>{document.removeEventListener("click",k)}));function k(M){!m(f).contains(M.target)&&!m(h).contains(M.target)&&ie(l,!1)}function C(M){s(M.value),ie(l,!1),r.onchange&&r.onchange(M.value)}var j=$l(),K=z(j);K.__click=[Jl,f,h,l];var P=z(K),V=z(P,!0);N(P);var H=Q(P,2);Qe(H,{height:"20",icon:"material-symbols:keyboard-arrow-down-rounded",width:"20"}),N(K),ht(K,M=>ie(f,M),()=>m(f));var R=Q(K,2);let Y;St(R,21,a,Dt,(M,_)=>{var I=Zl();let A;var W=z(I);W.__click=[Xl,C,_];var q=z(W),F=z(q,!0);N(q);var se=Q(q,2);{var pe=le=>{Qe(le,{height:"20",icon:"material-symbols:check-rounded",width:"20"})};rt(se,le=>{m(_).value===s()&&le(pe)})}N(W),N(I),Ke(le=>{A=Xe(I,1,"svelte-148k8wo",null,A,le),xe(F,m(_).label)},[()=>({selected:s()===m(_).value})]),ce(M,I)}),N(R),ht(R,M=>ie(h,M),()=>m(h)),N(j),Ke(M=>{xe(V,m(g)),Y=Xe(R,1,"svelte-148k8wo",null,Y,M)},[()=>({open:m(l)})]),ce(o,j),$e()}ct(["click"]);function tc(o,r,a,s){r(),a(null),s.oncancel&&s.oncancel()}function nc(o,r,a){r.ondelete&&r.ondelete(a().id)}function rc(o,r,a){r.onsave&&r.onsave(a())}var ac=be('<dialog class="svelte-1hqchgg"><h3 class="svelte-1hqchgg">Edit Hunger</h3> <!> <!> <footer class="svelte-1hqchgg"><button class="delete svelte-1hqchgg" type="button">Delete</button> <button class="cancel svelte-1hqchgg" type="button">Cancel</button> <button type="button" class="svelte-1hqchgg">Save</button></footer></dialog>');function oc(o,r){Ze(r,!0);let a=ge(r,"item",7,null),s=ge(r,"levels",19,()=>[]),l=ke(void 0),f=He(()=>a()&&a().level&&a().level!==null?a().level:5);function h(M){const _=new Date(M.getTime());a({...a(),created:_})}function g(M){const _=M;a({...a(),level:_})}function k(){m(l).close(),a(null)}function C(){m(l).showModal()}var j=ac(),K=Q(z(j),2);ec(K,{get items(){return s()},onchange:g,get value(){return m(f)}});var P=Q(K,2);{let M=He(()=>a()&&a().created?a().created:new Date);_a(P,{label:"Checked",onchange:h,get value(){return m(M)}})}var V=Q(P,2),H=z(V);H.__click=[nc,r,a];var R=Q(H,2);R.__click=[tc,k,a,r];var Y=Q(R,2);return Y.__click=[rc,r,a],N(V),N(j),ht(j,M=>ie(l,M),()=>m(l)),ce(o,j),$e({close:k,showModal:C})}ct(["click"]);function ic(o,r,a){r()!==0&&(r(0),a.onchange&&a.onchange(r()))}function sc(o,r,a){r()!==1&&(r(1),a.onchange&&a.onchange(r()))}var uc=be('<ul class="svelte-tu3q0a"><li><button type="button">Fasting</button></li> <li><button type="button">Hours</button></li></ul>');function lc(o,r){Ze(r,!0);let a=ge(r,"value",7,0);var s=uc(),l=z(s),f=z(l);let h;f.__click=[ic,a,r],N(l);var g=Q(l,2),k=z(g);let C;k.__click=[sc,a,r],N(g),N(s),Ke((j,K)=>{h=Xe(f,1,"fasting svelte-tu3q0a",null,h,j),C=Xe(k,1,"hours svelte-tu3q0a",null,C,K)},[()=>({selected:a()===0}),()=>({selected:a()===1})]),ce(o,s),$e()}ct(["click"]);function cc(o,r){r()}var fc=be('<dialog class="svelte-7gsj7f"><figure class="svelte-7gsj7f"><button type="button" class="svelte-7gsj7f"><!></button> <div class="svelte-7gsj7f"><h3 class="svelte-7gsj7f">Fasting Hours</h3> <p class="svelte-7gsj7f">Want more features?</p> <ul class="svelte-7gsj7f"><li class="svelte-7gsj7f">Data backup</li> <li class="svelte-7gsj7f">Sync across devices</li> <li class="svelte-7gsj7f">Export data</li></ul> <p class="svelte-7gsj7f">Send me a message with the login email address that you would like to use. The first ten messages get a lifetime account for <span class="svelte-7gsj7f">FREE</span>.</p></div></figure> <article class="svelte-7gsj7f"></article></dialog>');function dc(o,r){Ze(r,!0);let a=ke(void 0);function s(){m(a).close()}function l(){m(a).showModal()}var f=fc(),h=z(f),g=z(h);g.__click=[cc,s];var k=z(g);return Qe(k,{height:"24",icon:"material-symbols:cancel-rounded",width:"24"}),N(g),Fn(2),N(h),Fn(2),N(f),ht(f,C=>ie(a,C),()=>m(a)),ce(o,f),$e({close:s,showModal:l})}ct(["click"]);function hc(o,r,a,s){const l=m(r).getBoundingClientRect();m(a).style.width=l.width-2+"px",ie(s,!m(s))}var vc=(o,r,a)=>r(m(a)),pc=be('<li><button type="button" class="svelte-148k8wo"><span class="svelte-148k8wo"> </span> <span class="svelte-148k8wo"> </span> <!></button></li>'),gc=be('<label class="svelte-148k8wo"><button tabindex="-1" type="button" class="svelte-148k8wo"><span class="svelte-148k8wo"> </span> <span class="svelte-148k8wo"> </span> <!></button> <ul></ul></label>');function mc(o,r){Ze(r,!0);let a=ge(r,"items",19,()=>[]),s=ge(r,"units",3,"oz"),l=ge(r,"value",7,0),f=ke(!1),h=ke(void 0),g=ke(void 0),k=He(()=>a().length===0?"":a().find(W=>W.value===l()).label);sn(()=>(document.addEventListener("click",C),()=>{document.removeEventListener("click",C)}));function C(A){!m(h).contains(A.target)&&!m(g).contains(A.target)&&ie(f,!1)}function j(A){l(A.value),ie(f,!1),r.onchange&&r.onchange(A.value)}var K=gc(),P=z(K);P.__click=[hc,h,g,f];var V=z(P),H=z(V,!0);N(V);var R=Q(V,2),Y=z(R);N(R);var M=Q(R,2);Qe(M,{height:"20",icon:"material-symbols:keyboard-arrow-down-rounded",width:"20"}),N(P),ht(P,A=>ie(h,A),()=>m(h));var _=Q(P,2);let I;St(_,21,a,Dt,(A,W)=>{var q=pc();let F;var se=z(q);se.__click=[vc,j,W];var pe=z(se),le=z(pe,!0);N(pe);var Te=Q(pe,2),ve=z(Te);N(Te);var me=Q(Te,2);{var Ue=Ce=>{Qe(Ce,{height:"20",icon:"material-symbols:check-rounded",width:"20"})};rt(me,Ce=>{m(W).value===l()&&Ce(Ue)})}N(se),N(q),Ke(Ce=>{F=Xe(q,1,"svelte-148k8wo",null,F,Ce),xe(le,m(W).label),xe(ve,`${m(W).value??""} oz`)},[()=>({selected:l()===m(W).value})]),ce(A,q)}),N(_),ht(_,A=>ie(g,A),()=>m(g)),N(K),Ke(A=>{xe(H,m(k)),xe(Y,`${l()??""} ${s()??""}`),I=Xe(_,1,"svelte-148k8wo",null,I,A)},[()=>({open:m(f)})]),ce(o,K),$e()}ct(["click"]);function yc(o,r,a,s){r(),a(null),s.oncancel&&s.oncancel()}function bc(o,r,a){r.ondelete&&r.ondelete(a().id)}function _c(o,r,a){r.onsave&&r.onsave(a())}var wc=be('<dialog class="svelte-1kewhwu"><h3 class="svelte-1kewhwu">Edit Water</h3> <!> <!> <footer class="svelte-1kewhwu"><button class="delete svelte-1kewhwu" type="button">Delete</button> <button class="cancel svelte-1kewhwu" type="button">Cancel</button> <button type="button" class="svelte-1kewhwu">Save</button></footer></dialog>');function kc(o,r){Ze(r,!0);let a=ge(r,"item",7,null),s=ge(r,"options",19,()=>[]),l=ge(r,"units",3,"oz"),f=ke(void 0),h=He(()=>a()&&a().volume&&a().volume!==null?a().volume:8);function g(_){const I=new Date(_.getTime());a({...a(),created:I})}function k(_){const I=_;a({...a(),volume:I})}function C(){m(f).close(),a(null)}function j(){m(f).showModal()}var K=wc(),P=Q(z(K),2);mc(P,{get items(){return s()},onchange:k,get units(){return l()},get value(){return m(h)}});var V=Q(P,2);{let _=He(()=>a()&&a().created?a().created:new Date);_a(V,{label:"Finished",onchange:g,get value(){return m(_)}})}var H=Q(V,2),R=z(H);R.__click=[bc,r,a];var Y=Q(R,2);Y.__click=[yc,C,a,r];var M=Q(Y,2);return M.__click=[_c,r,a],N(H),N(K),ht(K,_=>ie(f,_),()=>m(f)),ce(o,K),$e({close:C,showModal:j})}ct(["click"]);var xc=be('<main class="svelte-odvko0"><header class="svelte-odvko0"><span></span> <!> <button type="button" class="svelte-odvko0"><!></button></header> <section class="svelte-odvko0"><article class="svelte-odvko0"><!></article> <article class="svelte-odvko0"><!></article></section></main> <!> <!> <!> <!>',1);function Bc(o,r){Ze(r,!0);const a=new ms,s=_s;let l=0,f=ke(null),h=ke(0),g=ke(Zr([])),k=ke(void 0),C=ke("started"),j=ke(null),K=ke("Started"),P=ke("Edit Fast Started"),V=ke(void 0),H=ke(null),R=ke(5),Y=ke(null),M=ke(0),_=ke(void 0),I=ke(null),A=ke(null),W=ke(null),q=ke(0),F=ke(void 0),se=ke(null),pe=Zr([{value:1,label:"Starving"},{value:2,label:"Very hungry"},{value:3,label:"Pretty hungry"},{value:4,label:"Snacky"},{value:5,label:"Satisfied"},{value:6,label:"Slightly full"},{value:7,label:"Uncomfortable"},{value:8,label:"Stuffed"},{value:9,label:"Stomach aches"},{value:10,label:"Sick"}]),le=Zr([{value:8,label:"Cup"},{value:12,label:"Can"},{value:16,label:"Bottle"},{value:20,label:"Medium"},{value:30,label:"Gatorade"},{value:32,label:"Big Q"},{value:44,label:"QT Large"},{value:52,label:"Extra Large"}]);sn(()=>{let ne=window.localStorage.getItem("fh_screen");ie(M,ne===null?0:parseInt(ne),!0);let he=window.localStorage.getItem("fh_duration");ie(h,he===null?0:parseInt(he),!0);const ye=window.localStorage.getItem("fh_latitude");ye!==null&&ye!=="DENIED"&&We(),setInterval(()=>{if(l===60){ve();const Me=window.localStorage.getItem("fh_latitude");Me!==null&&Me!=="DENIED"&&We(),l=0}else l=l+1;m(I)!==null&&ie(Y,Date.now(),!0)},1e3),Ce(),ve(),Ue(),at(),me()});function Te(ne){const he=ne.getFullYear(),ye=String(ne.getMonth()+1).padStart(2,"0"),Me=String(ne.getDate()).padStart(2,"0");return`${he}-${ye}-${Me}`}function ve(ne=7){a.browseHistory().then(he=>{const ye={},Me=new Date,Pe=new Date(Me.getFullYear(),Me.getMonth(),Me.getDate()),Re=new Date(Pe);if(Re.setDate(Pe.getDate()-(ne-1)),!Array.isArray(he)||he.length===0){const Ve=new Date(Re);for(;Ve<=Pe;){const X=Te(Ve);ye[X]=Array(24).fill(0),Ve.setDate(Ve.getDate()+1)}}else{for(const X of he){const Zt=new Date(X.started),Hn=X.ended?new Date(X.ended):new Date,un=new Date(Zt.getTime());un.setSeconds(0,0);const _n=new Date(Hn.getTime());_n.setSeconds(0,0);let Ot=new Date(un);for(;Ot<_n;){const wn=Te(Ot),Ln=new Date(Ot.getFullYear(),Ot.getMonth(),Ot.getDate());if(Ln>=Re&&Ln<=Pe){const Ut=Ot.getHours();ye[wn]||(ye[wn]=Array(24).fill(0)),ye[wn][Ut]+=1}Ot.setMinutes(Ot.getMinutes()+1)}}for(const X in ye)ye[X]=ye[X].map(Zt=>+(Math.min(Zt,60)/60).toFixed(6));const Ve=new Date(Re);for(;Ve<=Pe;){const X=Te(Ve);ye[X]||(ye[X]=Array(24).fill(0)),Ve.setDate(Ve.getDate()+1)}}const Ee=Object.keys(ye).sort((Ve,X)=>X.localeCompare(Ve)),$={};for(const Ve of Ee)$[Ve]=ye[Ve];const Et=Array(24).fill(0);for(const Ve of Array(24).keys())for(const X of Ee)Et[Ve]+=$[X][Ve];const Bt=Et.map(Ve=>+(Ve/ne).toFixed(6));ie(f,{daily:$,average:Bt},!0)})}function me(){a.browseHistory().then(ne=>{let he=null,ye=structuredClone(ne);ye.forEach(Pe=>{Pe.type="start",Pe.timed=new Date(Pe.started.getTime())});let Me=structuredClone(ne);Me=Me.filter(Pe=>Pe.ended!==null),Me.forEach(Pe=>{Pe.type="end",Pe.timed=new Date(Pe.ended.getTime())}),ye=ye.concat(Me),he=[...ye],a.browseHunger().then(Pe=>(Pe=Pe.map(Re=>{const Ee=pe.find($=>$.value===Re.level);return Re.level=Ee.label,Re.timed=new Date(Re.created.getTime()),Re}),he=he.concat(Pe),a.browseWater())).then(Pe=>{Pe=Pe.map(Ee=>(Ee.timed=new Date(Ee.created.getTime()),Ee)),he=he.concat(Pe),he.sort((Ee,$)=>Ee.timed.getTime()<$.timed.getTime()?1:Ee.timed.getTime()>$.timed.getTime()?-1:0);const Re=[];for(let Ee=0;Ee<he.length;Ee++){const $=new Date(he[Ee].timed.getTime());$.setHours(23),$.setMinutes(59),$.setSeconds(59),$.setMilliseconds(999),Re.length===0?Re.push({type:"header",timed:$}):(Re[Re.length-1].timed.getDate()!==he[Ee].timed.getDate()||Re[Re.length-1].timed.getMonth()!==he[Ee].timed.getMonth()||Re[Re.length-1].timed.getFullYear()!==he[Ee].timed.getFullYear())&&Re.push({type:"header",timed:$})}he=he.concat(Re),he.sort((Ee,$)=>Ee.timed.getTime()<$.timed.getTime()?1:Ee.timed.getTime()>$.timed.getTime()?-1:0),ie(g,[...he],!0)})})}function Ue(){a.browseHunger(!0).then(ne=>{if(ne===null)ie(R,5);else{const he=new Date,ye=new Date(ne.created);he.getFullYear()===ye.getFullYear()&&he.getMonth()===ye.getMonth()&&he.getDate()===ye.getDate()?ie(R,ne.level,!0):ie(R,5)}})}function Ce(){a.browseHistory().then(ne=>{ne.length===0&&(ie(I,null),ie(Y,null)),ne.sort((he,ye)=>he.started.getTime()>ye.started.getTime()?-1:he.started.getTime()<ye.started.getTime()?1:0),ne[0].ended===null&&(ie(I,new Date(ne[0].started.getTime()),!0),ie(Y,Date.now(),!0))})}function We(){const ne=parseFloat(window.localStorage.getItem("fh_latitude")),he=parseFloat(window.localStorage.getItem("fh_longitude")),ye=new Date;let Me=null,Pe=s.getTimes(ye,ne,he),Re=null;if(Date.now()<Pe.sunrise.getTime())Re=new Date(Pe.sunrise.getTime()),Me="material-symbols:wb-sunny-outline-rounded";else if(Date.now()>Pe.sunrise.getTime()&&Date.now()<Pe.sunset.getTime())Re=new Date(Pe.sunset.getTime()),Me="material-symbols:moon-stars-outline-rounded";else{const Ee=new Date;Ee.setDate(ye.getDate()+1),Pe=s.getTimes(Ee,ne,he),Re=new Date(Pe.sunrise.getTime()),Me="material-symbols:wb-sunny-outline-rounded"}ie(A,{icon:Me,timing:Re},!0)}function at(){a.browseWater(!0).then(ne=>{const he=ne.reduce((ye,Me)=>ye+Me.volume,0);return ie(q,he,!0),a.browseWater()}).then(ne=>{const he=new Date;he.setHours(0,0,0,0);const ye={};for(const{created:Ee,volume:$}of ne){const Et=ot(Ee);ye[Et]=(ye[Et]||0)+$}const Me=[];for(let Ee=0;Ee<7;Ee++){const $=new Date(he.getTime());$.setDate(he.getDate()-Ee);const Et=ot($);Me.push({created:new Date($.getTime()),volume:ye[Et]||0})}const Re=Me.reduce((Ee,{volume:$})=>Ee+$,0)/Me.length;ie(W,{average:Re,daily:[...Me]},!0)})}function ot(ne){const he=ne.getFullYear(),ye=String(ne.getMonth()+1).padStart(2,"0"),Me=String(ne.getDate()).padStart(2,"0");return`${he}-${ye}-${Me}`}function it(ne){ie(h,ne,!0),window.localStorage.setItem("fh_duration",m(h))}function Le(){ie(I,null),ie(Y,null),a.browseHistoryByEnd().then(ne=>(ne.ended=new Date,a.editHistory(ne))).then(()=>{Ce(),ve(),me()})}function te(){a.addHistory().then(()=>{Ce(),ve(),me()})}function fe(ne){m(I)!==null&&m(j).started.getTime()===m(I).getTime()&&(ie(I,null),ie(Y,null)),a.deleteHistory(ne).then(()=>{m(k).close(),ie(j,null),Ce(),ve(),me()})}function de(ne){a.editHistory(ne).then(()=>{m(k).close(),ie(j,null),Ce(),ve(),me()})}function Oe(ne,he){ne==="start"?(ie(C,"started"),ie(K,"Started"),ie(P,"Edit Fast Started"),a.readHistory(he).then(ye=>{ie(j,{...ye},!0),m(k).showModal()})):ne==="end"?(ie(C,"ended"),ie(K,"Ended"),ie(P,"Edit Fast Ended"),a.readHistory(he).then(ye=>{ie(j,{...ye},!0),m(k).showModal()})):ne==="water"?a.readWater(he).then(ye=>{ie(se,{...ye},!0),m(F).showModal()}):ne==="hunger"&&a.readHunger(he).then(ye=>{ie(H,{...ye},!0),m(V).showModal()})}function Ie(ne){a.addHunger(ne).then(he=>{Ue(),me()})}function Ae(ne){a.deleteHunger(ne).then(()=>{m(V).close(),ie(H,null),Ue(),me()})}function Fe(ne){a.editHunger(ne).then(he=>{m(V).close(),ie(H,null),Ue(),me()})}function Ne(ne){m(M)!==ne&&(window.localStorage.setItem("fh_screen",ne),ie(M,ne,!0))}function ae(){m(_).showModal()}function st(){confirm("Sunrise/set (important for religious observations) needs to know your location? Enable location detection?")?navigator.geolocation.getCurrentPosition(he=>{window.localStorage.setItem("fh_latitude",he.coords.latitude),window.localStorage.setItem("fh_longitude",he.coords.longitude),We()}):window.localStorage.setItem("fh_latitude","DENIED")}function ut(ne){a.addWater(ne).then(he=>{at(),me()})}function De(ne){a.deleteWater(ne).then(()=>{m(F).close(),ie(se,null),at(),me()})}function vt(ne){a.editWater(ne).then(he=>{m(F).close(),ie(se,null),at(),me()})}var pt=xc(),et=lt(pt),It=z(et),wt=Q(z(It),2);lc(wt,{onchange:Ne,get value(){return m(M)}});var gt=Q(wt,2);gt.__click=ae;var Tt=z(gt);Qe(Tt,{height:"20",icon:"material-symbols:person-outline-rounded",width:"20"}),N(gt),N(It);var xt=Q(It,2),ze=z(xt),Rt=z(ze);gl(Rt,{get activity(){return m(f)},get duration(){return m(h)},get hunger(){return m(R)},get levels(){return pe},get now(){return m(Y)},onduration:it,onend:Le,onhunger:Ie,onsettings:ae,onstart:te,onsun:st,onwater:ut,get started(){return m(I)},get sun(){return m(A)},get volume(){return m(W)},get volumes(){return le},get water(){return m(q)}}),N(ze);var Lt=Q(ze,2),Nn=z(Lt);Ql(Nn,{get activity(){return m(f)},get history(){return m(g)},get levels(){return pe},onchange:Oe,onsun:st,get sun(){return m(A)},get volume(){return m(W)}}),N(Lt),N(xt),N(et);var zt=Q(et,2);ht(ql(zt,{get field(){return m(C)},get item(){return m(j)},get label(){return m(K)},ondelete:fe,onsave:de,get title(){return m(P)}}),ne=>ie(k,ne,!0),()=>m(k));var Mt=Q(zt,2);ht(oc(Mt,{get item(){return m(H)},get levels(){return pe},ondelete:Ae,onsave:Fe}),ne=>ie(V,ne,!0),()=>m(V));var jt=Q(Mt,2);ht(kc(jt,{get item(){return m(se)},ondelete:De,onsave:vt,get options(){return le}}),ne=>ie(F,ne,!0),()=>m(F));var bn=Q(jt,2);ht(dc(bn,{}),ne=>ie(_,ne,!0),()=>m(_)),Ke(()=>Xt(xt,"data-screen",m(M)===0?"fasting":"hours")),ce(o,pt),$e()}ct(["click"]);export{Bc as component};
