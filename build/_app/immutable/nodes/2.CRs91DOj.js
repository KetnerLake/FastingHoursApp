var Bi=Object.defineProperty;var mo=a=>{throw TypeError(a)};var Hi=(a,n,r)=>n in a?Bi(a,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[n]=r;var yo=(a,n,r)=>Hi(a,typeof n!="symbol"?n+"":n,r),ha=(a,n,r)=>n.has(a)||mo("Cannot "+r);var Qt=(a,n,r)=>(ha(a,n,"read from private field"),r?r.call(a):n.get(a)),zn=(a,n,r)=>n.has(a)?mo("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(a):n.set(a,r),va=(a,n,r,i)=>(ha(a,n,"write to private field"),i?i.call(a,r):n.set(a,r),r),bo=(a,n,r)=>(ha(a,n,"access private method"),r);import"../chunks/Bzak7iHL.js";import{i as Li,c as zi,d as ut,n as Wi,a as Ui,o as Jt,b as Yi,s as ke}from"../chunks/Dk5_QscG.js";import{T as Aa,aB as zo,aC as Vi,j as Wo,b as ja,g as Dr,h as bt,Y as Qn,d as Da,y as d,F as Gi,r as Qi,H as Ji,e as _o,i as Jn,o as bn,Z as Uo,a1 as Xi,k as Xn,m as Zi,l as In,aD as wo,ax as $i,aE as ko,a5 as Yo,aF as jr,n as Vo,p as es,aG as Fr,aH as ts,aI as ga,aJ as Zn,$ as Go,aK as ns,a4 as rs,aL as as,B as Qo,aM as Jo,u as os,aN as is,at as Oe,aO as ss,a2 as us,a0 as ls,a9 as xo,aP as cs,q as Fa,aQ as fs,aR as ds,aS as hs,aT as vs,aU as gs,aV as ps,aW as ms,aX as ys,aY as bs,aZ as _s,a_ as ws,U as ks,a$ as xs,b0 as Ds,v as Xo,t as Ss,b1 as Ts,a7 as tt,c as Dt,f as et,a as ue,aa as nt,A as X,ay as he,az as Ee,b2 as Cs,b3 as tr,au as R,av as M,as as be,aw as V,b4 as On,b5 as Zo,z as xr}from"../chunks/LLOCdjZd.js";import{i as Qe,r as Es,p as ge,b as ot}from"../chunks/CqLbJBhs.js";const Is=[];function Wn(a,n=!1,r=!1){return Sr(a,new Map,"",Is,null,r)}function Sr(a,n,r,i,l=null,f=!1){if(typeof a=="object"&&a!==null){var h=n.get(a);if(h!==void 0)return h;if(a instanceof Map)return new Map(a);if(a instanceof Set)return new Set(a);if(Aa(a)){var g=Array(a.length);n.set(a,g),l!==null&&n.set(l,g);for(var y=0;y<a.length;y+=1){var x=a[y];y in a&&(g[y]=Sr(x,n,r,i,null,f))}return g}if(zo(a)===Vi){g={},n.set(a,g),l!==null&&n.set(l,g);for(var A in a)g[A]=Sr(a[A],n,r,i,null,f);return g}if(a instanceof Date)return structuredClone(a);if(typeof a.toJSON=="function"&&!f)return Sr(a.toJSON(),n,r,i,a)}if(a instanceof EventTarget)return a;try{return structuredClone(a)}catch{return a}}function Ct(a,n){return n}function Os(a,n,r){for(var i=a.items,l=[],f=n.length,h=0;h<f;h++)ns(n[h].e,l,!0);var g=f>0&&l.length===0&&r!==null;if(g){var y=r.parentNode;rs(y),y.append(r),i.clear(),zt(a,n[0].prev,n[f-1].next)}as(l,()=>{for(var x=0;x<f;x++){var A=n[x];g||(i.delete(A.k),zt(a,A.prev,A.next)),Zn(A.e,!g)}})}function Et(a,n,r,i,l,f=null){var h=a,g={flags:n,items:new Map,first:null},y=(n&Jo)!==0;if(y){var x=a;h=bt?Dr(Qn(x)):x.appendChild(Wo())}bt&&Da();var A=null,P=!1,H=new Map,W=Gi(()=>{var N=r();return Aa(N)?N:N==null?[]:Yo(N)}),q,Y;function F(){Ms(Y,q,g,H,h,l,n,i,r),f!==null&&(q.length===0?A?Vo(A):A=Xn(()=>f(h)):A!==null&&es(A,()=>{A=null}))}ja(()=>{Y??(Y=Qo),q=d(W);var N=q.length;if(P&&N===0)return;P=N===0;let b=!1;if(bt){var I=Qi(h)===Ji;I!==(N===0)&&(h=_o(),Dr(h),Jn(!1),b=!0)}if(bt){for(var S=null,z,j=0;j<N;j++){if(bn.nodeType===Uo&&bn.data===Xi){h=bn,b=!0,Jn(!1);break}var B=q[j],oe=i(B,j);z=Sa(bn,g,S,null,B,oe,j,l,n,r),g.items.set(oe,z),S=z}N>0&&Dr(_o())}if(bt)N===0&&f&&(A=Xn(()=>f(h)));else if(Zi()){var ie=new Set,$=In;for(j=0;j<N;j+=1){B=q[j],oe=i(B,j);var fe=g.items.get(oe)??H.get(oe);fe?(n&(Fr|jr))!==0&&$o(fe,B,j,n):(z=Sa(null,g,null,null,B,oe,j,l,n,r,!0),H.set(oe,z)),ie.add(oe)}for(const[_e,xe]of g.items)ie.has(_e)||$.skipped_effects.add(xe.e);$.add_callback(F)}else F();b&&Jn(!0),d(W)}),bt&&(h=bn)}function Ms(a,n,r,i,l,f,h,g,y){var Ne,qe,te,G;var x=(h&is)!==0,A=(h&(Fr|jr))!==0,P=n.length,H=r.items,W=r.first,q=W,Y,F=null,N,b=[],I=[],S,z,j,B;if(x)for(B=0;B<P;B+=1)S=n[B],z=g(S,B),j=H.get(z),j!==void 0&&((Ne=j.a)==null||Ne.measure(),(N??(N=new Set)).add(j));for(B=0;B<P;B+=1){if(S=n[B],z=g(S,B),j=H.get(z),j===void 0){var oe=i.get(z);if(oe!==void 0){i.delete(z),H.set(z,oe);var ie=F?F.next:q;zt(r,F,oe),zt(r,oe,ie),pa(oe,ie,l),F=oe}else{var $=q?q.e.nodes_start:l;F=Sa($,r,F,F===null?r.first:F.next,S,z,B,f,h,y)}H.set(z,F),b=[],I=[],q=F.next;continue}if(A&&$o(j,S,B,h),(j.e.f&ga)!==0&&(Vo(j.e),x&&((qe=j.a)==null||qe.unfix(),(N??(N=new Set)).delete(j))),j!==q){if(Y!==void 0&&Y.has(j)){if(b.length<I.length){var fe=I[0],_e;F=fe.prev;var xe=b[0],Ge=b[b.length-1];for(_e=0;_e<b.length;_e+=1)pa(b[_e],fe,l);for(_e=0;_e<I.length;_e+=1)Y.delete(I[_e]);zt(r,xe.prev,Ge.next),zt(r,F,xe),zt(r,Ge,fe),q=fe,F=Ge,B-=1,b=[],I=[]}else Y.delete(j),pa(j,q,l),zt(r,j.prev,j.next),zt(r,j,F===null?r.first:F.next),zt(r,F,j),F=j;continue}for(b=[],I=[];q!==null&&q.k!==z;)(q.e.f&ga)===0&&(Y??(Y=new Set)).add(q),I.push(q),q=q.next;if(q===null)continue;j=q}b.push(j),F=j,q=j.next}if(q!==null||Y!==void 0){for(var Ke=Y===void 0?[]:Yo(Y);q!==null;)(q.e.f&ga)===0&&Ke.push(q),q=q.next;var De=Ke.length;if(De>0){var Ie=(h&Jo)!==0&&P===0?l:null;if(x){for(B=0;B<De;B+=1)(te=Ke[B].a)==null||te.measure();for(B=0;B<De;B+=1)(G=Ke[B].a)==null||G.fix()}Os(r,Ke,Ie)}}x&&os(()=>{var Z;if(N!==void 0)for(j of N)(Z=j.a)==null||Z.apply()}),a.first=r.first&&r.first.e,a.last=F&&F.e;for(var Le of i.values())Zn(Le.e);i.clear()}function $o(a,n,r,i){(i&Fr)!==0&&wo(a.v,n),(i&jr)!==0?wo(a.i,r):a.i=r}function Sa(a,n,r,i,l,f,h,g,y,x,A){var P=(y&Fr)!==0,H=(y&ts)===0,W=P?H?$i(l,!1,!1):ko(l):l,q=(y&jr)===0?h:ko(h),Y={i:q,v:W,k:f,a:null,e:null,prev:r,next:i};try{if(a===null){var F=document.createDocumentFragment();F.append(a=Wo())}return Y.e=Xn(()=>g(a,W,q,x),bt),Y.e.prev=r&&r.e,Y.e.next=i&&i.e,r===null?A||(n.first=Y):(r.next=Y,r.e.next=Y.e),i!==null&&(i.prev=Y,i.e.prev=Y.e),Y}finally{}}function pa(a,n,r){for(var i=a.next?a.next.e.nodes_start:r,l=n?n.e.nodes_start:r,f=a.e.nodes_start;f!==null&&f!==i;){var h=Go(f);l.before(f),f=h}}function zt(a,n,r){n===null?a.first=r:(n.next=r,n.e.next=r&&r.e),r!==null&&(r.prev=n,r.e.prev=n&&n.e)}function Ps(a,n,r=!1,i=!1,l=!1){var f=a,h="";Oe(()=>{var g=Qo;if(h===(h=n()??"")){bt&&Da();return}if(g.nodes_start!==null&&(ss(g.nodes_start,g.nodes_end),g.nodes_start=g.nodes_end=null),h!==""){if(bt){bn.data;for(var y=Da(),x=y;y!==null&&(y.nodeType!==Uo||y.data!=="");)x=y,y=Go(y);if(y===null)throw us(),ls;xo(bn,x),f=Dr(y);return}var A=h+"";r?A=`<svg>${A}</svg>`:i&&(A=`<math>${A}</math>`);var P=cs(A);if((r||i)&&(P=Qn(P)),xo(Qn(P),P.lastChild),r||i)for(;Qn(P);)f.before(Qn(P));else f.before(P)}})}function As(a,n){var r=void 0,i;ja(()=>{r!==(r=n())&&(i&&(Zn(i),i=null),r&&(i=Xn(()=>{Fa(()=>r(a))})))})}function ei(a){var n,r,i="";if(typeof a=="string"||typeof a=="number")i+=a;else if(typeof a=="object")if(Array.isArray(a)){var l=a.length;for(n=0;n<l;n++)a[n]&&(r=ei(a[n]))&&(i&&(i+=" "),i+=r)}else for(r in a)a[r]&&(i&&(i+=" "),i+=r);return i}function js(){for(var a,n,r=0,i="",l=arguments.length;r<l;r++)(a=arguments[r])&&(n=ei(a))&&(i&&(i+=" "),i+=n);return i}function Fs(a){return typeof a=="object"?js(a):a??""}const Do=[...` 	
\r\f \v\uFEFF`];function Ks(a,n,r){var i=a==null?"":""+a;if(n&&(i=i?i+" "+n:n),r){for(var l in r)if(r[l])i=i?i+" "+l:l;else if(i.length)for(var f=l.length,h=0;(h=i.indexOf(l,h))>=0;){var g=h+f;(h===0||Do.includes(i[h-1]))&&(g===i.length||Do.includes(i[g]))?i=(h===0?"":i.substring(0,h))+i.substring(g+1):h=g}}return i===""?null:i}function So(a,n=!1){var r=n?" !important;":";",i="";for(var l in a){var f=a[l];f!=null&&f!==""&&(i+=" "+l+": "+f+r)}return i}function ma(a){return a[0]!=="-"||a[1]!=="-"?a.toLowerCase():a}function qs(a,n){if(n){var r="",i,l;if(Array.isArray(n)?(i=n[0],l=n[1]):i=n,a){a=String(a).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var f=!1,h=0,g=!1,y=[];i&&y.push(...Object.keys(i).map(ma)),l&&y.push(...Object.keys(l).map(ma));var x=0,A=-1;const Y=a.length;for(var P=0;P<Y;P++){var H=a[P];if(g?H==="/"&&a[P-1]==="*"&&(g=!1):f?f===H&&(f=!1):H==="/"&&a[P+1]==="*"?g=!0:H==='"'||H==="'"?f=H:H==="("?h++:H===")"&&h--,!g&&f===!1&&h===0){if(H===":"&&A===-1)A=P;else if(H===";"||P===Y-1){if(A!==-1){var W=ma(a.substring(x,A).trim());if(!y.includes(W)){H!==";"&&P++;var q=a.substring(x,P).trim();r+=" "+q+";"}}x=P+1,A=-1}}}}return i&&(r+=So(i)),l&&(r+=So(l,!0)),r=r.trim(),r===""?null:r}return a==null?null:String(a)}function Ve(a,n,r,i,l,f){var h=a.__className;if(bt||h!==r||h===void 0){var g=Ks(r,i,f);(!bt||g!==a.getAttribute("class"))&&(g==null?a.removeAttribute("class"):n?a.className=g:a.setAttribute("class",g)),a.__className=r}else if(f&&l!==f)for(var y in f){var x=!!f[y];(l==null||x!==!!l[y])&&a.classList.toggle(y,x)}return f}function ya(a,n={},r,i){for(var l in r){var f=r[l];n[l]!==f&&(r[l]==null?a.style.removeProperty(l):a.style.setProperty(l,f,i))}}function _n(a,n,r,i){var l=a.__style;if(bt||l!==n){var f=qs(n,i);(!bt||f!==a.getAttribute("style"))&&(f==null?a.removeAttribute("style"):a.style.cssText=f),a.__style=n}else i&&(Array.isArray(i)?(ya(a,r==null?void 0:r[0],i[0]),ya(a,r==null?void 0:r[1],i[1],"important")):ya(a,r,i));return i}function Ta(a,n,r=!1){if(a.multiple){if(n==null)return;if(!Aa(n))return fs();for(var i of a.options)i.selected=n.includes(To(i));return}for(i of a.options){var l=To(i);if(ds(l,n)){i.selected=!0;return}}(!r||n!==void 0)&&(a.selectedIndex=-1)}function Rs(a){var n=new MutationObserver(()=>{Ta(a,a.__value)});n.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),hs(()=>{n.disconnect()})}function To(a){return"__value"in a?a.__value:a.value}const Un=Symbol("class"),Yn=Symbol("style"),ti=Symbol("is custom element"),ni=Symbol("is html");function Kr(a){if(bt){var n=!1,r=()=>{if(!n){if(n=!0,a.hasAttribute("value")){var i=a.value;vt(a,"value",null),a.value=i}if(a.hasAttribute("checked")){var l=a.checked;vt(a,"checked",null),a.checked=l}}};a.__on_r=r,gs(r),ps()}}function ri(a,n){var r=Ka(a);r.value===(r.value=n??void 0)||a.value===n&&(n!==0||a.nodeName!=="PROGRESS")||(a.value=n??"")}function Ns(a,n){n?a.hasAttribute("selected")||a.setAttribute("selected",""):a.removeAttribute("selected")}function vt(a,n,r,i){var l=Ka(a);bt&&(l[n]=a.getAttribute(n),n==="src"||n==="srcset"||n==="href"&&a.nodeName==="LINK")||l[n]!==(l[n]=r)&&(n==="loading"&&(a[ms]=r),r==null?a.removeAttribute(n):typeof r!="string"&&ai(a).includes(n)?a[n]=r:a.setAttribute(n,r))}function Bs(a,n,r,i,l=!1){var f=Ka(a),h=f[ti],g=!f[ni];let y=bt&&h;y&&Jn(!1);var x=n||{},A=a.tagName==="OPTION";for(var P in n)P in r||(r[P]=null);r.class?r.class=Fs(r.class):r[Un]&&(r.class=null),r[Yn]&&(r.style??(r.style=null));var H=ai(a);for(const I in r){let S=r[I];if(A&&I==="value"&&S==null){a.value=a.__value="",x[I]=S;continue}if(I==="class"){var W=a.namespaceURI==="http://www.w3.org/1999/xhtml";Ve(a,W,S,i,n==null?void 0:n[Un],r[Un]),x[I]=S,x[Un]=r[Un];continue}if(I==="style"){_n(a,S,n==null?void 0:n[Yn],r[Yn]),x[I]=S,x[Yn]=r[Yn];continue}var q=x[I];if(!(S===q&&!(S===void 0&&a.hasAttribute(I)))){x[I]=S;var Y=I[0]+I[1];if(Y!=="$$")if(Y==="on"){const z={},j="$$"+I;let B=I.slice(2);var F=Ui(B);if(Li(B)&&(B=B.slice(0,-7),z.capture=!0),!F&&q){if(S!=null)continue;a.removeEventListener(B,x[j],z),x[j]=null}if(S!=null)if(F)a[`__${B}`]=S,ut([B]);else{let oe=function(ie){x[I].call(this,ie)};x[j]=zi(B,a,oe,z)}else F&&(a[`__${B}`]=void 0)}else if(I==="style")vt(a,I,S);else if(I==="autofocus")ws(a,!!S);else if(!h&&(I==="__value"||I==="value"&&S!=null))a.value=a.__value=S;else if(I==="selected"&&A)Ns(a,S);else{var N=I;g||(N=Wi(N));var b=N==="defaultValue"||N==="defaultChecked";if(S==null&&!h&&!b)if(f[I]=null,N==="value"||N==="checked"){let z=a;const j=n===void 0;if(N==="value"){let B=z.defaultValue;z.removeAttribute(N),z.defaultValue=B,z.value=z.__value=j?B:null}else{let B=z.defaultChecked;z.removeAttribute(N),z.defaultChecked=B,z.checked=j?B:!1}}else a.removeAttribute(I);else b||H.includes(N)&&(h||typeof S!="string")?(a[N]=S,N in f&&(f[N]=ks)):typeof S!="function"&&vt(a,N,S)}}}return y&&Jn(!0),x}function Co(a,n,r=[],i=[],l,f=!1){bs(r,i,h=>{var g=void 0,y={},x=a.nodeName==="SELECT",A=!1;if(ja(()=>{var H=n(...h.map(d)),W=Bs(a,g,H,l,f);A&&x&&"value"in H&&Ta(a,H.value);for(let Y of Object.getOwnPropertySymbols(y))H[Y]||Zn(y[Y]);for(let Y of Object.getOwnPropertySymbols(H)){var q=H[Y];Y.description===_s&&(!g||q!==g[Y])&&(y[Y]&&Zn(y[Y]),y[Y]=Xn(()=>As(a,()=>q))),W[Y]=q}g=W}),x){var P=a;Fa(()=>{Ta(P,g.value,!0),Rs(P)})}A=!0})}function Ka(a){return a.__attributes??(a.__attributes={[ti]:a.nodeName.includes("-"),[ni]:a.namespaceURI===vs})}var Eo=new Map;function ai(a){var n=Eo.get(a.nodeName);if(n)return n;Eo.set(a.nodeName,n=[]);for(var r,i=a,l=Element.prototype;l!==i;){r=ys(i);for(var f in r)r[f].set&&n.push(f);i=zo(i)}return n}function Ir(a,n,r=n){var i=xs(),l=new WeakSet;Ds(a,"input",f=>{var h=f?a.defaultValue:a.value;if(h=ba(a)?_a(h):h,r(h),In!==null&&l.add(In),i&&h!==(h=n())){var g=a.selectionStart,y=a.selectionEnd;a.value=h??"",y!==null&&(a.selectionStart=g,a.selectionEnd=Math.min(y,a.value.length))}}),(bt&&a.defaultValue!==a.value||Xo(n)==null&&a.value)&&(r(ba(a)?_a(a.value):a.value),In!==null&&l.add(In)),Ss(()=>{var f=n();if(a===document.activeElement){var h=Ts??In;if(l.has(h))return}ba(a)&&f===_a(a.value)||a.type==="date"&&!f&&!a.value||f!==a.value&&(a.value=f??"")})}function ba(a){var n=a.type;return n==="number"||n==="range"}function _a(a){return a===""?null:+a}var sn,Mn,er,Pr,oi;const Ar=class Ar{constructor(n){zn(this,Pr);zn(this,sn,new WeakMap);zn(this,Mn);zn(this,er);va(this,er,n)}observe(n,r){var i=Qt(this,sn).get(n)||new Set;return i.add(r),Qt(this,sn).set(n,i),bo(this,Pr,oi).call(this).observe(n,Qt(this,er)),()=>{var l=Qt(this,sn).get(n);l.delete(r),l.size===0&&(Qt(this,sn).delete(n),Qt(this,Mn).unobserve(n))}}};sn=new WeakMap,Mn=new WeakMap,er=new WeakMap,Pr=new WeakSet,oi=function(){return Qt(this,Mn)??va(this,Mn,new ResizeObserver(n=>{for(var r of n){Ar.entries.set(r.target,r);for(var i of Qt(this,sn).get(r.target)||[])i(r)}}))},yo(Ar,"entries",new WeakMap);let Ca=Ar;var Hs=new Ca({box:"border-box"});function Io(a,n,r){var i=Hs.observe(a,()=>r(a[n]));Fa(()=>(Xo(()=>r(a[n])),i))}var Ls=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ii(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Tr={exports:{}},zs=Tr.exports,Oo;function Ws(){return Oo||(Oo=1,(function(a,n){(function(r,i){a.exports=i()})(zs,function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(o[u]=s[u])})(e,t)},i=function(){return(i=Object.assign||function(e){for(var t,o=1,s=arguments.length;o<s;o++)for(var u in t=arguments[o])Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u]);return e}).apply(this,arguments)};function l(e,t,o){for(var s,u=0,c=t.length;u<c;u++)!s&&u in t||((s=s||Array.prototype.slice.call(t,0,u))[u]=t[u]);return e.concat(s||Array.prototype.slice.call(t))}var f=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ls,h=Object.keys,g=Array.isArray;function y(e,t){return typeof t!="object"||h(t).forEach(function(o){e[o]=t[o]}),e}typeof Promise>"u"||f.Promise||(f.Promise=Promise);var x=Object.getPrototypeOf,A={}.hasOwnProperty;function P(e,t){return A.call(e,t)}function H(e,t){typeof t=="function"&&(t=t(x(e))),(typeof Reflect>"u"?h:Reflect.ownKeys)(t).forEach(function(o){q(e,o,t[o])})}var W=Object.defineProperty;function q(e,t,o,s){W(e,t,y(o&&P(o,"get")&&typeof o.get=="function"?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},s))}function Y(e){return{from:function(t){return e.prototype=Object.create(t.prototype),q(e.prototype,"constructor",e),{extend:H.bind(null,e.prototype)}}}}var F=Object.getOwnPropertyDescriptor,N=[].slice;function b(e,t,o){return N.call(e,t,o)}function I(e,t){return t(e)}function S(e){if(!e)throw new Error("Assertion Failed")}function z(e){f.setImmediate?setImmediate(e):setTimeout(e,0)}function j(e,t){if(typeof t=="string"&&P(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var o=[],s=0,u=t.length;s<u;++s){var c=j(e,t[s]);o.push(c)}return o}var v=t.indexOf(".");if(v!==-1){var p=e[t.substr(0,v)];return p==null?void 0:j(p,t.substr(v+1))}}function B(e,t,o){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){S(typeof o!="string"&&"length"in o);for(var s=0,u=t.length;s<u;++s)B(e,t[s],o[s])}else{var c,v,p=t.indexOf(".");p!==-1?(c=t.substr(0,p),(v=t.substr(p+1))===""?o===void 0?g(e)&&!isNaN(parseInt(c))?e.splice(c,1):delete e[c]:e[c]=o:B(p=!(p=e[c])||!P(e,c)?e[c]={}:p,v,o)):o===void 0?g(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=o}}function oe(e){var t,o={};for(t in e)P(e,t)&&(o[t]=e[t]);return o}var ie=[].concat;function $(e){return ie.apply([],e)}var Ut="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat($([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return f[e]}),fe=new Set(Ut.map(function(e){return f[e]})),_e=null;function xe(e){return _e=new WeakMap,e=(function t(o){if(!o||typeof o!="object")return o;var s=_e.get(o);if(s)return s;if(g(o)){s=[],_e.set(o,s);for(var u=0,c=o.length;u<c;++u)s.push(t(o[u]))}else if(fe.has(o.constructor))s=o;else{var v,p=x(o);for(v in s=p===Object.prototype?{}:Object.create(p),_e.set(o,s),o)P(o,v)&&(s[v]=t(o[v]))}return s})(e),_e=null,e}var Ge={}.toString;function Ke(e){return Ge.call(e).slice(8,-1)}var De=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ie=typeof De=="symbol"?function(e){var t;return e!=null&&(t=e[De])&&t.apply(e)}:function(){return null};function Le(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var Ne={};function qe(e){var t,o,s,u;if(arguments.length===1){if(g(e))return e.slice();if(this===Ne&&typeof e=="string")return[e];if(u=Ie(e)){for(o=[];!(s=u.next()).done;)o.push(s.value);return o}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(o=new Array(t);t--;)o[t]=e[t];return o}for(t=arguments.length,o=new Array(t);t--;)o[t]=arguments[t];return o}var te=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},qt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],jt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(qt),G={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Z(e,t){this.name=e,this.message=t}function pe(e,t){return e+". Errors: "+Object.keys(t).map(function(o){return t[o].toString()}).filter(function(o,s,u){return u.indexOf(o)===s}).join(`
`)}function we(e,t,o,s){this.failures=t,this.failedKeys=s,this.successCount=o,this.message=pe(e,t)}function Ae(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(o){return t[o]}),this.failuresByPos=t,this.message=pe(e,this.failures)}Y(Z).from(Error).extend({toString:function(){return this.name+": "+this.message}}),Y(we).from(Z),Y(Ae).from(Z);var ye=jt.reduce(function(e,t){return e[t]=t+"Error",e},{}),Ce=Z,ae=jt.reduce(function(e,t){var o=t+"Error";function s(u,c){this.name=o,u?typeof u=="string"?(this.message="".concat(u).concat(c?`
 `+c:""),this.inner=c||null):typeof u=="object"&&(this.message="".concat(u.name," ").concat(u.message),this.inner=u):(this.message=G[t]||o,this.inner=null)}return Y(s).from(Ce),e[t]=s,e},{});ae.Syntax=SyntaxError,ae.Type=TypeError,ae.Range=RangeError;var Be=qt.reduce(function(e,t){return e[t+"Error"]=ae[t],e},{}),Ye=jt.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=ae[t]),e},{});function Se(){}function ft(e){return e}function lt(e,t){return e==null||e===ft?t:function(o){return t(e(o))}}function it(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function It(e,t){return e===Se?t:function(){var o=e.apply(this,arguments);o!==void 0&&(arguments[0]=o);var s=this.onsuccess,u=this.onerror;this.onsuccess=null,this.onerror=null;var c=t.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?it(s,this.onsuccess):s),u&&(this.onerror=this.onerror?it(u,this.onerror):u),c!==void 0?c:o}}function _t(e,t){return e===Se?t:function(){e.apply(this,arguments);var o=this.onsuccess,s=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?it(o,this.onsuccess):o),s&&(this.onerror=this.onerror?it(s,this.onerror):s)}}function yt(e,t){return e===Se?t:function(o){var s=e.apply(this,arguments);y(o,s);var u=this.onsuccess,c=this.onerror;return this.onsuccess=null,this.onerror=null,o=t.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?it(u,this.onsuccess):u),c&&(this.onerror=this.onerror?it(c,this.onerror):c),s===void 0?o===void 0?void 0:o:y(s,o)}}function St(e,t){return e===Se?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Ot(e,t){return e===Se?t:function(){var o=e.apply(this,arguments);if(o&&typeof o.then=="function"){for(var s=this,u=arguments.length,c=new Array(u);u--;)c[u]=arguments[u];return o.then(function(){return t.apply(s,c)})}return t.apply(this,arguments)}}Ye.ModifyError=we,Ye.DexieError=Z,Ye.BulkError=Ae;var rt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Kt(e){rt=e}var Wt={},wn=100,Ut=typeof Promise>"u"?[]:(function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,x(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,x(t),e]})(),qt=Ut[0],jt=Ut[1],Ut=Ut[2],jt=jt&&jt.then,Rt=qt&&qt.constructor,un=!!Ut,ln=function(e,t){Zt.push([e,t]),Xt&&(queueMicrotask(Ze),Xt=!1)},cn=!0,Xt=!0,Yt=[],fn=[],An=ft,Ft={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Se,pgp:!1,env:{},finalize:Se},me=Ft,Zt=[],Nt=0,kn=[];function L(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=me;if(typeof e!="function"){if(e!==Wt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Xe(this,this._value))}this._state=null,this._value=null,++t.ref,(function o(s,u){try{u(function(c){if(s._state===null){if(c===s)throw new TypeError("A promise cannot be resolved with itself.");var v=s._lib&&Mt();c&&typeof c.then=="function"?o(s,function(p,_){c instanceof L?c._then(p,_):c.then(p,_)}):(s._state=!0,s._value=c,je(s)),v&&$t()}},Xe.bind(null,s))}catch(c){Xe(s,c)}})(this,e)}var ve={get:function(){var e=me,t=en;function o(s,u){var c=this,v=!e.global&&(e!==me||t!==en),p=v&&!tn(),_=new L(function(k,T){Re(c,new Te(Ha(s,e,v,p),Ha(u,e,v,p),k,T,e))});return this._consoleTask&&(_._consoleTask=this._consoleTask),_}return o.prototype=Wt,o},set:function(e){q(this,"then",e&&e.prototype===Wt?ve:{get:function(){return e},set:ve.set})}};function Te(e,t,o,s,u){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=o,this.reject=s,this.psd=u}function Xe(e,t){var o,s;fn.push(t),e._state===null&&(o=e._lib&&Mt(),t=An(t),e._state=!1,e._value=t,s=e,Yt.some(function(u){return u._value===s._value})||Yt.push(s),je(e),o&&$t())}function je(e){var t=e._listeners;e._listeners=[];for(var o=0,s=t.length;o<s;++o)Re(e,t[o]);var u=e._PSD;--u.ref||u.finalize(),Nt===0&&(++Nt,ln(function(){--Nt==0&&st()},[]))}function Re(e,t){if(e._state!==null){var o=e._state?t.onFulfilled:t.onRejected;if(o===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Nt,ln(ze,[o,e,t])}else e._listeners.push(t)}function ze(e,t,o){try{var s,u=t._value;!t._state&&fn.length&&(fn=[]),s=rt&&t._consoleTask?t._consoleTask.run(function(){return e(u)}):e(u),t._state||fn.indexOf(u)!==-1||(function(c){for(var v=Yt.length;v;)if(Yt[--v]._value===c._value)return Yt.splice(v,1)})(t),o.resolve(s)}catch(c){o.reject(c)}finally{--Nt==0&&st(),--o.psd.ref||o.psd.finalize()}}function Ze(){hn(Ft,function(){Mt()&&$t()})}function Mt(){var e=cn;return Xt=cn=!1,e}function $t(){var e,t,o;do for(;0<Zt.length;)for(e=Zt,Zt=[],o=e.length,t=0;t<o;++t){var s=e[t];s[0].apply(null,s[1])}while(0<Zt.length);Xt=cn=!0}function st(){var e=Yt;Yt=[],e.forEach(function(s){s._PSD.onunhandled.call(null,s._value,s)});for(var t=kn.slice(0),o=t.length;o;)t[--o]()}function gt(e){return new L(Wt,!1,e)}function $e(e,t){var o=me;return function(){var s=Mt(),u=me;try{return nn(o,!0),e.apply(this,arguments)}catch(c){t&&t(c)}finally{nn(u,!1),s&&$t()}}}H(L.prototype,{then:ve,_then:function(e,t){Re(this,new Te(null,null,e,t,me))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,o=arguments[1];return typeof t=="function"?this.then(null,function(s){return(s instanceof t?o:gt)(s)}):this.then(null,function(s){return(s&&s.name===t?o:gt)(s)})},finally:function(e){return this.then(function(t){return L.resolve(e()).then(function(){return t})},function(t){return L.resolve(e()).then(function(){return gt(t)})})},timeout:function(e,t){var o=this;return e<1/0?new L(function(s,u){var c=setTimeout(function(){return u(new ae.Timeout(t))},e);o.then(s,u).finally(clearTimeout.bind(null,c))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&q(L.prototype,Symbol.toStringTag,"Dexie.Promise"),Ft.env=Ba(),H(L,{all:function(){var e=qe.apply(null,arguments).map(ar);return new L(function(t,o){e.length===0&&t([]);var s=e.length;e.forEach(function(u,c){return L.resolve(u).then(function(v){e[c]=v,--s||t(e)},o)})})},resolve:function(e){return e instanceof L?e:e&&typeof e.then=="function"?new L(function(t,o){e.then(t,o)}):new L(Wt,!0,e)},reject:gt,race:function(){var e=qe.apply(null,arguments).map(ar);return new L(function(t,o){e.map(function(s){return L.resolve(s).then(t,o)})})},PSD:{get:function(){return me},set:function(e){return me=e}},totalEchoes:{get:function(){return en}},newPSD:Bt,usePSD:hn,scheduler:{get:function(){return ln},set:function(e){ln=e}},rejectionMapper:{get:function(){return An},set:function(e){An=e}},follow:function(e,t){return new L(function(o,s){return Bt(function(u,c){var v=me;v.unhandleds=[],v.onunhandled=c,v.finalize=it(function(){var p,_=this;p=function(){_.unhandleds.length===0?u():c(_.unhandleds[0])},kn.push(function k(){p(),kn.splice(kn.indexOf(k),1)}),++Nt,ln(function(){--Nt==0&&st()},[])},v.finalize),e()},t,o,s)})}}),Rt&&(Rt.allSettled&&q(L,"allSettled",function(){var e=qe.apply(null,arguments).map(ar);return new L(function(t){e.length===0&&t([]);var o=e.length,s=new Array(o);e.forEach(function(u,c){return L.resolve(u).then(function(v){return s[c]={status:"fulfilled",value:v}},function(v){return s[c]={status:"rejected",reason:v}}).then(function(){return--o||t(s)})})})}),Rt.any&&typeof AggregateError<"u"&&q(L,"any",function(){var e=qe.apply(null,arguments).map(ar);return new L(function(t,o){e.length===0&&o(new AggregateError([]));var s=e.length,u=new Array(s);e.forEach(function(c,v){return L.resolve(c).then(function(p){return t(p)},function(p){u[v]=p,--s||o(new AggregateError(u))})})})}),Rt.withResolvers&&(L.withResolvers=Rt.withResolvers));var pt={awaits:0,echoes:0,id:0},nr=0,dn=[],Pt=0,en=0,rr=0;function Bt(e,t,o,s){var u=me,c=Object.create(u);return c.parent=u,c.ref=0,c.global=!1,c.id=++rr,Ft.env,c.env=un?{Promise:L,PromiseProp:{value:L,configurable:!0,writable:!0},all:L.all,race:L.race,allSettled:L.allSettled,any:L.any,resolve:L.resolve,reject:L.reject}:{},t&&y(c,t),++u.ref,c.finalize=function(){--this.parent.ref||this.parent.finalize()},s=hn(c,e,o,s),c.ref===0&&c.finalize(),s}function xn(){return pt.id||(pt.id=++nr),++pt.awaits,pt.echoes+=wn,pt.id}function tn(){return!!pt.awaits&&(--pt.awaits==0&&(pt.id=0),pt.echoes=pt.awaits*wn,!0)}function ar(e){return pt.echoes&&e&&e.constructor===Rt?(xn(),e.then(function(t){return tn(),t},function(t){return tn(),dt(t)})):e}function bi(){var e=dn[dn.length-1];dn.pop(),nn(e,!1)}function nn(e,t){var o,s=me;(t?!pt.echoes||Pt++&&e===me:!Pt||--Pt&&e===me)||queueMicrotask(t?(function(u){++en,pt.echoes&&--pt.echoes!=0||(pt.echoes=pt.awaits=pt.id=0),dn.push(me),nn(u,!0)}).bind(null,e):bi),e!==me&&(me=e,s===Ft&&(Ft.env=Ba()),un&&(o=Ft.env.Promise,t=e.env,(s.global||e.global)&&(Object.defineProperty(f,"Promise",t.PromiseProp),o.all=t.all,o.race=t.race,o.resolve=t.resolve,o.reject=t.reject,t.allSettled&&(o.allSettled=t.allSettled),t.any&&(o.any=t.any))))}function Ba(){var e=f.Promise;return un?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(f,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function hn(e,t,o,s,u){var c=me;try{return nn(e,!0),t(o,s,u)}finally{nn(c,!1)}}function Ha(e,t,o,s){return typeof e!="function"?e:function(){var u=me;o&&xn(),nn(t,!0);try{return e.apply(this,arguments)}finally{nn(u,!1),s&&queueMicrotask(tn)}}}function Br(e){Promise===Rt&&pt.echoes===0?Pt===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+jt).indexOf("[native code]")===-1&&(xn=tn=Se);var dt=L.reject,vn="￿",Vt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",La="String expected.",Dn=[],or="__dbnames",Hr="readonly",Lr="readwrite";function gn(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var za={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ir(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=xe(t))[e],t}}function Wa(){throw ae.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function He(e,t){try{var o=Ua(e),s=Ua(t);if(o!==s)return o==="Array"?1:s==="Array"?-1:o==="binary"?1:s==="binary"?-1:o==="string"?1:s==="string"?-1:o==="Date"?1:s!=="Date"?NaN:-1;switch(o){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return(function(u,c){for(var v=u.length,p=c.length,_=v<p?v:p,k=0;k<_;++k)if(u[k]!==c[k])return u[k]<c[k]?-1:1;return v===p?0:v<p?-1:1})(Ya(e),Ya(t));case"Array":return(function(u,c){for(var v=u.length,p=c.length,_=v<p?v:p,k=0;k<_;++k){var T=He(u[k],c[k]);if(T!==0)return T}return v===p?0:v<p?-1:1})(e,t)}}catch{}return NaN}function Ua(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=Ke(e),e==="ArrayBuffer"?"binary":e)}function Ya(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function sr(e,t,o){var s=e.schema.yProps;return s?(t&&0<o.numFailures&&(t=t.filter(function(u,c){return!o.failures[c]})),Promise.all(s.map(function(u){return u=u.updatesTable,t?e.db.table(u).where("k").anyOf(t).delete():e.db.table(u).clear()})).then(function(){return o})):o}var Va=(at.prototype._trans=function(e,t,o){var s=this._tx||me.trans,u=this.name,c=rt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function v(k,T,m){if(!m.schema[u])throw new ae.NotFound("Table "+u+" not part of transaction");return t(m.idbtrans,m)}var p=Mt();try{var _=s&&s.db._novip===this.db._novip?s===me.trans?s._promise(e,v,o):Bt(function(){return s._promise(e,v,o)},{trans:s,transless:me.transless||me}):(function k(T,m,O,w){if(T.idbdb&&(T._state.openComplete||me.letThrough||T._vip)){var D=T._createTransaction(m,O,T._dbSchema);try{D.create(),T._state.PR1398_maxLoop=3}catch(E){return E.name===ye.InvalidState&&T.isOpen()&&0<--T._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),T.close({disableAutoOpen:!1}),T.open().then(function(){return k(T,m,O,w)})):dt(E)}return D._promise(m,function(E,C){return Bt(function(){return me.trans=D,w(E,C,D)})}).then(function(E){if(m==="readwrite")try{D.idbtrans.commit()}catch{}return m==="readonly"?E:D._completion.then(function(){return E})})}if(T._state.openComplete)return dt(new ae.DatabaseClosed(T._state.dbOpenError));if(!T._state.isBeingOpened){if(!T._state.autoOpen)return dt(new ae.DatabaseClosed);T.open().catch(Se)}return T._state.dbReadyPromise.then(function(){return k(T,m,O,w)})})(this.db,e,[this.name],v);return c&&(_._consoleTask=c,_=_.catch(function(k){return console.trace(k),dt(k)})),_}finally{p&&$t()}},at.prototype.get=function(e,t){var o=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?dt(new ae.Type("Invalid argument to Table.get()")):this._trans("readonly",function(s){return o.core.get({trans:s,key:e}).then(function(u){return o.hook.reading.fire(u)})}).then(t)},at.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(g(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=h(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(p){if(p.compound&&t.every(function(k){return 0<=p.keyPath.indexOf(k)})){for(var _=0;_<t.length;++_)if(t.indexOf(p.keyPath[_])===-1)return!1;return!0}return!1}).sort(function(p,_){return p.keyPath.length-_.keyPath.length})[0];if(o&&this.db._maxKey!==vn){var c=o.keyPath.slice(0,t.length);return this.where(c).equals(c.map(function(_){return e[_]}))}!o&&rt&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var s=this.schema.idxByName;function u(p,_){return He(p,_)===0}var v=t.reduce(function(m,_){var k=m[0],T=m[1],m=s[_],O=e[_];return[k||m,k||!m?gn(T,m&&m.multi?function(w){return w=j(w,_),g(w)&&w.some(function(D){return u(O,D)})}:function(w){return u(O,j(w,_))}):T]},[null,null]),c=v[0],v=v[1];return c?this.where(c.name).equals(e[c.keyPath]).filter(v):o?this.filter(v):this.where(t).equals("")},at.prototype.filter=function(e){return this.toCollection().and(e)},at.prototype.count=function(e){return this.toCollection().count(e)},at.prototype.offset=function(e){return this.toCollection().offset(e)},at.prototype.limit=function(e){return this.toCollection().limit(e)},at.prototype.each=function(e){return this.toCollection().each(e)},at.prototype.toArray=function(e){return this.toCollection().toArray(e)},at.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},at.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,g(e)?"[".concat(e.join("+"),"]"):e))},at.prototype.reverse=function(){return this.toCollection().reverse()},at.prototype.mapToClass=function(e){var t,o=this.db,s=this.name;function u(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof Wa&&((function(_,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");function T(){this.constructor=_}r(_,k),_.prototype=k===null?Object.create(k):(T.prototype=k.prototype,new T)})(u,t=e),Object.defineProperty(u.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),u.prototype.table=function(){return s},e=u);for(var c=new Set,v=e.prototype;v;v=x(v))Object.getOwnPropertyNames(v).forEach(function(_){return c.add(_)});function p(_){if(!_)return _;var k,T=Object.create(e.prototype);for(k in _)if(!c.has(k))try{T[k]=_[k]}catch{}return T}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=p,this.hook("reading",p),e},at.prototype.defineClass=function(){return this.mapToClass(function(e){y(this,e)})},at.prototype.add=function(e,t){var o=this,s=this.schema.primKey,u=s.auto,c=s.keyPath,v=e;return c&&u&&(v=ir(c)(e)),this._trans("readwrite",function(p){return o.core.mutate({trans:p,type:"add",keys:t!=null?[t]:null,values:[v]})}).then(function(p){return p.numFailures?L.reject(p.failures[0]):p.lastResult}).then(function(p){if(c)try{B(e,c,p)}catch{}return p})},at.prototype.update=function(e,t){return typeof e!="object"||g(e)?this.where(":id").equals(e).modify(t):(e=j(e,this.schema.primKey.keyPath),e===void 0?dt(new ae.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},at.prototype.put=function(e,t){var o=this,s=this.schema.primKey,u=s.auto,c=s.keyPath,v=e;return c&&u&&(v=ir(c)(e)),this._trans("readwrite",function(p){return o.core.mutate({trans:p,type:"put",values:[v],keys:t!=null?[t]:null})}).then(function(p){return p.numFailures?L.reject(p.failures[0]):p.lastResult}).then(function(p){if(c)try{B(e,c,p)}catch{}return p})},at.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(o){return t.core.mutate({trans:o,type:"delete",keys:[e]}).then(function(s){return sr(t,[e],s)}).then(function(s){return s.numFailures?L.reject(s.failures[0]):void 0})})},at.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:za}).then(function(o){return sr(e,null,o)})}).then(function(t){return t.numFailures?L.reject(t.failures[0]):void 0})},at.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(o){return t.core.getMany({keys:e,trans:o}).then(function(s){return s.map(function(u){return t.hook.reading.fire(u)})})})},at.prototype.bulkAdd=function(e,t,o){var s=this,u=Array.isArray(t)?t:void 0,c=(o=o||(u?void 0:t))?o.allKeys:void 0;return this._trans("readwrite",function(v){var k=s.schema.primKey,p=k.auto,k=k.keyPath;if(k&&u)throw new ae.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(u&&u.length!==e.length)throw new ae.InvalidArgument("Arguments objects and keys must have the same length");var _=e.length,k=k&&p?e.map(ir(k)):e;return s.core.mutate({trans:v,type:"add",keys:u,values:k,wantResults:c}).then(function(D){var m=D.numFailures,O=D.results,w=D.lastResult,D=D.failures;if(m===0)return c?O:w;throw new Ae("".concat(s.name,".bulkAdd(): ").concat(m," of ").concat(_," operations failed"),D)})})},at.prototype.bulkPut=function(e,t,o){var s=this,u=Array.isArray(t)?t:void 0,c=(o=o||(u?void 0:t))?o.allKeys:void 0;return this._trans("readwrite",function(v){var k=s.schema.primKey,p=k.auto,k=k.keyPath;if(k&&u)throw new ae.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(u&&u.length!==e.length)throw new ae.InvalidArgument("Arguments objects and keys must have the same length");var _=e.length,k=k&&p?e.map(ir(k)):e;return s.core.mutate({trans:v,type:"put",keys:u,values:k,wantResults:c}).then(function(D){var m=D.numFailures,O=D.results,w=D.lastResult,D=D.failures;if(m===0)return c?O:w;throw new Ae("".concat(s.name,".bulkPut(): ").concat(m," of ").concat(_," operations failed"),D)})})},at.prototype.bulkUpdate=function(e){var t=this,o=this.core,s=e.map(function(v){return v.key}),u=e.map(function(v){return v.changes}),c=[];return this._trans("readwrite",function(v){return o.getMany({trans:v,keys:s,cache:"clone"}).then(function(p){var _=[],k=[];e.forEach(function(m,O){var w=m.key,D=m.changes,E=p[O];if(E){for(var C=0,K=Object.keys(D);C<K.length;C++){var U=K[C],Q=D[U];if(U===t.schema.primKey.keyPath){if(He(Q,w)!==0)throw new ae.Constraint("Cannot update primary key in bulkUpdate()")}else B(E,U,Q)}c.push(O),_.push(w),k.push(E)}});var T=_.length;return o.mutate({trans:v,type:"put",keys:_,values:k,updates:{keys:s,changeSpecs:u}}).then(function(m){var O=m.numFailures,w=m.failures;if(O===0)return T;for(var D=0,E=Object.keys(w);D<E.length;D++){var C,K=E[D],U=c[Number(K)];U!=null&&(C=w[K],delete w[K],w[U]=C)}throw new Ae("".concat(t.name,".bulkUpdate(): ").concat(O," of ").concat(T," operations failed"),w)})})})},at.prototype.bulkDelete=function(e){var t=this,o=e.length;return this._trans("readwrite",function(s){return t.core.mutate({trans:s,type:"delete",keys:e}).then(function(u){return sr(t,e,u)})}).then(function(v){var u=v.numFailures,c=v.lastResult,v=v.failures;if(u===0)return c;throw new Ae("".concat(t.name,".bulkDelete(): ").concat(u," of ").concat(o," operations failed"),v)})},at);function at(){}function jn(e){function t(v,p){if(p){for(var _=arguments.length,k=new Array(_-1);--_;)k[_-1]=arguments[_];return o[v].subscribe.apply(null,k),e}if(typeof v=="string")return o[v]}var o={};t.addEventType=c;for(var s=1,u=arguments.length;s<u;++s)c(arguments[s]);return t;function c(v,p,_){if(typeof v!="object"){var k;p=p||St;var T={subscribers:[],fire:_=_||Se,subscribe:function(m){T.subscribers.indexOf(m)===-1&&(T.subscribers.push(m),T.fire=p(T.fire,m))},unsubscribe:function(m){T.subscribers=T.subscribers.filter(function(O){return O!==m}),T.fire=T.subscribers.reduce(p,_)}};return o[v]=t[v]=T}h(k=v).forEach(function(m){var O=k[m];if(g(O))c(m,k[m][0],k[m][1]);else{if(O!=="asap")throw new ae.InvalidArgument("Invalid event config");var w=c(m,ft,function(){for(var D=arguments.length,E=new Array(D);D--;)E[D]=arguments[D];w.subscribers.forEach(function(C){z(function(){C.apply(null,E)})})})}})}}function Fn(e,t){return Y(t).from({prototype:e}),t}function Sn(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function zr(e,t){e.filter=gn(e.filter,t)}function Wr(e,t,o){var s=e.replayFilter;e.replayFilter=s?function(){return gn(s(),t())}:t,e.justLimit=o&&!s}function ur(e,t){if(e.isPrimKey)return t.primaryKey;var o=t.getIndexByKeyPath(e.index);if(!o)throw new ae.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return o}function Ga(e,t,o){var s=ur(e,t.schema);return t.openCursor({trans:o,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:s,range:e.range}})}function lr(e,t,o,s){var u=e.replayFilter?gn(e.filter,e.replayFilter()):e.filter;if(e.or){var c={},v=function(p,_,k){var T,m;u&&!u(_,k,function(O){return _.stop(O)},function(O){return _.fail(O)})||((m=""+(T=_.primaryKey))=="[object ArrayBuffer]"&&(m=""+new Uint8Array(T)),P(c,m)||(c[m]=!0,t(p,_,k)))};return Promise.all([e.or._iterate(v,o),Qa(Ga(e,s,o),e.algorithm,v,!e.keysOnly&&e.valueMapper)])}return Qa(Ga(e,s,o),gn(e.algorithm,u),t,!e.keysOnly&&e.valueMapper)}function Qa(e,t,o,s){var u=$e(s?function(c,v,p){return o(s(c),v,p)}:o);return e.then(function(c){if(c)return c.start(function(){var v=function(){return c.continue()};t&&!t(c,function(p){return v=p},function(p){c.stop(p),v=Se},function(p){c.fail(p),v=Se})||u(c.value,c,function(p){return v=p}),v()})})}var Kn=(Ja.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var o=t.add;if(g(o))return l(l([],g(e)?e:[],!0),o).sort();if(typeof o=="number")return(Number(e)||0)+o;if(typeof o=="bigint")try{return BigInt(e)+o}catch{return BigInt(0)+o}throw new TypeError("Invalid term ".concat(o))}if(t.remove!==void 0){var s=t.remove;if(g(s))return g(e)?e.filter(function(u){return!s.includes(u)}).sort():[];if(typeof s=="number")return Number(e)-s;if(typeof s=="bigint")try{return BigInt(e)-s}catch{return BigInt(0)-s}throw new TypeError("Invalid subtrahend ".concat(s))}return o=(o=t.replacePrefix)===null||o===void 0?void 0:o[0],o&&typeof e=="string"&&e.startsWith(o)?t.replacePrefix[1]+e.substring(o.length):e},Ja);function Ja(e){this["@@propmod"]=e}var _i=(Ue.prototype._read=function(e,t){var o=this._ctx;return o.error?o.table._trans(null,dt.bind(null,o.error)):o.table._trans("readonly",e).then(t)},Ue.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,dt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},Ue.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=gn(t.algorithm,e)},Ue.prototype._iterate=function(e,t){return lr(this._ctx,e,t,this._ctx.table.core)},Ue.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return e&&y(o,e),t._ctx=o,t},Ue.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ue.prototype.each=function(e){var t=this._ctx;return this._read(function(o){return lr(t,e,o,t.table.core)})},Ue.prototype.count=function(e){var t=this;return this._read(function(o){var s=t._ctx,u=s.table.core;if(Sn(s,!0))return u.count({trans:o,query:{index:ur(s,u.schema),range:s.range}}).then(function(v){return Math.min(v,s.limit)});var c=0;return lr(s,function(){return++c,!1},o,u).then(function(){return c})}).then(e)},Ue.prototype.sortBy=function(e,t){var o=e.split(".").reverse(),s=o[0],u=o.length-1;function c(_,k){return k?c(_[o[k]],k-1):_[s]}var v=this._ctx.dir==="next"?1:-1;function p(_,k){return He(c(_,u),c(k,u))*v}return this.toArray(function(_){return _.sort(p)}).then(t)},Ue.prototype.toArray=function(e){var t=this;return this._read(function(o){var s=t._ctx;if(s.dir==="next"&&Sn(s,!0)&&0<s.limit){var u=s.valueMapper,c=ur(s,s.table.core.schema);return s.table.core.query({trans:o,limit:s.limit,values:!0,query:{index:c,range:s.range}}).then(function(p){return p=p.result,u?p.map(u):p})}var v=[];return lr(s,function(p){return v.push(p)},o,s.table.core).then(function(){return v})},e)},Ue.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Sn(t)?Wr(t,function(){var o=e;return function(s,u){return o===0||(o===1?--o:u(function(){s.advance(o),o=0}),!1)}}):Wr(t,function(){var o=e;return function(){return--o<0}})),this},Ue.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Wr(this._ctx,function(){var t=e;return function(o,s,u){return--t<=0&&s(u),0<=t}},!0),this},Ue.prototype.until=function(e,t){return zr(this._ctx,function(o,s,u){return!e(o.value)||(s(u),t)}),this},Ue.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},Ue.prototype.last=function(e){return this.reverse().first(e)},Ue.prototype.filter=function(e){var t;return zr(this._ctx,function(o){return e(o.value)}),(t=this._ctx).isMatch=gn(t.isMatch,e),this},Ue.prototype.and=function(e){return this.filter(e)},Ue.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Ue.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ue.prototype.desc=function(){return this.reverse()},Ue.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(o,s){e(s.key,s)})},Ue.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},Ue.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(o,s){e(s.primaryKey,s)})},Ue.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var o=[];return this.each(function(s,u){o.push(u.key)}).then(function(){return o}).then(e)},Ue.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&Sn(t,!0)&&0<t.limit)return this._read(function(s){var u=ur(t,t.table.core.schema);return t.table.core.query({trans:s,values:!1,limit:t.limit,query:{index:u,range:t.range}})}).then(function(s){return s.result}).then(e);t.keysOnly=!t.isMatch;var o=[];return this.each(function(s,u){o.push(u.primaryKey)}).then(function(){return o}).then(e)},Ue.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},Ue.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},Ue.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Ue.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return zr(this._ctx,function(u){var s=u.primaryKey.toString(),u=P(t,s);return t[s]=!0,!u}),this},Ue.prototype.modify=function(e){var t=this,o=this._ctx;return this._write(function(s){var u,c,v;v=typeof e=="function"?e:(u=h(e),c=u.length,function(K){for(var U=!1,Q=0;Q<c;++Q){var J=u[Q],ee=e[J],se=j(K,J);ee instanceof Kn?(B(K,J,ee.execute(se)),U=!0):se!==ee&&(B(K,J,ee),U=!0)}return U});var p=o.table.core,m=p.schema.primaryKey,_=m.outbound,k=m.extractKey,T=200,m=t.db._options.modifyChunkSize;m&&(T=typeof m=="object"?m[p.name]||m["*"]||200:m);function O(K,J){var Q=J.failures,J=J.numFailures;D+=K-J;for(var ee=0,se=h(Q);ee<se.length;ee++){var ne=se[ee];w.push(Q[ne])}}var w=[],D=0,E=[],C=e===Xa;return t.clone().primaryKeys().then(function(K){function U(J){var ee=Math.min(T,K.length-J),se=K.slice(J,J+ee);return(C?Promise.resolve([]):p.getMany({trans:s,keys:se,cache:"immutable"})).then(function(ne){var re=[],ce=[],le=_?[]:null,de=C?se:[];if(!C)for(var Fe=0;Fe<ee;++Fe){var We=ne[Fe],Pe={value:xe(We),primKey:K[J+Fe]};v.call(Pe,Pe.value,Pe)!==!1&&(Pe.value==null?de.push(K[J+Fe]):_||He(k(We),k(Pe.value))===0?(ce.push(Pe.value),_&&le.push(K[J+Fe])):(de.push(K[J+Fe]),re.push(Pe.value)))}return Promise.resolve(0<re.length&&p.mutate({trans:s,type:"add",values:re}).then(function(ct){for(var Me in ct.failures)de.splice(parseInt(Me),1);O(re.length,ct)})).then(function(){return(0<ce.length||Q&&typeof e=="object")&&p.mutate({trans:s,type:"put",keys:le,values:ce,criteria:Q,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<J}).then(function(ct){return O(ce.length,ct)})}).then(function(){return(0<de.length||Q&&C)&&p.mutate({trans:s,type:"delete",keys:de,criteria:Q,isAdditionalChunk:0<J}).then(function(ct){return sr(o.table,de,ct)}).then(function(ct){return O(de.length,ct)})}).then(function(){return K.length>J+ee&&U(J+T)})})}var Q=Sn(o)&&o.limit===1/0&&(typeof e!="function"||C)&&{index:o.index,range:o.range};return U(0).then(function(){if(0<w.length)throw new we("Error modifying one or more objects",w,D,E);return K.length})})})},Ue.prototype.delete=function(){var e=this._ctx,t=e.range;return!Sn(e)||e.table.schema.yProps||!e.isPrimKey&&t.type!==3?this.modify(Xa):this._write(function(o){var s=e.table.core.schema.primaryKey,u=t;return e.table.core.count({trans:o,query:{index:s,range:u}}).then(function(c){return e.table.core.mutate({trans:o,type:"deleteRange",range:u}).then(function(_){var p=_.failures,_=_.numFailures;if(_)throw new we("Could not delete some values",Object.keys(p).map(function(k){return p[k]}),c-_);return c-_})})})},Ue);function Ue(){}var Xa=function(e,t){return t.value=null};function wi(e,t){return e<t?-1:e===t?0:1}function ki(e,t){return t<e?-1:e===t?0:1}function At(e,t,o){return e=e instanceof $a?new e.Collection(e):e,e._ctx.error=new(o||TypeError)(t),e}function Tn(e){return new e.Collection(e,function(){return Za("")}).limit(0)}function cr(e,t,o,s){var u,c,v,p,_,k,T,m=o.length;if(!o.every(function(D){return typeof D=="string"}))return At(e,La);function O(D){u=D==="next"?function(C){return C.toUpperCase()}:function(C){return C.toLowerCase()},c=D==="next"?function(C){return C.toLowerCase()}:function(C){return C.toUpperCase()},v=D==="next"?wi:ki;var E=o.map(function(C){return{lower:c(C),upper:u(C)}}).sort(function(C,K){return v(C.lower,K.lower)});p=E.map(function(C){return C.upper}),_=E.map(function(C){return C.lower}),T=(k=D)==="next"?"":s}O("next"),e=new e.Collection(e,function(){return rn(p[0],_[m-1]+s)}),e._ondirectionchange=function(D){O(D)};var w=0;return e._addAlgorithm(function(D,E,C){var K=D.key;if(typeof K!="string")return!1;var U=c(K);if(t(U,_,w))return!0;for(var Q=null,J=w;J<m;++J){var ee=(function(se,ne,re,ce,le,de){for(var Fe=Math.min(se.length,ce.length),We=-1,Pe=0;Pe<Fe;++Pe){var ct=ne[Pe];if(ct!==ce[Pe])return le(se[Pe],re[Pe])<0?se.substr(0,Pe)+re[Pe]+re.substr(Pe+1):le(se[Pe],ce[Pe])<0?se.substr(0,Pe)+ce[Pe]+re.substr(Pe+1):0<=We?se.substr(0,We)+ne[We]+re.substr(We+1):null;le(se[Pe],ct)<0&&(We=Pe)}return Fe<ce.length&&de==="next"?se+re.substr(se.length):Fe<se.length&&de==="prev"?se.substr(0,re.length):We<0?null:se.substr(0,We)+ce[We]+re.substr(We+1)})(K,U,p[J],_[J],v,k);ee===null&&Q===null?w=J+1:(Q===null||0<v(Q,ee))&&(Q=ee)}return E(Q!==null?function(){D.continue(Q+T)}:C),!1}),e}function rn(e,t,o,s){return{type:2,lower:e,upper:t,lowerOpen:o,upperOpen:s}}function Za(e){return{type:1,lower:e,upper:e}}var $a=(Object.defineProperty(mt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),mt.prototype.between=function(e,t,o,s){o=o!==!1,s=s===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(o||s)&&(!o||!s)?Tn(this):new this.Collection(this,function(){return rn(e,t,!o,!s)})}catch{return At(this,Vt)}},mt.prototype.equals=function(e){return e==null?At(this,Vt):new this.Collection(this,function(){return Za(e)})},mt.prototype.above=function(e){return e==null?At(this,Vt):new this.Collection(this,function(){return rn(e,void 0,!0)})},mt.prototype.aboveOrEqual=function(e){return e==null?At(this,Vt):new this.Collection(this,function(){return rn(e,void 0,!1)})},mt.prototype.below=function(e){return e==null?At(this,Vt):new this.Collection(this,function(){return rn(void 0,e,!1,!0)})},mt.prototype.belowOrEqual=function(e){return e==null?At(this,Vt):new this.Collection(this,function(){return rn(void 0,e)})},mt.prototype.startsWith=function(e){return typeof e!="string"?At(this,La):this.between(e,e+vn,!0,!0)},mt.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):cr(this,function(t,o){return t.indexOf(o[0])===0},[e],vn)},mt.prototype.equalsIgnoreCase=function(e){return cr(this,function(t,o){return t===o[0]},[e],"")},mt.prototype.anyOfIgnoreCase=function(){var e=qe.apply(Ne,arguments);return e.length===0?Tn(this):cr(this,function(t,o){return o.indexOf(t)!==-1},e,"")},mt.prototype.startsWithAnyOfIgnoreCase=function(){var e=qe.apply(Ne,arguments);return e.length===0?Tn(this):cr(this,function(t,o){return o.some(function(s){return t.indexOf(s)===0})},e,vn)},mt.prototype.anyOf=function(){var e=this,t=qe.apply(Ne,arguments),o=this._cmp;try{t.sort(o)}catch{return At(this,Vt)}if(t.length===0)return Tn(this);var s=new this.Collection(this,function(){return rn(t[0],t[t.length-1])});s._ondirectionchange=function(c){o=c==="next"?e._ascending:e._descending,t.sort(o)};var u=0;return s._addAlgorithm(function(c,v,p){for(var _=c.key;0<o(_,t[u]);)if(++u===t.length)return v(p),!1;return o(_,t[u])===0||(v(function(){c.continue(t[u])}),!1)}),s},mt.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},mt.prototype.noneOf=function(){var e=qe.apply(Ne,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return At(this,Vt)}var t=e.reduce(function(o,s){return o?o.concat([[o[o.length-1][1],s]]):[[-1/0,s]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},mt.prototype.inAnyRange=function(K,t){var o=this,s=this._cmp,u=this._ascending,c=this._descending,v=this._min,p=this._max;if(K.length===0)return Tn(this);if(!K.every(function(U){return U[0]!==void 0&&U[1]!==void 0&&u(U[0],U[1])<=0}))return At(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ae.InvalidArgument);var _=!t||t.includeLowers!==!1,k=t&&t.includeUppers===!0,T,m=u;function O(U,Q){return m(U[0],Q[0])}try{(T=K.reduce(function(U,Q){for(var J=0,ee=U.length;J<ee;++J){var se=U[J];if(s(Q[0],se[1])<0&&0<s(Q[1],se[0])){se[0]=v(se[0],Q[0]),se[1]=p(se[1],Q[1]);break}}return J===ee&&U.push(Q),U},[])).sort(O)}catch{return At(this,Vt)}var w=0,D=k?function(U){return 0<u(U,T[w][1])}:function(U){return 0<=u(U,T[w][1])},E=_?function(U){return 0<c(U,T[w][0])}:function(U){return 0<=c(U,T[w][0])},C=D,K=new this.Collection(this,function(){return rn(T[0][0],T[T.length-1][1],!_,!k)});return K._ondirectionchange=function(U){m=U==="next"?(C=D,u):(C=E,c),T.sort(O)},K._addAlgorithm(function(U,Q,J){for(var ee,se=U.key;C(se);)if(++w===T.length)return Q(J),!1;return!D(ee=se)&&!E(ee)||(o._cmp(se,T[w][1])===0||o._cmp(se,T[w][0])===0||Q(function(){m===u?U.continue(T[w][0]):U.continue(T[w][1])}),!1)}),K},mt.prototype.startsWithAnyOf=function(){var e=qe.apply(Ne,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?Tn(this):this.inAnyRange(e.map(function(t){return[t,t+vn]})):At(this,"startsWithAnyOf() only works with strings")},mt);function mt(){}function Ht(e){return $e(function(t){return qn(t),e(t.target.error),!1})}function qn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Rn="storagemutated",Ur="x-storagemutated-1",an=jn(null,Rn),xi=(Lt.prototype._lock=function(){return S(!me.global),++this._reculock,this._reculock!==1||me.global||(me.lockOwnerFor=this),this},Lt.prototype._unlock=function(){if(S(!me.global),--this._reculock==0)for(me.global||(me.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{hn(e[1],e[0])}catch{}}return this},Lt.prototype._locked=function(){return this._reculock&&me.lockOwnerFor!==this},Lt.prototype.create=function(e){var t=this;if(!this.mode)return this;var o=this.db.idbdb,s=this.db._state.dbOpenError;if(S(!this.idbtrans),!e&&!o)switch(s&&s.name){case"DatabaseClosedError":throw new ae.DatabaseClosed(s);case"MissingAPIError":throw new ae.MissingAPI(s.message,s);default:throw new ae.OpenFailed(s)}if(!this.active)throw new ae.TransactionInactive;return S(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||o).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=$e(function(u){qn(u),t._reject(e.error)}),e.onabort=$e(function(u){qn(u),t.active&&t._reject(new ae.Abort(e.error)),t.active=!1,t.on("abort").fire(u)}),e.oncomplete=$e(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&an.storagemutated.fire(e.mutatedParts)}),this},Lt.prototype._promise=function(e,t,o){var s=this;if(e==="readwrite"&&this.mode!=="readwrite")return dt(new ae.ReadOnly("Transaction is readonly"));if(!this.active)return dt(new ae.TransactionInactive);if(this._locked())return new L(function(c,v){s._blockedFuncs.push([function(){s._promise(e,t,o).then(c,v)},me])});if(o)return Bt(function(){var c=new L(function(v,p){s._lock();var _=t(v,p,s);_&&_.then&&_.then(v,p)});return c.finally(function(){return s._unlock()}),c._lib=!0,c});var u=new L(function(c,v){var p=t(c,v,s);p&&p.then&&p.then(c,v)});return u._lib=!0,u},Lt.prototype._root=function(){return this.parent?this.parent._root():this},Lt.prototype.waitFor=function(e){var t,o=this._root(),s=L.resolve(e);o._waitingFor?o._waitingFor=o._waitingFor.then(function(){return s}):(o._waitingFor=s,o._waitingQueue=[],t=o.idbtrans.objectStore(o.storeNames[0]),(function c(){for(++o._spinCount;o._waitingQueue.length;)o._waitingQueue.shift()();o._waitingFor&&(t.get(-1/0).onsuccess=c)})());var u=o._waitingFor;return new L(function(c,v){s.then(function(p){return o._waitingQueue.push($e(c.bind(null,p)))},function(p){return o._waitingQueue.push($e(v.bind(null,p)))}).finally(function(){o._waitingFor===u&&(o._waitingFor=null)})})},Lt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ae.Abort))},Lt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(P(t,e))return t[e];var o=this.schema[e];if(!o)throw new ae.NotFound("Table "+e+" not part of transaction");return o=new this.db.Table(e,o,this),o.core=this.db.core.table(e),t[e]=o},Lt);function Lt(){}function Yr(e,t,o,s,u,c,v,p){return{name:e,keyPath:t,unique:o,multi:s,auto:u,compound:c,src:(o&&!v?"&":"")+(s?"*":"")+(u?"++":"")+eo(t),type:p}}function eo(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Vr(e,t,o){return{name:e,primKey:t,indexes:o,mappedClass:null,idxByName:(s=function(u){return[u.name,u]},o.reduce(function(u,c,v){return v=s(c,v),v&&(u[v[0]]=v[1]),u},{}))};var s}var Nn=function(e){try{return e.only([[]]),Nn=function(){return[[]]},[[]]}catch{return Nn=function(){return vn},vn}};function Gr(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(o){return o[t]}:function(o){return j(o,t)}:function(o){return j(o,e)};var t}function to(e){return[].slice.call(e)}var Di=0;function Bn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function Si(e,t,_){function s(C){if(C.type===3)return null;if(C.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var w=C.lower,D=C.upper,E=C.lowerOpen,C=C.upperOpen;return w===void 0?D===void 0?null:t.upperBound(D,!!C):D===void 0?t.lowerBound(w,!!E):t.bound(w,D,!!E,!!C)}function u(O){var w,D=O.name;return{name:D,schema:O,mutate:function(E){var C=E.trans,K=E.type,U=E.keys,Q=E.values,J=E.range;return new Promise(function(ee,se){ee=$e(ee);var ne=C.objectStore(D),re=ne.keyPath==null,ce=K==="put"||K==="add";if(!ce&&K!=="delete"&&K!=="deleteRange")throw new Error("Invalid operation type: "+K);var le,de=(U||Q||{length:1}).length;if(U&&Q&&U.length!==Q.length)throw new Error("Given keys array must have same length as given values array.");if(de===0)return ee({numFailures:0,failures:{},results:[],lastResult:void 0});function Fe(Tt){++ct,qn(Tt)}var We=[],Pe=[],ct=0;if(K==="deleteRange"){if(J.type===4)return ee({numFailures:ct,failures:Pe,results:[],lastResult:void 0});J.type===3?We.push(le=ne.clear()):We.push(le=ne.delete(s(J)))}else{var re=ce?re?[Q,U]:[Q,null]:[U,null],Me=re[0],kt=re[1];if(ce)for(var xt=0;xt<de;++xt)We.push(le=kt&&kt[xt]!==void 0?ne[K](Me[xt],kt[xt]):ne[K](Me[xt])),le.onerror=Fe;else for(xt=0;xt<de;++xt)We.push(le=ne[K](Me[xt])),le.onerror=Fe}function kr(Tt){Tt=Tt.target.result,We.forEach(function(yn,da){return yn.error!=null&&(Pe[da]=yn.error)}),ee({numFailures:ct,failures:Pe,results:K==="delete"?U:We.map(function(yn){return yn.result}),lastResult:Tt})}le.onerror=function(Tt){Fe(Tt),kr(Tt)},le.onsuccess=kr})},getMany:function(E){var C=E.trans,K=E.keys;return new Promise(function(U,Q){U=$e(U);for(var J,ee=C.objectStore(D),se=K.length,ne=new Array(se),re=0,ce=0,le=function(We){We=We.target,ne[We._pos]=We.result,++ce===re&&U(ne)},de=Ht(Q),Fe=0;Fe<se;++Fe)K[Fe]!=null&&((J=ee.get(K[Fe]))._pos=Fe,J.onsuccess=le,J.onerror=de,++re);re===0&&U(ne)})},get:function(E){var C=E.trans,K=E.key;return new Promise(function(U,Q){U=$e(U);var J=C.objectStore(D).get(K);J.onsuccess=function(ee){return U(ee.target.result)},J.onerror=Ht(Q)})},query:(w=k,function(E){return new Promise(function(C,K){C=$e(C);var U,Q,J,re=E.trans,ee=E.values,se=E.limit,le=E.query,ne=se===1/0?void 0:se,ce=le.index,le=le.range,re=re.objectStore(D),ce=ce.isPrimaryKey?re:re.index(ce.name),le=s(le);if(se===0)return C({result:[]});w?((ne=ee?ce.getAll(le,ne):ce.getAllKeys(le,ne)).onsuccess=function(de){return C({result:de.target.result})},ne.onerror=Ht(K)):(U=0,Q=!ee&&"openKeyCursor"in ce?ce.openKeyCursor(le):ce.openCursor(le),J=[],Q.onsuccess=function(de){var Fe=Q.result;return Fe?(J.push(ee?Fe.value:Fe.primaryKey),++U===se?C({result:J}):void Fe.continue()):C({result:J})},Q.onerror=Ht(K))})}),openCursor:function(E){var C=E.trans,K=E.values,U=E.query,Q=E.reverse,J=E.unique;return new Promise(function(ee,se){ee=$e(ee);var ce=U.index,ne=U.range,re=C.objectStore(D),re=ce.isPrimaryKey?re:re.index(ce.name),ce=Q?J?"prevunique":"prev":J?"nextunique":"next",le=!K&&"openKeyCursor"in re?re.openKeyCursor(s(ne),ce):re.openCursor(s(ne),ce);le.onerror=Ht(se),le.onsuccess=$e(function(de){var Fe,We,Pe,ct,Me=le.result;Me?(Me.___id=++Di,Me.done=!1,Fe=Me.continue.bind(Me),We=(We=Me.continuePrimaryKey)&&We.bind(Me),Pe=Me.advance.bind(Me),ct=function(){throw new Error("Cursor not stopped")},Me.trans=C,Me.stop=Me.continue=Me.continuePrimaryKey=Me.advance=function(){throw new Error("Cursor not started")},Me.fail=$e(se),Me.next=function(){var kt=this,xt=1;return this.start(function(){return xt--?kt.continue():kt.stop()}).then(function(){return kt})},Me.start=function(kt){function xt(){if(le.result)try{kt()}catch(Tt){Me.fail(Tt)}else Me.done=!0,Me.start=function(){throw new Error("Cursor behind last entry")},Me.stop()}var kr=new Promise(function(Tt,yn){Tt=$e(Tt),le.onerror=Ht(yn),Me.fail=yn,Me.stop=function(da){Me.stop=Me.continue=Me.continuePrimaryKey=Me.advance=ct,Tt(da)}});return le.onsuccess=$e(function(Tt){le.onsuccess=xt,xt()}),Me.continue=Fe,Me.continuePrimaryKey=We,Me.advance=Pe,xt(),kr},ee(Me)):ee(null)},se)})},count:function(E){var C=E.query,K=E.trans,U=C.index,Q=C.range;return new Promise(function(J,ee){var se=K.objectStore(D),ne=U.isPrimaryKey?se:se.index(U.name),se=s(Q),ne=se?ne.count(se):ne.count();ne.onsuccess=$e(function(re){return J(re.target.result)}),ne.onerror=Ht(ee)})}}}var c,v,p,T=(v=_,p=to((c=e).objectStoreNames),{schema:{name:c.name,tables:p.map(function(O){return v.objectStore(O)}).map(function(O){var w=O.keyPath,C=O.autoIncrement,D=g(w),E={},C={name:O.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:w==null,compound:D,keyPath:w,autoIncrement:C,unique:!0,extractKey:Gr(w)},indexes:to(O.indexNames).map(function(K){return O.index(K)}).map(function(J){var U=J.name,Q=J.unique,ee=J.multiEntry,J=J.keyPath,ee={name:U,compound:g(J),keyPath:J,unique:Q,multiEntry:ee,extractKey:Gr(J)};return E[Bn(J)]=ee}),getIndexByKeyPath:function(K){return E[Bn(K)]}};return E[":id"]=C.primaryKey,w!=null&&(E[Bn(w)]=C.primaryKey),C})},hasGetAll:0<p.length&&"getAll"in v.objectStore(p[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),_=T.schema,k=T.hasGetAll,T=_.tables.map(u),m={};return T.forEach(function(O){return m[O.name]=O}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(O){if(!m[O])throw new Error("Table '".concat(O,"' not found"));return m[O]},MIN_KEY:-1/0,MAX_KEY:Nn(t),schema:_}}function Ti(e,t,o,s){var u=o.IDBKeyRange;return o.indexedDB,{dbcore:(s=Si(t,u,s),e.dbcore.reduce(function(c,v){return v=v.create,i(i({},c),v(c))},s))}}function fr(e,s){var o=s.db,s=Ti(e._middlewares,o,e._deps,s);e.core=s.dbcore,e.tables.forEach(function(u){var c=u.name;e.core.schema.tables.some(function(v){return v.name===c})&&(u.core=e.core.table(c),e[c]instanceof e.Table&&(e[c].core=u.core))})}function dr(e,t,o,s){o.forEach(function(u){var c=s[u];t.forEach(function(v){var p=(function _(k,T){return F(k,T)||(k=x(k))&&_(k,T)})(v,u);(!p||"value"in p&&p.value===void 0)&&(v===e.Transaction.prototype||v instanceof e.Transaction?q(v,u,{get:function(){return this.table(u)},set:function(_){W(this,u,{value:_,writable:!0,configurable:!0,enumerable:!0})}}):v[u]=new e.Table(u,c))})})}function Qr(e,t){t.forEach(function(o){for(var s in o)o[s]instanceof e.Table&&delete o[s]})}function Ci(e,t){return e._cfg.version-t._cfg.version}function Ei(e,t,o,s){var u=e._dbSchema;o.objectStoreNames.contains("$meta")&&!u.$meta&&(u.$meta=Vr("$meta",ro("")[0],[]),e._storeNames.push("$meta"));var c=e._createTransaction("readwrite",e._storeNames,u);c.create(o),c._completion.catch(s);var v=c._reject.bind(c),p=me.transless||me;Bt(function(){return me.trans=c,me.transless=p,t!==0?(fr(e,o),k=t,((_=c).storeNames.includes("$meta")?_.table("$meta").get("version").then(function(T){return T??k}):L.resolve(k)).then(function(T){return O=T,w=c,D=o,E=[],T=(m=e)._versions,C=m._dbSchema=vr(0,m.idbdb,D),(T=T.filter(function(K){return K._cfg.version>=O})).length!==0?(T.forEach(function(K){E.push(function(){var U=C,Q=K._cfg.dbschema;gr(m,U,D),gr(m,Q,D),C=m._dbSchema=Q;var J=Jr(U,Q);J.add.forEach(function(ce){Xr(D,ce[0],ce[1].primKey,ce[1].indexes)}),J.change.forEach(function(ce){if(ce.recreate)throw new ae.Upgrade("Not yet support for changing primary key");var le=D.objectStore(ce.name);ce.add.forEach(function(de){return hr(le,de)}),ce.change.forEach(function(de){le.deleteIndex(de.name),hr(le,de)}),ce.del.forEach(function(de){return le.deleteIndex(de)})});var ee=K._cfg.contentUpgrade;if(ee&&K._cfg.version>O){fr(m,D),w._memoizedTables={};var se=oe(Q);J.del.forEach(function(ce){se[ce]=U[ce]}),Qr(m,[m.Transaction.prototype]),dr(m,[m.Transaction.prototype],h(se),se),w.schema=se;var ne,re=te(ee);return re&&xn(),J=L.follow(function(){var ce;(ne=ee(w))&&re&&(ce=tn.bind(null,null),ne.then(ce,ce))}),ne&&typeof ne.then=="function"?L.resolve(ne):J.then(function(){return ne})}}),E.push(function(U){var Q,J,ee=K._cfg.dbschema;Q=ee,J=U,[].slice.call(J.db.objectStoreNames).forEach(function(se){return Q[se]==null&&J.db.deleteObjectStore(se)}),Qr(m,[m.Transaction.prototype]),dr(m,[m.Transaction.prototype],m._storeNames,m._dbSchema),w.schema=m._dbSchema}),E.push(function(U){m.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(m.idbdb.version/10)===K._cfg.version?(m.idbdb.deleteObjectStore("$meta"),delete m._dbSchema.$meta,m._storeNames=m._storeNames.filter(function(Q){return Q!=="$meta"})):U.objectStore("$meta").put(K._cfg.version,"version"))})}),(function K(){return E.length?L.resolve(E.shift()(w.idbtrans)).then(K):L.resolve()})().then(function(){no(C,D)})):L.resolve();var m,O,w,D,E,C}).catch(v)):(h(u).forEach(function(T){Xr(o,T,u[T].primKey,u[T].indexes)}),fr(e,o),void L.follow(function(){return e.on.populate.fire(c)}).catch(v));var _,k})}function Ii(e,t){no(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var o=vr(0,e.idbdb,t);gr(e,e._dbSchema,t);for(var s=0,u=Jr(o,e._dbSchema).change;s<u.length;s++){var c=(function(v){if(v.change.length||v.recreate)return console.warn("Unable to patch indexes of table ".concat(v.name," because it has changes on the type of index or primary key.")),{value:void 0};var p=t.objectStore(v.name);v.add.forEach(function(_){rt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(v.name,".").concat(_.src)),hr(p,_)})})(u[s]);if(typeof c=="object")return c.value}}function Jr(e,t){var o,s={del:[],add:[],change:[]};for(o in e)t[o]||s.del.push(o);for(o in t){var u=e[o],c=t[o];if(u){var v={name:o,def:c,recreate:!1,del:[],add:[],change:[]};if(""+(u.primKey.keyPath||"")!=""+(c.primKey.keyPath||"")||u.primKey.auto!==c.primKey.auto)v.recreate=!0,s.change.push(v);else{var p=u.idxByName,_=c.idxByName,k=void 0;for(k in p)_[k]||v.del.push(k);for(k in _){var T=p[k],m=_[k];T?T.src!==m.src&&v.change.push(m):v.add.push(m)}(0<v.del.length||0<v.add.length||0<v.change.length)&&s.change.push(v)}}else s.add.push([o,c])}return s}function Xr(e,t,o,s){var u=e.db.createObjectStore(t,o.keyPath?{keyPath:o.keyPath,autoIncrement:o.auto}:{autoIncrement:o.auto});return s.forEach(function(c){return hr(u,c)}),u}function no(e,t){h(e).forEach(function(o){t.db.objectStoreNames.contains(o)||(rt&&console.debug("Dexie: Creating missing table",o),Xr(t,o,e[o].primKey,e[o].indexes))})}function hr(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function vr(e,t,o){var s={};return b(t.objectStoreNames,0).forEach(function(u){for(var c=o.objectStore(u),v=Yr(eo(k=c.keyPath),k||"",!0,!1,!!c.autoIncrement,k&&typeof k!="string",!0),p=[],_=0;_<c.indexNames.length;++_){var T=c.index(c.indexNames[_]),k=T.keyPath,T=Yr(T.name,k,!!T.unique,!!T.multiEntry,!1,k&&typeof k!="string",!1);p.push(T)}s[u]=Vr(u,v,p)}),s}function gr(e,t,o){for(var s=o.db.objectStoreNames,u=0;u<s.length;++u){var c=s[u],v=o.objectStore(c);e._hasGetAll="getAll"in v;for(var p=0;p<v.indexNames.length;++p){var _=v.indexNames[p],k=v.index(_).keyPath,T=typeof k=="string"?k:"["+b(k).join("+")+"]";!t[c]||(k=t[c].idxByName[T])&&(k.name=_,delete t[c].idxByName[T],t[c].idxByName[_]=k)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&f.WorkerGlobalScope&&f instanceof f.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function ro(e){return e.split(",").map(function(t,o){var c=t.split(":"),s=(u=c[1])===null||u===void 0?void 0:u.trim(),u=(t=c[0].trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(u)?u.match(/^\[(.*)\]$/)[1].split("+"):u;return Yr(u,c||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),g(c),o===0,s)})}var Oi=(Cn.prototype._createTableSchema=Vr,Cn.prototype._parseIndexSyntax=ro,Cn.prototype._parseStoresSpec=function(e,t){var o=this;h(e).forEach(function(s){if(e[s]!==null){var u=o._parseIndexSyntax(e[s]),c=u.shift();if(!c)throw new ae.Schema("Invalid schema for table "+s+": "+e[s]);if(c.unique=!0,c.multi)throw new ae.Schema("Primary key cannot be multiEntry*");u.forEach(function(v){if(v.auto)throw new ae.Schema("Only primary key can be marked as autoIncrement (++)");if(!v.keyPath)throw new ae.Schema("Index must have a name and cannot be an empty string")}),u=o._createTableSchema(s,c,u),t[s]=u}})},Cn.prototype.stores=function(o){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?y(this._cfg.storesSource,o):o;var o=t._versions,s={},u={};return o.forEach(function(c){y(s,c._cfg.storesSource),u=c._cfg.dbschema={},c._parseStoresSpec(s,u)}),t._dbSchema=u,Qr(t,[t._allTables,t,t.Transaction.prototype]),dr(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],h(u),u),t._storeNames=h(u),this},Cn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Ot(this._cfg.contentUpgrade||Se,e),this},Cn);function Cn(){}function Zr(e,t){var o=e._dbNamesDB;return o||(o=e._dbNamesDB=new Gt(or,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),o.table("dbnames")}function $r(e){return e&&typeof e.databases=="function"}function ea(e){return Bt(function(){return me.letThrough=!0,e()})}function ta(e){return!("from"in e)}var wt=function(e,t){if(!this){var o=new wt;return e&&"d"in e&&y(o,e),o}y(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function Hn(e,t,o){var s=He(t,o);if(!isNaN(s)){if(0<s)throw RangeError();if(ta(e))return y(e,{from:t,to:o,d:1});var u=e.l,s=e.r;if(He(o,e.from)<0)return u?Hn(u,t,o):e.l={from:t,to:o,d:1,l:null,r:null},oo(e);if(0<He(t,e.to))return s?Hn(s,t,o):e.r={from:t,to:o,d:1,l:null,r:null},oo(e);He(t,e.from)<0&&(e.from=t,e.l=null,e.d=s?s.d+1:1),0<He(o,e.to)&&(e.to=o,e.r=null,e.d=e.l?e.l.d+1:1),o=!e.r,u&&!e.l&&Ln(e,u),s&&o&&Ln(e,s)}}function Ln(e,t){ta(t)||(function o(s,_){var c=_.from,v=_.to,p=_.l,_=_.r;Hn(s,c,v),p&&o(s,p),_&&o(s,_)})(e,t)}function ao(e,t){var o=pr(t),s=o.next();if(s.done)return!1;for(var u=s.value,c=pr(e),v=c.next(u.from),p=v.value;!s.done&&!v.done;){if(He(p.from,u.to)<=0&&0<=He(p.to,u.from))return!0;He(u.from,p.from)<0?u=(s=o.next(p.from)).value:p=(v=c.next(u.from)).value}return!1}function pr(e){var t=ta(e)?null:{s:0,n:e};return{next:function(o){for(var s=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,s)for(;t.n.l&&He(o,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!s||He(o,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function oo(e){var t,o,s=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((o=e.l)===null||o===void 0?void 0:o.d)||0),u=1<s?"r":s<-1?"l":"";u&&(t=u=="r"?"l":"r",o=i({},e),s=e[u],e.from=s.from,e.to=s.to,e[u]=s[u],o[u]=s[t],(e[t]=o).d=io(o)),e.d=io(e)}function io(o){var t=o.r,o=o.l;return(t?o?Math.max(t.d,o.d):t.d:o?o.d:0)+1}function mr(e,t){return h(t).forEach(function(o){e[o]?Ln(e[o],t[o]):e[o]=(function s(u){var c,v,p={};for(c in u)P(u,c)&&(v=u[c],p[c]=!v||typeof v!="object"||fe.has(v.constructor)?v:s(v));return p})(t[o])}),e}function na(e,t){return e.all||t.all||Object.keys(e).some(function(o){return t[o]&&ao(t[o],e[o])})}H(wt.prototype,((jt={add:function(e){return Ln(this,e),this},addKey:function(e){return Hn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(o){return Hn(t,o,o)}),this},hasKey:function(e){var t=pr(this).next(e).value;return t&&He(t.from,e)<=0&&0<=He(t.to,e)}})[De]=function(){return pr(this)},jt));var pn={},ra={},aa=!1;function yr(e){mr(ra,e),aa||(aa=!0,setTimeout(function(){aa=!1,oa(ra,!(ra={}))},0))}function oa(e,t){t===void 0&&(t=!1);var o=new Set;if(e.all)for(var s=0,u=Object.values(pn);s<u.length;s++)so(v=u[s],e,o,t);else for(var c in e){var v,p=/^idb\:\/\/(.*)\/(.*)\//.exec(c);p&&(c=p[1],p=p[2],(v=pn["idb://".concat(c,"/").concat(p)])&&so(v,e,o,t))}o.forEach(function(_){return _()})}function so(e,t,o,s){for(var u=[],c=0,v=Object.entries(e.queries.query);c<v.length;c++){for(var p=v[c],_=p[0],k=[],T=0,m=p[1];T<m.length;T++){var O=m[T];na(t,O.obsSet)?O.subscribers.forEach(function(C){return o.add(C)}):s&&k.push(O)}s&&u.push([_,k])}if(s)for(var w=0,D=u;w<D.length;w++){var E=D[w],_=E[0],k=E[1];e.queries.query[_]=k}}function Mi(e){var t=e._state,o=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?dt(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var s=t.openCanceller,u=Math.round(10*e.verno),c=!1;function v(){if(t.openCanceller!==s)throw new ae.DatabaseClosed("db.open() was cancelled")}function p(){return new L(function(O,w){if(v(),!o)throw new ae.MissingAPI;var D=e.name,E=t.autoSchema||!u?o.open(D):o.open(D,u);if(!E)throw new ae.MissingAPI;E.onerror=Ht(w),E.onblocked=$e(e._fireOnBlocked),E.onupgradeneeded=$e(function(C){var K;T=E.transaction,t.autoSchema&&!e._options.allowEmptyDB?(E.onerror=qn,T.abort(),E.result.close(),(K=o.deleteDatabase(D)).onsuccess=K.onerror=$e(function(){w(new ae.NoSuchDatabase("Database ".concat(D," doesnt exist")))})):(T.onerror=Ht(w),C=C.oldVersion>Math.pow(2,62)?0:C.oldVersion,m=C<1,e.idbdb=E.result,c&&Ii(e,T),Ei(e,C/10,T,w))},w),E.onsuccess=$e(function(){T=null;var C,K,U,Q,J,ee=e.idbdb=E.result,se=b(ee.objectStoreNames);if(0<se.length)try{var ne=ee.transaction((Q=se).length===1?Q[0]:Q,"readonly");if(t.autoSchema)K=ee,U=ne,(C=e).verno=K.version/10,U=C._dbSchema=vr(0,K,U),C._storeNames=b(K.objectStoreNames,0),dr(C,[C._allTables],h(U),U);else if(gr(e,e._dbSchema,ne),((J=Jr(vr(0,(J=e).idbdb,ne),J._dbSchema)).add.length||J.change.some(function(re){return re.add.length||re.change.length}))&&!c)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ee.close(),u=ee.version+1,c=!0,O(p());fr(e,ne)}catch{}Dn.push(e),ee.onversionchange=$e(function(re){t.vcFired=!0,e.on("versionchange").fire(re)}),ee.onclose=$e(function(re){e.on("close").fire(re)}),m&&(J=e._deps,ne=D,ee=J.indexedDB,J=J.IDBKeyRange,$r(ee)||ne===or||Zr(ee,J).put({name:ne}).catch(Se)),O()},w)}).catch(function(O){switch(O==null?void 0:O.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),p();break;case"VersionError":if(0<u)return u=0,p()}return L.reject(O)})}var _,k=t.dbReadyResolve,T=null,m=!1;return L.race([s,(typeof navigator>"u"?L.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(O){function w(){return indexedDB.databases().finally(O)}_=setInterval(w,100),w()}).finally(function(){return clearInterval(_)}):Promise.resolve()).then(p)]).then(function(){return v(),t.onReadyBeingFired=[],L.resolve(ea(function(){return e.on.ready.fire(e.vip)})).then(function O(){if(0<t.onReadyBeingFired.length){var w=t.onReadyBeingFired.reduce(Ot,Se);return t.onReadyBeingFired=[],L.resolve(ea(function(){return w(e.vip)})).then(O)}})}).finally(function(){t.openCanceller===s&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(O){t.dbOpenError=O;try{T&&T.abort()}catch{}return s===t.openCanceller&&e._close(),dt(O)}).finally(function(){t.openComplete=!0,k()}).then(function(){var O;return m&&(O={},e.tables.forEach(function(w){w.schema.indexes.forEach(function(D){D.name&&(O["idb://".concat(e.name,"/").concat(w.name,"/").concat(D.name)]=new wt(-1/0,[[[]]]))}),O["idb://".concat(e.name,"/").concat(w.name,"/")]=O["idb://".concat(e.name,"/").concat(w.name,"/:dels")]=new wt(-1/0,[[[]]])}),an(Rn).fire(O),oa(O,!0)),e})}function ia(e){function t(c){return e.next(c)}var o=u(t),s=u(function(c){return e.throw(c)});function u(c){return function(_){var p=c(_),_=p.value;return p.done?_:_&&typeof _.then=="function"?_.then(o,s):g(_)?Promise.all(_).then(o,s):o(_)}}return u(t)()}function br(e,t,o){for(var s=g(e)?e.slice():[e],u=0;u<o;++u)s.push(t);return s}var Pi={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return i(i({},e),{table:function(t){var o=e.table(t),s=o.schema,u={},c=[];function v(m,O,w){var D=Bn(m),E=u[D]=u[D]||[],C=m==null?0:typeof m=="string"?1:m.length,K=0<O,K=i(i({},w),{name:K?"".concat(D,"(virtual-from:").concat(w.name,")"):w.name,lowLevelIndex:w,isVirtual:K,keyTail:O,keyLength:C,extractKey:Gr(m),unique:!K&&w.unique});return E.push(K),K.isPrimaryKey||c.push(K),1<C&&v(C===2?m[0]:m.slice(0,C-1),O+1,w),E.sort(function(U,Q){return U.keyTail-Q.keyTail}),K}t=v(s.primaryKey.keyPath,0,s.primaryKey),u[":id"]=[t];for(var p=0,_=s.indexes;p<_.length;p++){var k=_[p];v(k.keyPath,0,k)}function T(m){var O,w=m.query.index;return w.isVirtual?i(i({},m),{query:{index:w.lowLevelIndex,range:(O=m.query.range,w=w.keyTail,{type:O.type===1?2:O.type,lower:br(O.lower,O.lowerOpen?e.MAX_KEY:e.MIN_KEY,w),lowerOpen:!0,upper:br(O.upper,O.upperOpen?e.MIN_KEY:e.MAX_KEY,w),upperOpen:!0})}}):m}return i(i({},o),{schema:i(i({},s),{primaryKey:t,indexes:c,getIndexByKeyPath:function(m){return(m=u[Bn(m)])&&m[0]}}),count:function(m){return o.count(T(m))},query:function(m){return o.query(T(m))},openCursor:function(m){var O=m.query.index,w=O.keyTail,D=O.isVirtual,E=O.keyLength;return D?o.openCursor(T(m)).then(function(K){return K&&C(K)}):o.openCursor(m);function C(K){return Object.create(K,{continue:{value:function(U){U!=null?K.continue(br(U,m.reverse?e.MAX_KEY:e.MIN_KEY,w)):m.unique?K.continue(K.key.slice(0,E).concat(m.reverse?e.MIN_KEY:e.MAX_KEY,w)):K.continue()}},continuePrimaryKey:{value:function(U,Q){K.continuePrimaryKey(br(U,e.MAX_KEY,w),Q)}},primaryKey:{get:function(){return K.primaryKey}},key:{get:function(){var U=K.key;return E===1?U[0]:U.slice(0,E)}},value:{get:function(){return K.value}}})}}})}})}};function sa(e,t,o,s){return o=o||{},s=s||"",h(e).forEach(function(u){var c,v,p;P(t,u)?(c=e[u],v=t[u],typeof c=="object"&&typeof v=="object"&&c&&v?(p=Ke(c))!==Ke(v)?o[s+u]=t[u]:p==="Object"?sa(c,v,o,s+u+"."):c!==v&&(o[s+u]=t[u]):c!==v&&(o[s+u]=t[u])):o[s+u]=void 0}),h(t).forEach(function(u){P(e,u)||(o[s+u]=t[u])}),o}function ua(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Ai={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return i(i({},e),{table:function(t){var o=e.table(t),s=o.schema.primaryKey;return i(i({},o),{mutate:function(u){var c=me.trans,v=c.table(t).hook,p=v.deleting,_=v.creating,k=v.updating;switch(u.type){case"add":if(_.fire===Se)break;return c._promise("readwrite",function(){return T(u)},!0);case"put":if(_.fire===Se&&k.fire===Se)break;return c._promise("readwrite",function(){return T(u)},!0);case"delete":if(p.fire===Se)break;return c._promise("readwrite",function(){return T(u)},!0);case"deleteRange":if(p.fire===Se)break;return c._promise("readwrite",function(){return(function m(O,w,D){return o.query({trans:O,values:!1,query:{index:s,range:w},limit:D}).then(function(E){var C=E.result;return T({type:"delete",keys:C,trans:O}).then(function(K){return 0<K.numFailures?Promise.reject(K.failures[0]):C.length<D?{failures:[],numFailures:0,lastResult:void 0}:m(O,i(i({},w),{lower:C[C.length-1],lowerOpen:!0}),D)})})})(u.trans,u.range,1e4)},!0)}return o.mutate(u);function T(m){var O,w,D,E=me.trans,C=m.keys||ua(s,m);if(!C)throw new Error("Keys missing");return(m=m.type==="add"||m.type==="put"?i(i({},m),{keys:C}):i({},m)).type!=="delete"&&(m.values=l([],m.values)),m.keys&&(m.keys=l([],m.keys)),O=o,D=C,((w=m).type==="add"?Promise.resolve([]):O.getMany({trans:w.trans,keys:D,cache:"immutable"})).then(function(K){var U=C.map(function(Q,J){var ee,se,ne,re=K[J],ce={onerror:null,onsuccess:null};return m.type==="delete"?p.fire.call(ce,Q,re,E):m.type==="add"||re===void 0?(ee=_.fire.call(ce,Q,m.values[J],E),Q==null&&ee!=null&&(m.keys[J]=Q=ee,s.outbound||B(m.values[J],s.keyPath,Q))):(ee=sa(re,m.values[J]),(se=k.fire.call(ce,ee,Q,re,E))&&(ne=m.values[J],Object.keys(se).forEach(function(le){P(ne,le)?ne[le]=se[le]:B(ne,le,se[le])}))),ce});return o.mutate(m).then(function(Q){for(var J=Q.failures,ee=Q.results,se=Q.numFailures,Q=Q.lastResult,ne=0;ne<C.length;++ne){var re=(ee||C)[ne],ce=U[ne];re==null?ce.onerror&&ce.onerror(J[ne]):ce.onsuccess&&ce.onsuccess(m.type==="put"&&K[ne]?m.values[ne]:re)}return{failures:J,results:ee,numFailures:se,lastResult:Q}}).catch(function(Q){return U.forEach(function(J){return J.onerror&&J.onerror(Q)}),Promise.reject(Q)})})}}})}})}};function uo(e,t,o){try{if(!t||t.keys.length<e.length)return null;for(var s=[],u=0,c=0;u<t.keys.length&&c<e.length;++u)He(t.keys[u],e[c])===0&&(s.push(o?xe(t.values[u]):t.values[u]),++c);return s.length===e.length?s:null}catch{return null}}var ji={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var o=e.table(t);return i(i({},o),{getMany:function(s){if(!s.cache)return o.getMany(s);var u=uo(s.keys,s.trans._cache,s.cache==="clone");return u?L.resolve(u):o.getMany(s).then(function(c){return s.trans._cache={keys:s.keys,values:s.cache==="clone"?xe(c):c},c})},mutate:function(s){return s.type!=="add"&&(s.trans._cache=null),o.mutate(s)}})}}}};function lo(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function co(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Fi={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,o=new wt(e.MIN_KEY,e.MAX_KEY);return i(i({},e),{transaction:function(s,u,c){if(me.subscr&&u!=="readonly")throw new ae.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(me.querier));return e.transaction(s,u,c)},table:function(s){var u=e.table(s),c=u.schema,v=c.primaryKey,m=c.indexes,p=v.extractKey,_=v.outbound,k=v.autoIncrement&&m.filter(function(w){return w.compound&&w.keyPath.includes(v.keyPath)}),T=i(i({},u),{mutate:function(w){function D(le){return le="idb://".concat(t,"/").concat(s,"/").concat(le),Q[le]||(Q[le]=new wt)}var E,C,K,U=w.trans,Q=w.mutatedParts||(w.mutatedParts={}),J=D(""),ee=D(":dels"),se=w.type,ce=w.type==="deleteRange"?[w.range]:w.type==="delete"?[w.keys]:w.values.length<50?[ua(v,w).filter(function(le){return le}),w.values]:[],ne=ce[0],re=ce[1],ce=w.trans._cache;return g(ne)?(J.addKeys(ne),(ce=se==="delete"||ne.length===re.length?uo(ne,ce):null)||ee.addKeys(ne),(ce||re)&&(E=D,C=ce,K=re,c.indexes.forEach(function(le){var de=E(le.name||"");function Fe(Pe){return Pe!=null?le.extractKey(Pe):null}function We(Pe){return le.multiEntry&&g(Pe)?Pe.forEach(function(ct){return de.addKey(ct)}):de.addKey(Pe)}(C||K).forEach(function(Pe,kt){var Me=C&&Fe(C[kt]),kt=K&&Fe(K[kt]);He(Me,kt)!==0&&(Me!=null&&We(Me),kt!=null&&We(kt))})}))):ne?(re={from:(re=ne.lower)!==null&&re!==void 0?re:e.MIN_KEY,to:(re=ne.upper)!==null&&re!==void 0?re:e.MAX_KEY},ee.add(re),J.add(re)):(J.add(o),ee.add(o),c.indexes.forEach(function(le){return D(le.name).add(o)})),u.mutate(w).then(function(le){return!ne||w.type!=="add"&&w.type!=="put"||(J.addKeys(le.results),k&&k.forEach(function(de){for(var Fe=w.values.map(function(Me){return de.extractKey(Me)}),We=de.keyPath.findIndex(function(Me){return Me===v.keyPath}),Pe=0,ct=le.results.length;Pe<ct;++Pe)Fe[Pe][We]=le.results[Pe];D(de.name).addKeys(Fe)})),U.mutatedParts=mr(U.mutatedParts||{},Q),le})}}),m=function(D){var E=D.query,D=E.index,E=E.range;return[D,new wt((D=E.lower)!==null&&D!==void 0?D:e.MIN_KEY,(E=E.upper)!==null&&E!==void 0?E:e.MAX_KEY)]},O={get:function(w){return[v,new wt(w.key)]},getMany:function(w){return[v,new wt().addKeys(w.keys)]},count:m,query:m,openCursor:m};return h(O).forEach(function(w){T[w]=function(D){var E=me.subscr,C=!!E,K=lo(me,u)&&co(w,D)?D.obsSet={}:E;if(C){var U=function(re){return re="idb://".concat(t,"/").concat(s,"/").concat(re),K[re]||(K[re]=new wt)},Q=U(""),J=U(":dels"),E=O[w](D),C=E[0],E=E[1];if((w==="query"&&C.isPrimaryKey&&!D.values?J:U(C.name||"")).add(E),!C.isPrimaryKey){if(w!=="count"){var ee=w==="query"&&_&&D.values&&u.query(i(i({},D),{values:!1}));return u[w].apply(this,arguments).then(function(re){if(w==="query"){if(_&&D.values)return ee.then(function(Fe){return Fe=Fe.result,Q.addKeys(Fe),re});var ce=D.values?re.result.map(p):re.result;(D.values?Q:J).addKeys(ce)}else if(w==="openCursor"){var le=re,de=D.values;return le&&Object.create(le,{key:{get:function(){return J.addKey(le.primaryKey),le.key}},primaryKey:{get:function(){var Fe=le.primaryKey;return J.addKey(Fe),Fe}},value:{get:function(){return de&&Q.addKey(le.primaryKey),le.value}}})}return re})}J.add(o)}}return u[w].apply(this,arguments)}}),T}})}};function fo(e,t,o){if(o.numFailures===0)return t;if(t.type==="deleteRange")return null;var s=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return o.numFailures===s?null:(t=i({},t),g(t.keys)&&(t.keys=t.keys.filter(function(u,c){return!(c in o.failures)})),"values"in t&&g(t.values)&&(t.values=t.values.filter(function(u,c){return!(c in o.failures)})),t)}function la(e,t){return o=e,((s=t).lower===void 0||(s.lowerOpen?0<He(o,s.lower):0<=He(o,s.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?He(e,t.upper)<0:He(e,t.upper)<=0));var o,s}function ho(e,t,O,s,u,c){if(!O||O.length===0)return e;var v=t.query.index,p=v.multiEntry,_=t.query.range,k=s.schema.primaryKey.extractKey,T=v.extractKey,m=(v.lowLevelIndex||v).extractKey,O=O.reduce(function(w,D){var E=w,C=[];if(D.type==="add"||D.type==="put")for(var K=new wt,U=D.values.length-1;0<=U;--U){var Q,J=D.values[U],ee=k(J);K.hasKey(ee)||(Q=T(J),(p&&g(Q)?Q.some(function(le){return la(le,_)}):la(Q,_))&&(K.addKey(ee),C.push(J)))}switch(D.type){case"add":var se=new wt().addKeys(t.values?w.map(function(de){return k(de)}):w),E=w.concat(t.values?C.filter(function(de){return de=k(de),!se.hasKey(de)&&(se.addKey(de),!0)}):C.map(function(de){return k(de)}).filter(function(de){return!se.hasKey(de)&&(se.addKey(de),!0)}));break;case"put":var ne=new wt().addKeys(D.values.map(function(de){return k(de)}));E=w.filter(function(de){return!ne.hasKey(t.values?k(de):de)}).concat(t.values?C:C.map(function(de){return k(de)}));break;case"delete":var re=new wt().addKeys(D.keys);E=w.filter(function(de){return!re.hasKey(t.values?k(de):de)});break;case"deleteRange":var ce=D.range;E=w.filter(function(de){return!la(k(de),ce)})}return E},e);return O===e?e:(O.sort(function(w,D){return He(m(w),m(D))||He(k(w),k(D))}),t.limit&&t.limit<1/0&&(O.length>t.limit?O.length=t.limit:e.length===t.limit&&O.length<t.limit&&(u.dirty=!0)),c?Object.freeze(O):O)}function vo(e,t){return He(e.lower,t.lower)===0&&He(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Ki(e,t){return(function(o,s,u,c){if(o===void 0)return s!==void 0?-1:0;if(s===void 0)return 1;if((s=He(o,s))===0){if(u&&c)return 0;if(u)return 1;if(c)return-1}return s})(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=(function(o,s,u,c){if(o===void 0)return s!==void 0?1:0;if(s===void 0)return-1;if((s=He(o,s))===0){if(u&&c)return 0;if(u)return-1;if(c)return 1}return s})(e.upper,t.upper,e.upperOpen,t.upperOpen)}function qi(e,t,o,s){e.subscribers.add(o),s.addEventListener("abort",function(){var u,c;e.subscribers.delete(o),e.subscribers.size===0&&(u=e,c=t,setTimeout(function(){u.subscribers.size===0&&Le(c,u)},3e3))})}var Ri={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return i(i({},e),{transaction:function(o,s,u){var c,v,p=e.transaction(o,s,u);return s==="readwrite"&&(v=(c=new AbortController).signal,u=function(_){return function(){if(c.abort(),s==="readwrite"){for(var k=new Set,T=0,m=o;T<m.length;T++){var O=m[T],w=pn["idb://".concat(t,"/").concat(O)];if(w){var D=e.table(O),E=w.optimisticOps.filter(function(de){return de.trans===p});if(p._explicit&&_&&p.mutatedParts)for(var C=0,K=Object.values(w.queries.query);C<K.length;C++)for(var U=0,Q=(se=K[C]).slice();U<Q.length;U++)na((ne=Q[U]).obsSet,p.mutatedParts)&&(Le(se,ne),ne.subscribers.forEach(function(de){return k.add(de)}));else if(0<E.length){w.optimisticOps=w.optimisticOps.filter(function(de){return de.trans!==p});for(var J=0,ee=Object.values(w.queries.query);J<ee.length;J++)for(var se,ne,re,ce=0,le=(se=ee[J]).slice();ce<le.length;ce++)(ne=le[ce]).res!=null&&p.mutatedParts&&(_&&!ne.dirty?(re=Object.isFrozen(ne.res),re=ho(ne.res,ne.req,E,D,ne,re),ne.dirty?(Le(se,ne),ne.subscribers.forEach(function(de){return k.add(de)})):re!==ne.res&&(ne.res=re,ne.promise=L.resolve({result:re}))):(ne.dirty&&Le(se,ne),ne.subscribers.forEach(function(de){return k.add(de)})))}}}k.forEach(function(de){return de()})}}},p.addEventListener("abort",u(!1),{signal:v}),p.addEventListener("error",u(!1),{signal:v}),p.addEventListener("complete",u(!0),{signal:v})),p},table:function(o){var s=e.table(o),u=s.schema.primaryKey;return i(i({},s),{mutate:function(c){var v=me.trans;if(u.outbound||v.db._options.cache==="disabled"||v.explicit||v.idbtrans.mode!=="readwrite")return s.mutate(c);var p=pn["idb://".concat(t,"/").concat(o)];return p?(v=s.mutate(c),c.type!=="add"&&c.type!=="put"||!(50<=c.values.length||ua(u,c).some(function(_){return _==null}))?(p.optimisticOps.push(c),c.mutatedParts&&yr(c.mutatedParts),v.then(function(_){0<_.numFailures&&(Le(p.optimisticOps,c),(_=fo(0,c,_))&&p.optimisticOps.push(_),c.mutatedParts&&yr(c.mutatedParts))}),v.catch(function(){Le(p.optimisticOps,c),c.mutatedParts&&yr(c.mutatedParts)})):v.then(function(_){var k=fo(0,i(i({},c),{values:c.values.map(function(T,m){var O;return _.failures[m]?T:(T=(O=u.keyPath)!==null&&O!==void 0&&O.includes(".")?xe(T):i({},T),B(T,u.keyPath,_.results[m]),T)})}),_);p.optimisticOps.push(k),queueMicrotask(function(){return c.mutatedParts&&yr(c.mutatedParts)})}),v):s.mutate(c)},query:function(c){if(!lo(me,s)||!co("query",c))return s.query(c);var v=((k=me.trans)===null||k===void 0?void 0:k.db._options.cache)==="immutable",m=me,p=m.requery,_=m.signal,k=(function(D,E,C,K){var U=pn["idb://".concat(D,"/").concat(E)];if(!U)return[];if(!(E=U.queries[C]))return[null,!1,U,null];var Q=E[(K.query?K.query.index.name:null)||""];if(!Q)return[null,!1,U,null];switch(C){case"query":var J=Q.find(function(ee){return ee.req.limit===K.limit&&ee.req.values===K.values&&vo(ee.req.query.range,K.query.range)});return J?[J,!0,U,Q]:[Q.find(function(ee){return("limit"in ee.req?ee.req.limit:1/0)>=K.limit&&(!K.values||ee.req.values)&&Ki(ee.req.query.range,K.query.range)}),!1,U,Q];case"count":return J=Q.find(function(ee){return vo(ee.req.query.range,K.query.range)}),[J,!!J,U,Q]}})(t,o,"query",c),T=k[0],m=k[1],O=k[2],w=k[3];return T&&m?T.obsSet=c.obsSet:(m=s.query(c).then(function(D){var E=D.result;if(T&&(T.res=E),v){for(var C=0,K=E.length;C<K;++C)Object.freeze(E[C]);Object.freeze(E)}else D.result=xe(E);return D}).catch(function(D){return w&&T&&Le(w,T),Promise.reject(D)}),T={obsSet:c.obsSet,promise:m,subscribers:new Set,type:"query",req:c,dirty:!1},w?w.push(T):(w=[T],(O=O||(pn["idb://".concat(t,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[c.query.index.name||""]=w)),qi(T,w,p,_),T.promise.then(function(D){return{result:ho(D.result,c,O==null?void 0:O.optimisticOps,s,T,v)}})}})}})}};function _r(e,t){return new Proxy(e,{get:function(o,s,u){return s==="db"?t:Reflect.get(o,s,u)}})}var Gt=(ht.prototype.version=function(e){if(isNaN(e)||e<.1)throw new ae.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ae.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,o=t.filter(function(s){return s._cfg.version===e})[0];return o||(o=new this.Version(e),t.push(o),t.sort(Ci),o.stores({}),this._state.autoSchema=!1,o)},ht.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||me.letThrough||this._vip)?e():new L(function(o,s){if(t._state.openComplete)return s(new ae.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void s(new ae.DatabaseClosed);t.open().catch(Se)}t._state.dbReadyPromise.then(o,s)}).then(e)},ht.prototype.use=function(e){var t=e.stack,o=e.create,s=e.level,u=e.name;return u&&this.unuse({stack:t,name:u}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:o,level:s??10,name:u}),e.sort(function(c,v){return c.level-v.level}),this},ht.prototype.unuse=function(e){var t=e.stack,o=e.name,s=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(u){return s?u.create!==s:!!o&&u.name!==o})),this},ht.prototype.open=function(){var e=this;return hn(Ft,function(){return Mi(e)})},ht.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,t=Dn.indexOf(this);if(0<=t&&Dn.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new L(function(o){e.dbReadyResolve=o}),e.openCanceller=new L(function(o,s){e.cancelOpen=s}))},ht.prototype.close=function(o){var t=(o===void 0?{disableAutoOpen:!0}:o).disableAutoOpen,o=this._state;t?(o.isBeingOpened&&o.cancelOpen(new ae.DatabaseClosed),this._close(),o.autoOpen=!1,o.dbOpenError=new ae.DatabaseClosed):(this._close(),o.autoOpen=this._options.autoOpen||o.isBeingOpened,o.openComplete=!1,o.dbOpenError=null)},ht.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var o=0<arguments.length&&typeof arguments[0]!="object",s=this._state;return new L(function(u,c){function v(){t.close(e);var p=t._deps.indexedDB.deleteDatabase(t.name);p.onsuccess=$e(function(){var _,k,T;_=t._deps,k=t.name,T=_.indexedDB,_=_.IDBKeyRange,$r(T)||k===or||Zr(T,_).delete(k).catch(Se),u()}),p.onerror=Ht(c),p.onblocked=t._fireOnBlocked}if(o)throw new ae.InvalidArgument("Invalid closeOptions argument to db.delete()");s.isBeingOpened?s.dbReadyPromise.then(v):v()})},ht.prototype.backendDB=function(){return this.idbdb},ht.prototype.isOpen=function(){return this.idbdb!==null},ht.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},ht.prototype.hasFailed=function(){return this._state.dbOpenError!==null},ht.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ht.prototype,"tables",{get:function(){var e=this;return h(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),ht.prototype.transaction=function(){var e=(function(t,o,s){var u=arguments.length;if(u<2)throw new ae.InvalidArgument("Too few arguments");for(var c=new Array(u-1);--u;)c[u-1]=arguments[u];return s=c.pop(),[t,$(c),s]}).apply(this,arguments);return this._transaction.apply(this,e)},ht.prototype._transaction=function(e,t,o){var s=this,u=me.trans;u&&u.db===this&&e.indexOf("!")===-1||(u=null);var c,v,p=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(v=t.map(function(k){if(k=k instanceof s.Table?k.name:k,typeof k!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return k}),e=="r"||e===Hr)c=Hr;else{if(e!="rw"&&e!=Lr)throw new ae.InvalidArgument("Invalid transaction mode: "+e);c=Lr}if(u){if(u.mode===Hr&&c===Lr){if(!p)throw new ae.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");u=null}u&&v.forEach(function(k){if(u&&u.storeNames.indexOf(k)===-1){if(!p)throw new ae.SubTransaction("Table "+k+" not included in parent transaction.");u=null}}),p&&u&&!u.active&&(u=null)}}catch(k){return u?u._promise(null,function(T,m){m(k)}):dt(k)}var _=(function k(T,m,O,w,D){return L.resolve().then(function(){var E=me.transless||me,C=T._createTransaction(m,O,T._dbSchema,w);if(C.explicit=!0,E={trans:C,transless:E},w)C.idbtrans=w.idbtrans;else try{C.create(),C.idbtrans._explicit=!0,T._state.PR1398_maxLoop=3}catch(Q){return Q.name===ye.InvalidState&&T.isOpen()&&0<--T._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),T.close({disableAutoOpen:!1}),T.open().then(function(){return k(T,m,O,null,D)})):dt(Q)}var K,U=te(D);return U&&xn(),E=L.follow(function(){var Q;(K=D.call(C,C))&&(U?(Q=tn.bind(null,null),K.then(Q,Q)):typeof K.next=="function"&&typeof K.throw=="function"&&(K=ia(K)))},E),(K&&typeof K.then=="function"?L.resolve(K).then(function(Q){return C.active?Q:dt(new ae.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):E.then(function(){return K})).then(function(Q){return w&&C._resolve(),C._completion.then(function(){return Q})}).catch(function(Q){return C._reject(Q),dt(Q)})})}).bind(null,this,c,v,u,o);return u?u._promise(c,_,"lock"):me.trans?hn(me.transless,function(){return s._whenReady(_)}):this._whenReady(_)},ht.prototype.table=function(e){if(!P(this._allTables,e))throw new ae.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},ht);function ht(e,t){var o=this;this._middlewares={},this.verno=0;var s=ht.dependencies;this._options=t=i({addons:ht.addons,autoOpen:!0,indexedDB:s.indexedDB,IDBKeyRange:s.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},s=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var u,c,v,p,_,k={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Se,dbReadyPromise:null,cancelOpen:Se,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};k.dbReadyPromise=new L(function(m){k.dbReadyResolve=m}),k.openCanceller=new L(function(m,O){k.cancelOpen=O}),this._state=k,this.name=e,this.on=jn(this,"populate","blocked","versionchange","close",{ready:[Ot,Se]}),this.once=function(m,O){var w=function(){for(var D=[],E=0;E<arguments.length;E++)D[E]=arguments[E];o.on(m).unsubscribe(w),O.apply(o,D)};return o.on(m,w)},this.on.ready.subscribe=I(this.on.ready.subscribe,function(m){return function(O,w){ht.vip(function(){var D,E=o._state;E.openComplete?(E.dbOpenError||L.resolve().then(O),w&&m(O)):E.onReadyBeingFired?(E.onReadyBeingFired.push(O),w&&m(O)):(m(O),D=o,w||m(function C(){D.on.ready.unsubscribe(O),D.on.ready.unsubscribe(C)}))})}}),this.Collection=(u=this,Fn(_i.prototype,function(K,C){this.db=u;var w=za,D=null;if(C)try{w=C()}catch(U){D=U}var E=K._ctx,C=E.table,K=C.hook.reading.fire;this._ctx={table:C,index:E.index,isPrimKey:!E.index||C.schema.primKey.keyPath&&E.index===C.schema.primKey.name,range:w,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:D,or:E.or,valueMapper:K!==ft?K:null}})),this.Table=(c=this,Fn(Va.prototype,function(m,O,w){this.db=c,this._tx=w,this.name=m,this.schema=O,this.hook=c._allTables[m]?c._allTables[m].hook:jn(null,{creating:[It,Se],reading:[lt,ft],updating:[yt,Se],deleting:[_t,Se]})})),this.Transaction=(v=this,Fn(xi.prototype,function(m,O,w,D,E){var C=this;m!=="readonly"&&O.forEach(function(K){K=(K=w[K])===null||K===void 0?void 0:K.yProps,K&&(O=O.concat(K.map(function(U){return U.updatesTable})))}),this.db=v,this.mode=m,this.storeNames=O,this.schema=w,this.chromeTransactionDurability=D,this.idbtrans=null,this.on=jn(this,"complete","error","abort"),this.parent=E||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new L(function(K,U){C._resolve=K,C._reject=U}),this._completion.then(function(){C.active=!1,C.on.complete.fire()},function(K){var U=C.active;return C.active=!1,C.on.error.fire(K),C.parent?C.parent._reject(K):U&&C.idbtrans&&C.idbtrans.abort(),dt(K)})})),this.Version=(p=this,Fn(Oi.prototype,function(m){this.db=p,this._cfg={version:m,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(_=this,Fn($a.prototype,function(m,O,w){if(this.db=_,this._ctx={table:m,index:O===":id"?null:O,or:w},this._cmp=this._ascending=He,this._descending=function(D,E){return He(E,D)},this._max=function(D,E){return 0<He(D,E)?D:E},this._min=function(D,E){return He(D,E)<0?D:E},this._IDBKeyRange=_._deps.IDBKeyRange,!this._IDBKeyRange)throw new ae.MissingAPI})),this.on("versionchange",function(m){0<m.newVersion?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(m){!m.newVersion||m.newVersion<m.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(m.oldVersion/10))}),this._maxKey=Nn(t.IDBKeyRange),this._createTransaction=function(m,O,w,D){return new o.Transaction(m,O,w,o._options.chromeTransactionDurability,D)},this._fireOnBlocked=function(m){o.on("blocked").fire(m),Dn.filter(function(O){return O.name===o.name&&O!==o&&!O._state.vcFired}).map(function(O){return O.on("versionchange").fire(m)})},this.use(ji),this.use(Ri),this.use(Fi),this.use(Pi),this.use(Ai);var T=new Proxy(this,{get:function(m,O,w){if(O==="_vip")return!0;if(O==="table")return function(E){return _r(o.table(E),T)};var D=Reflect.get(m,O,w);return D instanceof Va?_r(D,T):O==="tables"?D.map(function(E){return _r(E,T)}):O==="_createTransaction"?function(){return _r(D.apply(this,arguments),T)}:D}});this.vip=T,s.forEach(function(m){return m(o)})}var wr,jt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ni=(ca.prototype.subscribe=function(e,t,o){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:o})},ca.prototype[jt]=function(){return this},ca);function ca(e){this._subscribe=e}try{wr={indexedDB:f.indexedDB||f.mozIndexedDB||f.webkitIndexedDB||f.msIndexedDB,IDBKeyRange:f.IDBKeyRange||f.webkitIDBKeyRange}}catch{wr={indexedDB:null,IDBKeyRange:null}}function go(e){var t,o=!1,s=new Ni(function(u){var c=te(e),v,p=!1,_={},k={},T={get closed(){return p},unsubscribe:function(){p||(p=!0,v&&v.abort(),m&&an.storagemutated.unsubscribe(w))}};u.start&&u.start(T);var m=!1,O=function(){return Br(D)},w=function(E){mr(_,E),na(k,_)&&O()},D=function(){var E,C,K;!p&&wr.indexedDB&&(_={},E={},v&&v.abort(),v=new AbortController,K=(function(U){var Q=Mt();try{c&&xn();var J=Bt(e,U);return J=c?J.finally(tn):J}finally{Q&&$t()}})(C={subscr:E,signal:v.signal,requery:O,querier:e,trans:null}),Promise.resolve(K).then(function(U){o=!0,t=U,p||C.signal.aborted||(_={},(function(Q){for(var J in Q)if(P(Q,J))return;return 1})(k=E)||m||(an(Rn,w),m=!0),Br(function(){return!p&&u.next&&u.next(U)}))},function(U){o=!1,["DatabaseClosedError","AbortError"].includes(U==null?void 0:U.name)||p||Br(function(){p||u.error&&u.error(U)})}))};return setTimeout(O,0),T});return s.hasValue=function(){return o},s.getValue=function(){return t},s}var mn=Gt;function fa(e){var t=on;try{on=!0,an.storagemutated.fire(e),oa(e,!0)}finally{on=t}}H(mn,i(i({},Ye),{delete:function(e){return new mn(e,{addons:[]}).delete()},exists:function(e){return new mn(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=mn.dependencies,o=t.indexedDB,t=t.IDBKeyRange,($r(o)?Promise.resolve(o.databases()).then(function(s){return s.map(function(u){return u.name}).filter(function(u){return u!==or})}):Zr(o,t).toCollection().primaryKeys()).then(e)}catch{return dt(new ae.MissingAPI)}var t,o},defineClass:function(){return function(e){y(this,e)}},ignoreTransaction:function(e){return me.trans?hn(me.transless,e):e()},vip:ea,async:function(e){return function(){try{var t=ia(e.apply(this,arguments));return t&&typeof t.then=="function"?t:L.resolve(t)}catch(o){return dt(o)}}},spawn:function(e,t,o){try{var s=ia(e.apply(o,t||[]));return s&&typeof s.then=="function"?s:L.resolve(s)}catch(u){return dt(u)}},currentTransaction:{get:function(){return me.trans||null}},waitFor:function(e,t){return t=L.resolve(typeof e=="function"?mn.ignoreTransaction(e):e).timeout(t||6e4),me.trans?me.trans.waitFor(t):t},Promise:L,debug:{get:function(){return rt},set:function(e){Kt(e)}},derive:Y,extend:y,props:H,override:I,Events:jn,on:an,liveQuery:go,extendObservabilitySet:mr,getByKeyPath:j,setByKeyPath:B,delByKeyPath:function(e,t){typeof t=="string"?B(e,t,void 0):"length"in t&&[].map.call(t,function(o){B(e,o,void 0)})},shallowClone:oe,deepClone:xe,getObjectDiff:sa,cmp:He,asap:z,minKey:-1/0,addons:[],connections:Dn,errnames:ye,dependencies:wr,cache:pn,semVer:"4.2.0",version:"4.2.0".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,o){return e+t/Math.pow(10,2*o)})})),mn.maxKey=Nn(mn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(an(Rn,function(e){on||(e=new CustomEvent(Ur,{detail:e}),on=!0,dispatchEvent(e),on=!1)}),addEventListener(Ur,function(e){e=e.detail,on||fa(e)}));var En,on=!1,po=function(){};return typeof BroadcastChannel<"u"&&((po=function(){(En=new BroadcastChannel(Ur)).onmessage=function(e){return e.data&&fa(e.data)}})(),typeof En.unref=="function"&&En.unref(),an(Rn,function(e){on||En.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Gt.disableBfCache&&e.persisted){rt&&console.debug("Dexie: handling persisted pagehide"),En!=null&&En.close();for(var t=0,o=Dn;t<o.length;t++)o[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Gt.disableBfCache&&e.persisted&&(rt&&console.debug("Dexie: handling persisted pageshow"),po(),fa({all:new wt(-1/0,[[]])}))})),L.rejectionMapper=function(e,t){return!e||e instanceof Z||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Be[e.name]?e:(t=new Be[e.name](t||e.message,e),"stack"in e&&q(t,"stack",{get:function(){return this.inner.stack}}),t)},Kt(rt),i(Gt,Object.freeze({__proto__:null,Dexie:Gt,liveQuery:go,Entity:Wa,cmp:He,PropModification:Kn,replacePrefix:function(e,t){return new Kn({replacePrefix:[e,t]})},add:function(e){return new Kn({add:e})},remove:function(e){return new Kn({remove:e})},default:Gt,RangeSet:wt,mergeRanges:Ln,rangesOverlap:ao}),{default:Gt}),Gt})})(Tr)),Tr.exports}var Us=Ws();const Ea=ii(Us),Mo=Symbol.for("Dexie"),Or=globalThis[Mo]||(globalThis[Mo]=Ea);if(Ea.semVer!==Or.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Ea.semVer} and ${Or.semVer}`);const{liveQuery:Bf,mergeRanges:Hf,rangesOverlap:Lf,RangeSet:zf,cmp:Wf,Entity:Uf,PropModification:Yf,replacePrefix:Vf,add:Gf,remove:Qf,DexieYProvider:Jf}=Or;class Ys{constructor(){this._db=new Or("FastingHours"),this._db.version(30).stores({history:"id, started",hunger:"id, created",water:"id, created",weight:"id, created"})}browseHistory(){return this._db.history.toArray()}browseHistoryByEnd(){return this._db.history.toArray().then(n=>n.filter(i=>i.ended===null)[0])}readHistory(n){return this._db.history.get({id:n})}editHistory(n){const r=Wn(n);return r.updated=new Date,this._db.history.put(r).then(()=>this._db.history.get({id:n.id}))}addHistory(){const n={id:crypto.randomUUID(),type:"history",created:new Date,updated:new Date,started:new Date,ended:null,notes:null};return this._db.history.add(n).then(()=>this._db.history.get({id:n.id}))}deleteHistory(n){return this._db.history.delete(n)}browseHunger(n=!1){return this._db.hunger.toArray().then(r=>n?(r.sort((i,l)=>i.created.getTime()<l.created.getTime()?1:i.created.getTime()>l.created.getTime()?-1:0),r.length===0?null:r[0]):r)}readHunger(n){return this._db.hunger.get({id:n})}editHunger(n){const r=Wn(n);return r.updated=new Date,this._db.hunger.put(r).then(()=>this._db.hunger.get({id:n.id}))}addHunger(n=5){const r={id:crypto.randomUUID(),type:"hunger",created:new Date,updated:new Date,level:n};return this._db.hunger.add(r).then(()=>this._db.hunger.get({id:r.id}))}deleteHunger(n){return this._db.hunger.delete(n)}browseWater(n=!1){return this._db.water.toArray().then(r=>{if(n){const i=new Date;i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0);const l=new Date(i.getTime());return l.setDate(l.getDate()+1),r.filter(f=>f.created.getTime()>i.getTime()&&f.created.getTime()<l.getTime())}else return r})}readWater(n){return this._db.water.get({id:n})}editWater(n){const r=Wn(n);return r.updated=new Date,this._db.water.put(r).then(()=>this._db.water.get({id:n.id}))}addWater(n){const r={id:crypto.randomUUID(),type:"water",created:new Date,updated:new Date,volume:n};return crypto.randomUUID(),this._db.water.add(r).then(()=>this._db.water.get({id:r.id}))}deleteWater(n){return this._db.water.delete(n)}browseWeight(n=!1){return this._db.weight.toArray().then(r=>{if(n){const i=new Date;i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0);const l=new Date(i.getTime());return l.setDate(l.getDate()+1),r.filter(f=>f.created.getTime()>i.getTime()&&f.created.getTime()<l.getTime())}else return r})}readWeight(n){return this._db.weight.get({id:n})}editWeight(n){const r=Wn(n);return this._db.weight.put(r).then(()=>this._db.weight.get({id:n.id}))}addWeight(n){const r=crypto.randomUUID(),i=Wn(n);return i.id=r,console.log("ADD"),console.log(i),this._db.weight.add(i).then(()=>this._db.weight.get({id:r}))}deleteWeight(n){return this._db.weight.delete(n)}}var wa={exports:{}},Po;function Vs(){return Po||(Po=1,(function(a,n){(function(){var r=Math.PI,i=Math.sin,l=Math.cos,f=Math.tan,h=Math.asin,g=Math.atan2,y=Math.acos,x=r/180,A=1e3*60*60*24,P=2440588,H=2451545;function W(te){return te.valueOf()/A-.5+P}function q(te){return new Date((te+.5-P)*A)}function Y(te){return W(te)-H}var F=x*23.4397;function N(te,G){return g(i(te)*l(F)-f(G)*i(F),l(te))}function b(te,G){return h(i(G)*l(F)+l(G)*i(F)*i(te))}function I(te,G,Z){return g(i(te),l(te)*i(G)-f(Z)*l(G))}function S(te,G,Z){return h(i(G)*i(Z)+l(G)*l(Z)*l(te))}function z(te,G){return x*(280.16+360.9856235*te)-G}function j(te){return te<0&&(te=0),2967e-7/Math.tan(te+.00312536/(te+.08901179))}function B(te){return x*(357.5291+.98560028*te)}function oe(te){var G=x*(1.9148*i(te)+.02*i(2*te)+3e-4*i(3*te)),Z=x*102.9372;return te+G+Z+r}function ie(te){var G=B(te),Z=oe(G);return{dec:b(Z,0),ra:N(Z,0)}}var $={};$.getPosition=function(te,G,Z){var pe=x*-Z,we=x*G,Ae=Y(te),ye=ie(Ae),Ce=z(Ae,pe)-ye.ra;return{azimuth:I(Ce,we,ye.dec),altitude:S(Ce,we,ye.dec)}};var fe=$.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];$.addTime=function(te,G,Z){fe.push([te,G,Z])};var _e=9e-4;function xe(te,G){return Math.round(te-_e-G/(2*r))}function Ge(te,G,Z){return _e+(te+G)/(2*r)+Z}function Ke(te,G,Z){return H+te+.0053*i(G)-.0069*i(2*Z)}function De(te,G,Z){return y((i(te)-i(G)*i(Z))/(l(G)*l(Z)))}function Ie(te){return-2.076*Math.sqrt(te)/60}function Le(te,G,Z,pe,we,Ae,ye){var Ce=De(te,Z,pe),ae=Ge(Ce,G,we);return Ke(ae,Ae,ye)}$.getTimes=function(te,G,Z,pe){pe=pe||0;var we=x*-Z,Ae=x*G,ye=Ie(pe),Ce=Y(te),ae=xe(Ce,we),Be=Ge(0,we,ae),Ye=B(Be),Se=oe(Ye),ft=b(Se,0),lt=Ke(Be,Ye,Se),it,It,_t,yt,St,Ot,rt={solarNoon:q(lt),nadir:q(lt-.5)};for(it=0,It=fe.length;it<It;it+=1)_t=fe[it],yt=(_t[0]+ye)*x,St=Le(yt,we,Ae,ft,ae,Ye,Se),Ot=lt-(St-lt),rt[_t[1]]=q(Ot),rt[_t[2]]=q(St);return rt};function Ne(te){var G=x*(218.316+13.176396*te),Z=x*(134.963+13.064993*te),pe=x*(93.272+13.22935*te),we=G+x*6.289*i(Z),Ae=x*5.128*i(pe),ye=385001-20905*l(Z);return{ra:N(we,Ae),dec:b(we,Ae),dist:ye}}$.getMoonPosition=function(te,G,Z){var pe=x*-Z,we=x*G,Ae=Y(te),ye=Ne(Ae),Ce=z(Ae,pe)-ye.ra,ae=S(Ce,we,ye.dec),Be=g(i(Ce),f(we)*l(ye.dec)-i(ye.dec)*l(Ce));return ae=ae+j(ae),{azimuth:I(Ce,we,ye.dec),altitude:ae,distance:ye.dist,parallacticAngle:Be}},$.getMoonIllumination=function(te){var G=Y(te||new Date),Z=ie(G),pe=Ne(G),we=149598e3,Ae=y(i(Z.dec)*i(pe.dec)+l(Z.dec)*l(pe.dec)*l(Z.ra-pe.ra)),ye=g(we*i(Ae),pe.dist-we*l(Ae)),Ce=g(l(Z.dec)*i(Z.ra-pe.ra),i(Z.dec)*l(pe.dec)-l(Z.dec)*i(pe.dec)*l(Z.ra-pe.ra));return{fraction:(1+l(ye))/2,phase:.5+.5*ye*(Ce<0?-1:1)/Math.PI,angle:Ce}};function qe(te,G){return new Date(te.valueOf()+G*A/24)}$.getMoonTimes=function(te,G,Z,pe){var we=new Date(te);pe?we.setUTCHours(0,0,0,0):we.setHours(0,0,0,0);for(var Ae=.133*x,ye=$.getMoonPosition(we,G,Z).altitude-Ae,Ce,ae,Be,Ye,Se,ft,lt,it,It,_t,yt,St,Ot,rt=1;rt<=24&&(Ce=$.getMoonPosition(qe(we,rt),G,Z).altitude-Ae,ae=$.getMoonPosition(qe(we,rt+1),G,Z).altitude-Ae,Se=(ye+ae)/2-Ce,ft=(ae-ye)/2,lt=-ft/(2*Se),it=(Se*lt+ft)*lt+Ce,It=ft*ft-4*Se*Ce,_t=0,It>=0&&(Ot=Math.sqrt(It)/(Math.abs(Se)*2),yt=lt-Ot,St=lt+Ot,Math.abs(yt)<=1&&_t++,Math.abs(St)<=1&&_t++,yt<-1&&(yt=St)),_t===1?ye<0?Be=rt+yt:Ye=rt+yt:_t===2&&(Be=rt+(it<0?St:yt),Ye=rt+(it<0?yt:St)),!(Be&&Ye));rt+=2)ye=ae;var Kt={};return Be&&(Kt.rise=qe(we,Be)),Ye&&(Kt.set=qe(we,Ye)),!Be&&!Ye&&(Kt[it>0?"alwaysUp":"alwaysDown"]=!0),Kt},a.exports=$})()})(wa)),wa.exports}var Gs=Vs();const Qs=ii(Gs),si=/^[a-z0-9]+(-[a-z0-9]+)*$/,qr=(a,n,r,i="")=>{const l=a.split(":");if(a.slice(0,1)==="@"){if(l.length<2||l.length>3)return null;i=l.shift().slice(1)}if(l.length>3||!l.length)return null;if(l.length>1){const g=l.pop(),y=l.pop(),x={provider:l.length>0?l[0]:i,prefix:y,name:g};return n&&!Cr(x)?null:x}const f=l[0],h=f.split("-");if(h.length>1){const g={provider:i,prefix:h.shift(),name:h.join("-")};return n&&!Cr(g)?null:g}if(r&&i===""){const g={provider:i,prefix:"",name:f};return n&&!Cr(g,r)?null:g}return null},Cr=(a,n)=>a?!!((n&&a.prefix===""||a.prefix)&&a.name):!1,ui=Object.freeze({left:0,top:0,width:16,height:16}),Mr=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),Rr=Object.freeze({...ui,...Mr}),Ia=Object.freeze({...Rr,body:"",hidden:!1});function Js(a,n){const r={};!a.hFlip!=!n.hFlip&&(r.hFlip=!0),!a.vFlip!=!n.vFlip&&(r.vFlip=!0);const i=((a.rotate||0)+(n.rotate||0))%4;return i&&(r.rotate=i),r}function Ao(a,n){const r=Js(a,n);for(const i in Ia)i in Mr?i in a&&!(i in r)&&(r[i]=Mr[i]):i in n?r[i]=n[i]:i in a&&(r[i]=a[i]);return r}function Xs(a,n){const r=a.icons,i=a.aliases||Object.create(null),l=Object.create(null);function f(h){if(r[h])return l[h]=[];if(!(h in l)){l[h]=null;const g=i[h]&&i[h].parent,y=g&&f(g);y&&(l[h]=[g].concat(y))}return l[h]}return Object.keys(r).concat(Object.keys(i)).forEach(f),l}function Zs(a,n,r){const i=a.icons,l=a.aliases||Object.create(null);let f={};function h(g){f=Ao(i[g]||l[g],f)}return h(n),r.forEach(h),Ao(a,f)}function li(a,n){const r=[];if(typeof a!="object"||typeof a.icons!="object")return r;a.not_found instanceof Array&&a.not_found.forEach(l=>{n(l,null),r.push(l)});const i=Xs(a);for(const l in i){const f=i[l];f&&(n(l,Zs(a,l,f)),r.push(l))}return r}const $s={provider:"",aliases:{},not_found:{},...ui};function ka(a,n){for(const r in n)if(r in a&&typeof a[r]!=typeof n[r])return!1;return!0}function ci(a){if(typeof a!="object"||a===null)return null;const n=a;if(typeof n.prefix!="string"||!a.icons||typeof a.icons!="object"||!ka(a,$s))return null;const r=n.icons;for(const l in r){const f=r[l];if(!l||typeof f.body!="string"||!ka(f,Ia))return null}const i=n.aliases||Object.create(null);for(const l in i){const f=i[l],h=f.parent;if(!l||typeof h!="string"||!r[h]&&!i[h]||!ka(f,Ia))return null}return n}const jo=Object.create(null);function eu(a,n){return{provider:a,prefix:n,icons:Object.create(null),missing:new Set}}function Pn(a,n){const r=jo[a]||(jo[a]=Object.create(null));return r[n]||(r[n]=eu(a,n))}function fi(a,n){return ci(n)?li(n,(r,i)=>{i?a.icons[r]=i:a.missing.add(r)}):[]}function tu(a,n,r){try{if(typeof r.body=="string")return a.icons[n]={...r},!0}catch{}return!1}let $n=!1;function di(a){return typeof a=="boolean"&&($n=a),$n}function nu(a){const n=typeof a=="string"?qr(a,!0,$n):a;if(n){const r=Pn(n.provider,n.prefix),i=n.name;return r.icons[i]||(r.missing.has(i)?null:void 0)}}function ru(a,n){const r=qr(a,!0,$n);if(!r)return!1;const i=Pn(r.provider,r.prefix);return n?tu(i,r.name,n):(i.missing.add(r.name),!0)}function au(a,n){if(typeof a!="object")return!1;if(typeof n!="string"&&(n=a.provider||""),$n&&!n&&!a.prefix){let l=!1;return ci(a)&&(a.prefix="",li(a,(f,h)=>{ru(f,h)&&(l=!0)})),l}const r=a.prefix;if(!Cr({prefix:r,name:"a"}))return!1;const i=Pn(n,r);return!!fi(i,a)}const hi=Object.freeze({width:null,height:null}),vi=Object.freeze({...hi,...Mr}),ou=/(-?[0-9.]*[0-9]+[0-9.]*)/g,iu=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Fo(a,n,r){if(n===1)return a;if(r=r||100,typeof a=="number")return Math.ceil(a*n*r)/r;if(typeof a!="string")return a;const i=a.split(ou);if(i===null||!i.length)return a;const l=[];let f=i.shift(),h=iu.test(f);for(;;){if(h){const g=parseFloat(f);isNaN(g)?l.push(f):l.push(Math.ceil(g*n*r)/r)}else l.push(f);if(f=i.shift(),f===void 0)return l.join("");h=!h}}function su(a,n="defs"){let r="";const i=a.indexOf("<"+n);for(;i>=0;){const l=a.indexOf(">",i),f=a.indexOf("</"+n);if(l===-1||f===-1)break;const h=a.indexOf(">",f);if(h===-1)break;r+=a.slice(l+1,f).trim(),a=a.slice(0,i).trim()+a.slice(h+1)}return{defs:r,content:a}}function uu(a,n){return a?"<defs>"+a+"</defs>"+n:n}function lu(a,n,r){const i=su(a);return uu(i.defs,n+i.content+r)}const cu=a=>a==="unset"||a==="undefined"||a==="none";function fu(a,n){const r={...Rr,...a},i={...vi,...n},l={left:r.left,top:r.top,width:r.width,height:r.height};let f=r.body;[r,i].forEach(Y=>{const F=[],N=Y.hFlip,b=Y.vFlip;let I=Y.rotate;N?b?I+=2:(F.push("translate("+(l.width+l.left).toString()+" "+(0-l.top).toString()+")"),F.push("scale(-1 1)"),l.top=l.left=0):b&&(F.push("translate("+(0-l.left).toString()+" "+(l.height+l.top).toString()+")"),F.push("scale(1 -1)"),l.top=l.left=0);let S;switch(I<0&&(I-=Math.floor(I/4)*4),I=I%4,I){case 1:S=l.height/2+l.top,F.unshift("rotate(90 "+S.toString()+" "+S.toString()+")");break;case 2:F.unshift("rotate(180 "+(l.width/2+l.left).toString()+" "+(l.height/2+l.top).toString()+")");break;case 3:S=l.width/2+l.left,F.unshift("rotate(-90 "+S.toString()+" "+S.toString()+")");break}I%2===1&&(l.left!==l.top&&(S=l.left,l.left=l.top,l.top=S),l.width!==l.height&&(S=l.width,l.width=l.height,l.height=S)),F.length&&(f=lu(f,'<g transform="'+F.join(" ")+'">',"</g>"))});const h=i.width,g=i.height,y=l.width,x=l.height;let A,P;h===null?(P=g===null?"1em":g==="auto"?x:g,A=Fo(P,y/x)):(A=h==="auto"?y:h,P=g===null?Fo(A,x/y):g==="auto"?x:g);const H={},W=(Y,F)=>{cu(F)||(H[Y]=F.toString())};W("width",A),W("height",P);const q=[l.left,l.top,y,x];return H.viewBox=q.join(" "),{attributes:H,viewBox:q,body:f}}const du=/\sid="(\S+)"/g,hu="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let vu=0;function gu(a,n=hu){const r=[];let i;for(;i=du.exec(a);)r.push(i[1]);if(!r.length)return a;const l="suffix"+(Math.random()*16777216|Date.now()).toString(16);return r.forEach(f=>{const h=typeof n=="function"?n(f):n+(vu++).toString(),g=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");a=a.replace(new RegExp('([#;"])('+g+')([")]|\\.[a-z])',"g"),"$1"+h+l+"$3")}),a=a.replace(new RegExp(l,"g"),""),a}const Oa=Object.create(null);function pu(a,n){Oa[a]=n}function Ma(a){return Oa[a]||Oa[""]}function qa(a){let n;if(typeof a.resources=="string")n=[a.resources];else if(n=a.resources,!(n instanceof Array)||!n.length)return null;return{resources:n,path:a.path||"/",maxURL:a.maxURL||500,rotate:a.rotate||750,timeout:a.timeout||5e3,random:a.random===!0,index:a.index||0,dataAfterTimeout:a.dataAfterTimeout!==!1}}const Ra=Object.create(null),Vn=["https://api.simplesvg.com","https://api.unisvg.com"],Er=[];for(;Vn.length>0;)Vn.length===1||Math.random()>.5?Er.push(Vn.shift()):Er.push(Vn.pop());Ra[""]=qa({resources:["https://api.iconify.design"].concat(Er)});function mu(a,n){const r=qa(n);return r===null?!1:(Ra[a]=r,!0)}function Na(a){return Ra[a]}const yu=()=>{let a;try{if(a=fetch,typeof a=="function")return a}catch{}};let Ko=yu();function bu(a,n){const r=Na(a);if(!r)return 0;let i;if(!r.maxURL)i=0;else{let l=0;r.resources.forEach(h=>{l=Math.max(l,h.length)});const f=n+".json?icons=";i=r.maxURL-l-r.path.length-f.length}return i}function _u(a){return a===404}const wu=(a,n,r)=>{const i=[],l=bu(a,n),f="icons";let h={type:f,provider:a,prefix:n,icons:[]},g=0;return r.forEach((y,x)=>{g+=y.length+1,g>=l&&x>0&&(i.push(h),h={type:f,provider:a,prefix:n,icons:[]},g=y.length),h.icons.push(y)}),i.push(h),i};function ku(a){if(typeof a=="string"){const n=Na(a);if(n)return n.path}return"/"}const xu=(a,n,r)=>{if(!Ko){r("abort",424);return}let i=ku(n.provider);switch(n.type){case"icons":{const f=n.prefix,g=n.icons.join(","),y=new URLSearchParams({icons:g});i+=f+".json?"+y.toString();break}case"custom":{const f=n.uri;i+=f.slice(0,1)==="/"?f.slice(1):f;break}default:r("abort",400);return}let l=503;Ko(a+i).then(f=>{const h=f.status;if(h!==200){setTimeout(()=>{r(_u(h)?"abort":"next",h)});return}return l=501,f.json()}).then(f=>{if(typeof f!="object"||f===null){setTimeout(()=>{f===404?r("abort",f):r("next",l)});return}setTimeout(()=>{r("success",f)})}).catch(()=>{r("next",l)})},Du={prepare:wu,send:xu};function Su(a){const n={loaded:[],missing:[],pending:[]},r=Object.create(null);a.sort((l,f)=>l.provider!==f.provider?l.provider.localeCompare(f.provider):l.prefix!==f.prefix?l.prefix.localeCompare(f.prefix):l.name.localeCompare(f.name));let i={provider:"",prefix:"",name:""};return a.forEach(l=>{if(i.name===l.name&&i.prefix===l.prefix&&i.provider===l.provider)return;i=l;const f=l.provider,h=l.prefix,g=l.name,y=r[f]||(r[f]=Object.create(null)),x=y[h]||(y[h]=Pn(f,h));let A;g in x.icons?A=n.loaded:h===""||x.missing.has(g)?A=n.missing:A=n.pending;const P={provider:f,prefix:h,name:g};A.push(P)}),n}function gi(a,n){a.forEach(r=>{const i=r.loaderCallbacks;i&&(r.loaderCallbacks=i.filter(l=>l.id!==n))})}function Tu(a){a.pendingCallbacksFlag||(a.pendingCallbacksFlag=!0,setTimeout(()=>{a.pendingCallbacksFlag=!1;const n=a.loaderCallbacks?a.loaderCallbacks.slice(0):[];if(!n.length)return;let r=!1;const i=a.provider,l=a.prefix;n.forEach(f=>{const h=f.icons,g=h.pending.length;h.pending=h.pending.filter(y=>{if(y.prefix!==l)return!0;const x=y.name;if(a.icons[x])h.loaded.push({provider:i,prefix:l,name:x});else if(a.missing.has(x))h.missing.push({provider:i,prefix:l,name:x});else return r=!0,!0;return!1}),h.pending.length!==g&&(r||gi([a],f.id),f.callback(h.loaded.slice(0),h.missing.slice(0),h.pending.slice(0),f.abort))})}))}let Cu=0;function Eu(a,n,r){const i=Cu++,l=gi.bind(null,r,i);if(!n.pending.length)return l;const f={id:i,icons:n,callback:a,abort:l};return r.forEach(h=>{(h.loaderCallbacks||(h.loaderCallbacks=[])).push(f)}),l}function Iu(a,n=!0,r=!1){const i=[];return a.forEach(l=>{const f=typeof l=="string"?qr(l,n,r):l;f&&i.push(f)}),i}var Ou={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function Mu(a,n,r,i){const l=a.resources.length,f=a.random?Math.floor(Math.random()*l):a.index;let h;if(a.random){let j=a.resources.slice(0);for(h=[];j.length>1;){const B=Math.floor(Math.random()*j.length);h.push(j[B]),j=j.slice(0,B).concat(j.slice(B+1))}h=h.concat(j)}else h=a.resources.slice(f).concat(a.resources.slice(0,f));const g=Date.now();let y="pending",x=0,A,P=null,H=[],W=[];typeof i=="function"&&W.push(i);function q(){P&&(clearTimeout(P),P=null)}function Y(){y==="pending"&&(y="aborted"),q(),H.forEach(j=>{j.status==="pending"&&(j.status="aborted")}),H=[]}function F(j,B){B&&(W=[]),typeof j=="function"&&W.push(j)}function N(){return{startTime:g,payload:n,status:y,queriesSent:x,queriesPending:H.length,subscribe:F,abort:Y}}function b(){y="failed",W.forEach(j=>{j(void 0,A)})}function I(){H.forEach(j=>{j.status==="pending"&&(j.status="aborted")}),H=[]}function S(j,B,oe){const ie=B!=="success";switch(H=H.filter($=>$!==j),y){case"pending":break;case"failed":if(ie||!a.dataAfterTimeout)return;break;default:return}if(B==="abort"){A=oe,b();return}if(ie){A=oe,H.length||(h.length?z():b());return}if(q(),I(),!a.random){const $=a.resources.indexOf(j.resource);$!==-1&&$!==a.index&&(a.index=$)}y="completed",W.forEach($=>{$(oe)})}function z(){if(y!=="pending")return;q();const j=h.shift();if(j===void 0){if(H.length){P=setTimeout(()=>{q(),y==="pending"&&(I(),b())},a.timeout);return}b();return}const B={status:"pending",resource:j,callback:(oe,ie)=>{S(B,oe,ie)}};H.push(B),x++,P=setTimeout(z,a.rotate),r(j,n,B.callback)}return setTimeout(z),N}function pi(a){const n={...Ou,...a};let r=[];function i(){r=r.filter(g=>g().status==="pending")}function l(g,y,x){const A=Mu(n,g,y,(P,H)=>{i(),x&&x(P,H)});return r.push(A),A}function f(g){return r.find(y=>g(y))||null}return{query:l,find:f,setIndex:g=>{n.index=g},getIndex:()=>n.index,cleanup:i}}function qo(){}const xa=Object.create(null);function Pu(a){if(!xa[a]){const n=Na(a);if(!n)return;const r=pi(n),i={config:n,redundancy:r};xa[a]=i}return xa[a]}function Au(a,n,r){let i,l;if(typeof a=="string"){const f=Ma(a);if(!f)return r(void 0,424),qo;l=f.send;const h=Pu(a);h&&(i=h.redundancy)}else{const f=qa(a);if(f){i=pi(f);const h=a.resources?a.resources[0]:"",g=Ma(h);g&&(l=g.send)}}return!i||!l?(r(void 0,424),qo):i.query(n,l,r)().abort}function Ro(){}function ju(a){a.iconsLoaderFlag||(a.iconsLoaderFlag=!0,setTimeout(()=>{a.iconsLoaderFlag=!1,Tu(a)}))}function Fu(a){const n=[],r=[];return a.forEach(i=>{(i.match(si)?n:r).push(i)}),{valid:n,invalid:r}}function Gn(a,n,r){function i(){const l=a.pendingIcons;n.forEach(f=>{l&&l.delete(f),a.icons[f]||a.missing.add(f)})}if(r&&typeof r=="object")try{if(!fi(a,r).length){i();return}}catch(l){console.error(l)}i(),ju(a)}function No(a,n){a instanceof Promise?a.then(r=>{n(r)}).catch(()=>{n(null)}):n(a)}function Ku(a,n){a.iconsToLoad?a.iconsToLoad=a.iconsToLoad.concat(n).sort():a.iconsToLoad=n,a.iconsQueueFlag||(a.iconsQueueFlag=!0,setTimeout(()=>{a.iconsQueueFlag=!1;const{provider:r,prefix:i}=a,l=a.iconsToLoad;if(delete a.iconsToLoad,!l||!l.length)return;const f=a.loadIcon;if(a.loadIcons&&(l.length>1||!f)){No(a.loadIcons(l,i,r),A=>{Gn(a,l,A)});return}if(f){l.forEach(A=>{const P=f(A,i,r);No(P,H=>{const W=H?{prefix:i,icons:{[A]:H}}:null;Gn(a,[A],W)})});return}const{valid:h,invalid:g}=Fu(l);if(g.length&&Gn(a,g,null),!h.length)return;const y=i.match(si)?Ma(r):null;if(!y){Gn(a,h,null);return}y.prepare(r,i,h).forEach(A=>{Au(r,A,P=>{Gn(a,A.icons,P)})})}))}const qu=(a,n)=>{const r=Iu(a,!0,di()),i=Su(r);if(!i.pending.length){let y=!0;return n&&setTimeout(()=>{y&&n(i.loaded,i.missing,i.pending,Ro)}),()=>{y=!1}}const l=Object.create(null),f=[];let h,g;return i.pending.forEach(y=>{const{provider:x,prefix:A}=y;if(A===g&&x===h)return;h=x,g=A,f.push(Pn(x,A));const P=l[x]||(l[x]=Object.create(null));P[A]||(P[A]=[])}),i.pending.forEach(y=>{const{provider:x,prefix:A,name:P}=y,H=Pn(x,A),W=H.pendingIcons||(H.pendingIcons=new Set);W.has(P)||(W.add(P),l[x][A].push(P))}),f.forEach(y=>{const x=l[y.provider][y.prefix];x.length&&Ku(y,x)}),n?Eu(n,i,f):Ro};function Ru(a,n){const r={...a};for(const i in n){const l=n[i],f=typeof l;i in hi?(l===null||l&&(f==="string"||f==="number"))&&(r[i]=l):f===typeof r[i]&&(r[i]=i==="rotate"?l%4:l)}return r}const Nu=/[\s,]+/;function Bu(a,n){n.split(Nu).forEach(r=>{switch(r.trim()){case"horizontal":a.hFlip=!0;break;case"vertical":a.vFlip=!0;break}})}function Hu(a,n=0){const r=a.replace(/^-?[0-9.]*/,"");function i(l){for(;l<0;)l+=4;return l%4}if(r===""){const l=parseInt(a);return isNaN(l)?0:i(l)}else if(r!==a){let l=0;switch(r){case"%":l=25;break;case"deg":l=90}if(l){let f=parseFloat(a.slice(0,a.length-r.length));return isNaN(f)?0:(f=f/l,f%1===0?i(f):0)}}return n}function Lu(a,n){let r=a.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const i in n)r+=" "+i+'="'+n[i]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+r+">"+a+"</svg>"}function zu(a){return a.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function Wu(a){return"data:image/svg+xml,"+zu(a)}function Uu(a){return'url("'+Wu(a)+'")'}const Bo={...vi,inline:!1},Yu={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},Vu={display:"inline-block"},Pa={"background-color":"currentColor"},mi={"background-color":"transparent"},Ho={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},Lo={"-webkit-mask":Pa,mask:Pa,background:mi};for(const a in Lo){const n=Lo[a];for(const r in Ho)n[a+"-"+r]=Ho[r]}function Gu(a){return a+(a.match(/^[-0-9.]+$/)?"px":"")}function Qu(a,n){const r=Ru(Bo,n),i=n.mode||"svg",l=i==="svg"?{...Yu}:{};a.body.indexOf("xlink:")===-1&&delete l["xmlns:xlink"];let f=typeof n.style=="string"?n.style:"";for(let N in n){const b=n[N];if(b!==void 0)switch(N){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":r[N]=b===!0||b==="true"||b===1;break;case"flip":typeof b=="string"&&Bu(r,b);break;case"color":f=f+(f.length>0&&f.trim().slice(-1)!==";"?";":"")+"color: "+b+"; ";break;case"rotate":typeof b=="string"?r[N]=Hu(b):typeof b=="number"&&(r[N]=b);break;case"ariaHidden":case"aria-hidden":b!==!0&&b!=="true"&&delete l["aria-hidden"];break;default:if(N.slice(0,3)==="on:")break;Bo[N]===void 0&&(l[N]=b)}}const h=fu(a,r),g=h.attributes;if(r.inline&&(f="vertical-align: -0.125em; "+f),i==="svg"){Object.assign(l,g),f!==""&&(l.style=f);let N=0,b=n.id;return typeof b=="string"&&(b=b.replace(/-/g,"_")),{svg:!0,attributes:l,body:gu(h.body,b?()=>b+"ID"+N++:"iconifySvelte")}}const{body:y,width:x,height:A}=a,P=i==="mask"||(i==="bg"?!1:y.indexOf("currentColor")!==-1),H=Lu(y,{...g,width:x+"",height:A+""}),q={"--svg":Uu(H)},Y=N=>{const b=g[N];b&&(q[N]=Gu(b))};Y("width"),Y("height"),Object.assign(q,Vu,P?Pa:mi);let F="";for(const N in q)F+=N+": "+q[N]+";";return l.style=F+f,{svg:!1,attributes:l}}di(!0);pu("",Du);if(typeof document<"u"&&typeof window<"u"){const a=window;if(a.IconifyPreload!==void 0){const n=a.IconifyPreload,r="Invalid IconifyPreload syntax.";typeof n=="object"&&n!==null&&(n instanceof Array?n:[n]).forEach(i=>{try{(typeof i!="object"||i===null||i instanceof Array||typeof i.icons!="object"||typeof i.prefix!="string"||!au(i))&&console.error(r)}catch{console.error(r)}})}if(a.IconifyProviders!==void 0){const n=a.IconifyProviders;if(typeof n=="object"&&n!==null)for(let r in n){const i="IconifyProviders["+r+"] is invalid.";try{const l=n[r];if(typeof l!="object"||!l||l.resources===void 0)continue;mu(r,l)||console.error(i)}catch{console.error(i)}}}}function Ju(a,n,r,i,l){function f(){n.loading&&(n.loading.abort(),n.loading=null)}if(typeof a=="object"&&a!==null&&typeof a.body=="string")return n.name="",f(),{data:{...Rr,...a}};let h;if(typeof a!="string"||(h=qr(a,!1,!0))===null)return f(),null;const g=nu(h);if(!g)return r&&(!n.loading||n.loading.name!==a)&&(f(),n.name="",n.loading={name:a,abort:qu([h],i)}),null;f(),n.name!==a&&(n.name=a,l&&!n.destroyed&&setTimeout(()=>{l(a)}));const y=["iconify"];return h.prefix!==""&&y.push("iconify--"+h.prefix),h.provider!==""&&y.push("iconify--"+h.provider),{data:g,classes:y}}function Xu(a,n){return a?Qu({...Rr,...a},n):null}var Zu=tr("<svg><!></svg>"),$u=be("<span></span>");function Je(a,n){tt(n,!0);const r={name:"",loading:null,destroyed:!1},i=Es(n,["$$slots","$$events","$$legacy"]);let l=he(!1),f=he(0),h=Ee(()=>!!n.ssr||d(l)),g=Ee(()=>(d(f),Ju(n.icon,r,d(h),x,n.onload))),y=Ee(()=>{const W=d(g)?Xu(d(g).data,i):null;return W&&d(g).classes&&(W.attributes.class=(typeof i.class=="string"?i.class+" ":"")+d(g).classes.join(" ")),W});function x(){Cs(f)}Jt(()=>{X(l,!0)}),Yi(()=>{r.destroyed=!0,r.loading&&(r.loading.abort(),r.loading=null)});var A=Dt(),P=et(A);{var H=W=>{var q=Dt(),Y=et(q);{var F=b=>{var I=Zu();Co(I,()=>({...d(y).attributes}));var S=R(I);Ps(S,()=>d(y).body,!0),M(I),ue(b,I)},N=b=>{var I=$u();Co(I,()=>({...d(y).attributes})),ue(b,I)};Qe(Y,b=>{d(y).svg?b(F):b(N,!1)})}ue(W,q)};Qe(P,W=>{d(y)&&W(H)})}ue(a,A),nt()}var el=(a,n)=>n(0),tl=(a,n)=>n(14),nl=(a,n)=>n(16),rl=(a,n)=>n(23),al=(a,n)=>n(40),ol=be('<div class="svelte-ziixid"><button type="button"><!></button> <button type="button">14h</button> <button type="button">16h</button> <button type="button">23h</button> <button type="button">40h</button></div>');function il(a,n){tt(n,!0);let r=ge(n,"value",7,0);function i(F){r(F),n.onchange&&n.onchange(r())}var l=ol(),f=R(l);f.__click=[el,i];let h;var g=R(f);Je(g,{height:"20",icon:"stash:infinity-duotone",width:"20"}),M(f);var y=V(f,2);y.__click=[tl,i];let x;var A=V(y,2);A.__click=[nl,i];let P;var H=V(A,2);H.__click=[rl,i];let W;var q=V(H,2);q.__click=[al,i];let Y;M(l),Oe((F,N,b,I,S)=>{h=Ve(f,1,"svelte-ziixid",null,h,F),x=Ve(y,1,"svelte-ziixid",null,x,N),P=Ve(A,1,"svelte-ziixid",null,P,b),W=Ve(H,1,"svelte-ziixid",null,W,I),Y=Ve(q,1,"svelte-ziixid",null,Y,S)},[()=>({selected:r()===0}),()=>({selected:r()===14}),()=>({selected:r()===16}),()=>({selected:r()===23}),()=>({selected:r()===40})]),ue(a,l),nt()}ut(["click"]);var sl=be('<div class="hour svelte-z94qzf"></div>'),ul=be('<div class="day svelte-z94qzf"><!></div>'),ll=be('<p class="day svelte-z94qzf"> </p> <!>',1),cl=be('<div class="day svelte-z94qzf"><div class="hour svelte-z94qzf"></div></div>'),fl=be('<figure class="svelte-z94qzf"><div class="labels svelte-z94qzf"><p class="date svelte-z94qzf">Date</p> <p class="hour svelte-z94qzf">0</p> <p class="hour svelte-z94qzf">12</p> <p class="hour svelte-z94qzf">24</p></div> <div class="grid svelte-z94qzf"><!></div> <div class="average grid svelte-z94qzf"><p class="day svelte-z94qzf">Avg</p> <!></div></figure>');function dl(a,n){tt(n,!0);let r=ge(n,"average",19,()=>[]),i=ge(n,"daily",3,null);ge(n,"days",3,10);function l(H){return H=new Date(H+"T00:00:00"),new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(H)}function f(H,W){return H===0||W[H-1]===0?(1-W[H])*100+"%":0}var h=fl(),g=V(R(h),2),y=R(g);{var x=H=>{var W=Dt(),q=et(W);Et(q,17,()=>Object.keys(i()),Ct,(Y,F)=>{const N=Ee(()=>i()[d(F)]);var b=ll(),I=et(b),S=R(I,!0);M(I);var z=V(I,2);Et(z,16,()=>({length:24}),Ct,(j,B,oe)=>{var ie=ul(),$=R(ie);{var fe=_e=>{var xe=sl();let Ge;Oe(Ke=>Ge=_n(xe,"",Ge,Ke),[()=>({"margin-left":f(oe,d(N)),width:100*d(N)[oe]+"%"})]),ue(_e,xe)};Qe($,_e=>{d(N)[oe]!==0&&_e(fe)})}M(ie),ue(j,ie)}),Oe(j=>ke(S,j),[()=>l(d(F))]),ue(Y,b)}),ue(H,W)};Qe(y,H=>{i()!==null&&H(x)})}M(g);var A=V(g,2),P=V(R(A),2);Et(P,16,()=>({length:24}),Ct,(H,W,q)=>{var Y=cl(),F=R(Y);let N;M(Y),Oe(b=>N=_n(F,"",N,b),[()=>({opacity:r()[q],width:"100%"})]),ue(H,Y)}),M(A),M(h),ue(a,h),nt()}function hl(a,n,r,i){const l=d(n).getBoundingClientRect();d(r).style.width=l.width-2+"px",X(i,!d(i))}var vl=(a,n,r)=>n(d(r)),gl=be('<li><button type="button" class="svelte-y3d9rs"><!> <span class="svelte-y3d9rs"> </span> <!></button></li>'),pl=be('<label class="svelte-y3d9rs"><button type="button" class="svelte-y3d9rs"><!> <span class="svelte-y3d9rs"> </span> <!></button> <ul></ul></label>');function ml(a,n){tt(n,!0);let r=ge(n,"items",19,()=>[]),i=ge(n,"value",7,0),l=he(!1),f=he(void 0),h=he(void 0),g=Ee(()=>r().length>0?r()[i()].icon:""),y=Ee(()=>r().length>0?r()[i()].label:"");Jt(()=>(document.addEventListener("click",x),()=>{document.removeEventListener("click",x)}));function x(I){!d(f).contains(I.target)&&!d(h).contains(I.target)&&X(l,!1)}function A(I){i(I.value),X(l,!1),n.onchange&&n.onchange(I)}var P=pl(),H=R(P);H.__click=[hl,f,h,l];var W=R(H);Je(W,{height:"20",get icon(){return d(g)},width:"20"});var q=V(W,2),Y=R(q,!0);M(q);var F=V(q,2);Je(F,{height:"20",icon:"material-symbols:keyboard-arrow-down-rounded",width:"20"}),M(H),ot(H,I=>X(f,I),()=>d(f));var N=V(H,2);let b;Et(N,21,r,Ct,(I,S)=>{var z=gl();let j;var B=R(z);B.__click=[vl,A,S];var oe=R(B);Je(oe,{height:"20",get icon(){return d(S).icon},width:"20"});var ie=V(oe,2),$=R(ie,!0);M(ie);var fe=V(ie,2);{var _e=xe=>{Je(xe,{height:"20",icon:"material-symbols:check-rounded",width:"20"})};Qe(fe,xe=>{d(S).value===i()&&xe(_e)})}M(B),M(z),Oe(xe=>{j=Ve(z,1,"svelte-y3d9rs",null,j,xe),ke($,d(S).label)},[()=>({selected:i()===d(S).value})]),ue(I,z)}),M(N),ot(N,I=>X(h,I),()=>d(h)),M(P),Oe(I=>{ke(Y,d(y)),b=Ve(N,1,"svelte-y3d9rs",null,b,I)},[()=>({open:d(l)})]),ue(a,P),nt()}ut(["click"]);var yl=be('<p class="svelte-1lve2pk">0</p>'),bl=be('<p class="svelte-1lve2pk"> </p>'),_l=be('<p class="svelte-1lve2pk"> </p>'),wl=be('<div class="column svelte-1lve2pk"><p class="svelte-1lve2pk"> </p></div>'),kl=be('<div class="line svelte-1lve2pk"></div>'),xl=be('<div class="average svelte-1lve2pk"></div>'),Dl=be('<figure class="svelte-1lve2pk"><div class="labels svelte-1lve2pk"><!></div> <div class="chart svelte-1lve2pk"><div class="labels svelte-1lve2pk"></div> <div class="columns svelte-1lve2pk"><!> <!> <!></div></div></figure>');function Sl(a,n){tt(n,!0);let r=ge(n,"average",3,0),i=ge(n,"daily",19,()=>[]),l=Ee(()=>i().reduce((S,z)=>(S=z.volume>S?z.volume:S,S),0)),f=Ee(()=>{const S=Math.floor(d(l)+d(l)*.1);return[0,Math.round(S/4)*1,Math.round(S/4)*2,Math.round(S/4)*3,S]});function h(S){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(S)}var g=Dl(),y=R(g),x=R(y);{var A=S=>{var z=yl();ue(S,z)},P=S=>{var z=Dt(),j=et(z);Et(j,17,()=>d(f),Ct,(B,oe)=>{const ie=Ee(()=>d(oe)===0?"0":d(oe)+" oz");var $=bl(),fe=R($,!0);M($),Oe(()=>ke(fe,d(ie))),ue(B,$)}),ue(S,z)};Qe(x,S=>{d(l)===0?S(A):S(P,!1)})}M(y);var H=V(y,2),W=R(H);Et(W,21,i,Ct,(S,z)=>{var j=_l(),B=R(j,!0);M(j),Oe(oe=>ke(B,oe),[()=>h(d(z).created)]),ue(S,j)}),M(W);var q=V(W,2),Y=R(q);{var F=S=>{var z=Dt(),j=et(z);Et(j,17,i,Ct,(B,oe)=>{var ie=wl();let $;var fe=R(ie),_e=R(fe);M(fe),M(ie),Oe(xe=>{$=_n(ie,"",$,xe),ke(_e,`${d(oe).volume??""} oz`)},[()=>({width:`${d(oe).volume/Math.floor(d(l)+d(l)*.1)*100}%`})]),ue(B,ie)}),ue(S,z)};Qe(Y,S=>{d(l)!==0&&S(F)})}var N=V(Y,2);Et(N,16,()=>({length:4}),Ct,(S,z,j)=>{var B=kl();vt(B,"data-value",j),_n(B,"",{},{left:`${25*(j+1)}%`}),ue(S,B)});var b=V(N,2);{var I=S=>{var z=xl();let j;Oe(B=>{vt(z,"data-value",r()),j=_n(z,"",j,B)},[()=>({left:`${r()/Math.floor(d(l)+d(l)*.1)*100}%`})]),ue(S,z)};Qe(b,S=>{r()>0&&S(I)})}M(q),M(H),M(g),ue(a,g),nt()}var Tl=(a,n)=>n(0),Cl=(a,n)=>n(1),El=(a,n)=>n(2),Il=(a,n)=>n(3),Ol=tr('<text class="axis svelte-1y2p92y"> </text><path></path>',1),Ml=tr('<text class="label svelte-1y2p92y"> </text>'),Pl=tr('<text class="label svelte-1y2p92y"> </text>'),Al=tr('<text class="label first svelte-1y2p92y" x="40"> </text><text class="label last svelte-1y2p92y"> </text>',1),jl=be('<figure class="svelte-1y2p92y"><div class="svelte-1y2p92y"><button type="button">Week</button> <button type="button">Month</button> <button type="button">Year</button> <button type="button">All</button></div> <svg class="svelte-1y2p92y"><!><!><path class="area svelte-1y2p92y"></path><path class="plot svelte-1y2p92y"></path></svg></figure>');function Fl(a,n){tt(n,!0);let r=ge(n,"value",19,()=>[]),i=he(0),l=he(0),f=he(3),h=Ee(()=>{let G=null;switch(d(f)){case 0:return d(F);case 1:return d(N);case 2:return d(b);default:G=[...r()],G.sort((Z,pe)=>Z.created.getTime()>pe.created.getTime()?1:Z.created.getTime()<pe.created.getTime()?-1:0);break}return G}),g=Ee(()=>{if(d(h).length===0)return Date.now();const G=d(h).map(Z=>Z.created.getTime());return Math.max(...G)}),y=Ee(()=>{if(d(h).length===0)return 300;const G=d(h).map(Z=>Z.weight);return Math.max(...G)}),x=Ee(()=>{if(d(h).length===0)return Date.now();const G=d(h).map(Z=>Z.created.getTime());return Math.min(...G)}),A=Ee(()=>{if(d(h).length===0)return 0;const G=d(h).map(Z=>Z.weight);return Math.min(...G)}),P=Ee(()=>d(h).length===0?300:Math.floor(d(y)*1.1)),H=Ee(()=>d(h).length===0?0:Math.floor(d(A)*.9)),W=Ee(()=>{const pe=d(i)-24;if(!d(h)||d(h).length===0)return"";let we=new String(d(Y));return we+=` L ${d(l)} ${pe} L 40 ${pe} Z`}),q=Ee(()=>{const pe=d(l)-40,we=d(i)-24;if(!d(h)||d(h).length===0)return[];const Ae=Ce=>40+(Ce-d(x))/(d(g)-d(x)||1)*pe,ye=Ce=>(d(P)-Ce)/(d(P)-d(H))*we;if(d(h).length===1){const Ce=ye(d(h)[0].weight);return[[40,ye(d(h)[0].weight)],[d(l),Ce]]}return d(h).map(Ce=>[Ae(Ce.created.getTime()),ye(Ce.weight)])}),Y=Ee(()=>{if(!d(h)||d(h).length===0)return"";let G=`M ${d(q)[0][0]} ${d(q)[0][1]}`;for(let Z=1;Z<d(q).length;Z++)G+=` L ${d(q)[Z][0]} ${d(q)[Z][1]}`;return G}),F=Ee(()=>{const G=new Date;return G.setDate(G.getDate()-7),G.setHours(0),G.setMinutes(0),G.setSeconds(0),G.setMilliseconds(0),r().filter(Z=>Z.created.getTime()>G.getTime()).sort((Z,pe)=>Z.created.getTime()>pe.created.getTime()?1:Z.created.getTime()<pe.created.getTime()?-1:0)}),N=Ee(()=>{const G=new Date;return G.setDate(G.getDate()-30),G.setHours(0),G.setMinutes(0),G.setSeconds(0),G.setMilliseconds(0),r().filter(Z=>Z.created.getTime()>G.getTime()).sort((Z,pe)=>Z.created.getTime()>pe.created.getTime()?1:Z.created.getTime()<pe.created.getTime()?-1:0)}),b=Ee(()=>{const G=new Date;return G.setFullYear(G.getFullYear()-1),G.setHours(0),G.setMinutes(0),G.setSeconds(0),G.setMilliseconds(0),r().filter(Z=>Z.created.getTime()>G.getTime()).sort((Z,pe)=>Z.created.getTime()>pe.created.getTime()?1:Z.created.getTime()<pe.created.getTime()?-1:0)});Jt(()=>{const G=window.localStorage.getItem("fh_timeline");X(f,G===null?3:parseInt(G),!0)});function I(G){X(f,G,!0),window.localStorage.setItem("fh_timeline",G)}function S(G){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric",year:"numeric"}).format(G)}var z=jl(),j=R(z),B=R(j);B.__click=[Tl,I];let oe;var ie=V(B,2);ie.__click=[Cl,I];let $;var fe=V(ie,2);fe.__click=[El,I];let _e;var xe=V(fe,2);xe.__click=[Il,I];let Ge;M(j);var Ke=V(j,2),De=R(Ke);Et(De,16,()=>({length:6}),Ct,(G,Z,pe)=>{const we=Ee(()=>pe/5),Ae=Ee(()=>d(P)-d(we)*(d(P)-d(H))),ye=Ee(()=>d(we)*(d(i)-24)),Ce=Ee(()=>pe===0||pe===5?null:Math.floor(d(Ae)));var ae=Ol(),Be=et(ae),Ye=R(Be,!0);M(Be);var Se=V(Be);Ve(Se,0,"axis svelte-1y2p92y",null,{},{last:pe===5}),Oe(()=>{vt(Be,"y",d(ye)?d(ye):0),ke(Ye,d(Ce)),vt(Se,"d",`M 40 ${d(ye)===0?1:d(ye)} L ${d(l)} ${d(ye)===0?1:d(ye)}`)}),ue(G,ae)});var Ie=V(De);{var Le=G=>{var Z=Ml(),pe=R(Z,!0);M(Z),Oe(we=>{vt(Z,"x",40+(d(l)-40)/2),vt(Z,"y",d(i)-12),ke(pe,we)},[()=>S(new Date)]),ue(G,Z)},Ne=G=>{var Z=Dt(),pe=et(Z);{var we=ye=>{var Ce=Pl(),ae=R(Ce,!0);M(Ce),Oe(Be=>{vt(Ce,"x",40+(d(l)-40)/2),vt(Ce,"y",d(i)-12),ke(ae,Be)},[()=>S(d(h)[0].created)]),ue(ye,Ce)},Ae=ye=>{var Ce=Al(),ae=et(Ce),Be=R(ae,!0);M(ae);var Ye=V(ae),Se=R(Ye,!0);M(Ye),Oe((ft,lt)=>{vt(ae,"y",d(i)-12),ke(Be,ft),vt(Ye,"x",d(l)),vt(Ye,"y",d(i)-12),ke(Se,lt)},[()=>S(d(h)[0].created),()=>S(d(h)[d(h).length-1].created)]),ue(ye,Ce)};Qe(pe,ye=>{d(h).length===1?ye(we):ye(Ae,!1)},!0)}ue(G,Z)};Qe(Ie,G=>{d(h).length===0?G(Le):G(Ne,!1)})}var qe=V(Ie),te=V(qe);M(Ke),M(z),Oe((G,Z,pe,we)=>{oe=Ve(B,1,"svelte-1y2p92y",null,oe,G),$=Ve(ie,1,"svelte-1y2p92y",null,$,Z),_e=Ve(fe,1,"svelte-1y2p92y",null,_e,pe),Ge=Ve(xe,1,"svelte-1y2p92y",null,Ge,we),vt(qe,"d",d(W)),vt(te,"d",d(Y))},[()=>({selected:d(f)===0}),()=>({selected:d(f)===1}),()=>({selected:d(f)===2}),()=>({selected:d(f)===3})]),Io(Ke,"clientWidth",G=>X(l,G)),Io(Ke,"clientHeight",G=>X(i,G)),ue(a,z),nt()}ut(["click"]);var Kl=be('<button class="sun svelte-1x88gms" type="button">Sunrise/sunset</button>'),ql=be('<!> <p class="svelte-1x88gms"> </p>',1),Rl=be('<section class="svelte-1x88gms"><!> <footer class="svelte-1x88gms"><div class="daynight svelte-1x88gms"><!></div> <!></footer></section>');function yi(a,n){tt(n,!0);let r=ge(n,"activity",3,null),i=ge(n,"days",3,10),l=ge(n,"water",3,null),f=ge(n,"weight",19,()=>[]);const h=[{icon:"material-symbols:local-fire-department-outline-rounded",label:"Fasting",value:0},{icon:"material-symbols:water-drop-outline-rounded",label:"Water",value:1},{icon:"hugeicons:weight-scale",label:"Weight",value:2}];let g=he(0);Jt(()=>{const S=window.localStorage.getItem("fh_graph");X(g,S===null?0:parseInt(S),!0)});function y(S){window.localStorage.setItem("fh_graph",S.value),X(g,S.value,!0)}function x(S){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(S)}var A=Rl(),P=R(A);{var H=S=>{{let z=Ee(()=>r()&&r().average?r().average:[]),j=Ee(()=>r()&&r().daily?r().daily:[]);dl(S,{get average(){return d(z)},get daily(){return d(j)},get days(){return i()}})}},W=S=>{var z=Dt(),j=et(z);{var B=ie=>{{let $=Ee(()=>l()&&l().average?l().average:null),fe=Ee(()=>l()&&l().daily?l().daily:null);Sl(ie,{get average(){return d($)},get daily(){return d(fe)}})}},oe=ie=>{var $=Dt(),fe=et($);{var _e=xe=>{Fl(xe,{get value(){return f()}})};Qe(fe,xe=>{d(g)===2&&xe(_e)},!0)}ue(ie,$)};Qe(j,ie=>{d(g)===1?ie(B):ie(oe,!1)},!0)}ue(S,z)};Qe(P,S=>{d(g)===0?S(H):S(W,!1)})}var q=V(P,2),Y=R(q),F=R(Y);{var N=S=>{var z=Kl();z.__click=function(...j){var B;(B=n.onsun)==null||B.apply(this,j)},ue(S,z)},b=S=>{var z=ql(),j=et(z);{let ie=Ee(()=>n.sun&&n.sun.icon?n.sun.icon:null);Je(j,{height:"16",get icon(){return d(ie)},width:"16"})}var B=V(j,2),oe=R(B,!0);M(B),Oe(ie=>ke(oe,ie),[()=>n.sun&&n.sun.timing?x(n.sun.timing):""]),ue(S,z)};Qe(F,S=>{n.sun===null?S(N):S(b,!1)})}M(Y);var I=V(Y,2);ml(I,{get items(){return h},mount:"top",onchange:S=>y(S),get value(){return d(g)}}),M(q),M(A),ue(a,A),nt()}ut(["click"]);function Nl(a,n){X(n,!d(n))}var Bl=(a,n,r)=>n(d(r)),Hl=be('<li class="svelte-13e0nbd"><button type="button" class="svelte-13e0nbd"><span class="svelte-13e0nbd"> </span></button></li>'),Ll=be('<label class="svelte-13e0nbd"><button type="button" class="svelte-13e0nbd"><!> <span class="svelte-13e0nbd"> </span> <!></button> <ul></ul></label>');function zl(a,n){tt(n,!0);let r=ge(n,"items",19,()=>[]),i=ge(n,"value",3,5),l=he(!1),f=he(void 0),h=he(void 0),g=Ee(()=>r().find(I=>I.value===i()).label);Jt(()=>(document.addEventListener("click",y),()=>{document.removeEventListener("click",y)}));function y(b){!d(f).contains(b.target)&&!d(h).contains(b.target)&&X(l,!1)}function x(b){X(l,!1),n.onchange&&n.onchange(b.value)}var A=Ll(),P=R(A);P.__click=[Nl,l];var H=R(P);Je(H,{height:"20",icon:"material-symbols:fork-spoon-rounded",width:"20"});var W=V(H,2),q=R(W,!0);M(W);var Y=V(W,2);Je(Y,{height:"20",icon:"material-symbols:keyboard-arrow-down-rounded",width:"20"}),M(P),ot(P,b=>X(f,b),()=>d(f));var F=V(P,2);let N;Et(F,21,r,Ct,(b,I)=>{var S=Hl(),z=R(S);z.__click=[Bl,x,I];var j=R(z),B=R(j,!0);M(j),M(z),M(S),Oe(()=>ke(B,d(I).label)),ue(b,S)}),M(F),ot(F,b=>X(h,b),()=>d(h)),M(A),Oe(b=>{ke(q,d(g)),N=Ve(F,1,"svelte-13e0nbd",null,N,b)},[()=>({open:d(l)})]),ue(a,A),nt()}ut(["click"]);var Wl=be('<article><p class="svelte-1yn3hhw"><span class="svelte-1yn3hhw"> </span> <span class="units svelte-1yn3hhw">hrs</span></p> <p class="colon svelte-1yn3hhw">:</p> <p class="svelte-1yn3hhw"><span class="svelte-1yn3hhw"> </span> <span class="units svelte-1yn3hhw">min</span></p> <p class="colon svelte-1yn3hhw">:</p> <p class="svelte-1yn3hhw"><span class="svelte-1yn3hhw"> </span> <span class="units svelte-1yn3hhw">sec</span></p></article>');function Ul(a,n){tt(n,!0);let r=ge(n,"duration",3,0),i=ge(n,"now",3,null),l=ge(n,"started",3,null),f=Ee(()=>{let b=Math.floor((i()-l().getTime())/1e3);if(r()!==0){const I=new Date(l().getTime()+r()*36e5);b=Math.floor((I.getTime()-i())/1e3)}return b}),h=Ee(()=>{if(l()===null)return{hours:0,minutes:"00",seconds:"00"};let b=Math.floor(d(f)/3600);return b=b<0?"+"+Math.abs(b).toString(10):Math.abs(b).toString(10),{hours:b,minutes:Math.abs(Math.floor(d(f)%3600/60)).toString(10).padStart(2,"0"),seconds:Math.abs(d(f)%60).toString(10).padStart(2,"0")}});var g=Wl();let y;var x=R(g),A=R(x),P=R(A,!0);M(A),On(2),M(x);var H=V(x,4),W=R(H),q=R(W,!0);M(W),On(2),M(H);var Y=V(H,4),F=R(Y),N=R(F,!0);M(F),On(2),M(Y),M(g),Oe(b=>{y=Ve(g,1,"svelte-1yn3hhw",null,y,b),ke(P,d(h).hours),ke(q,d(h).minutes),ke(N,d(h).seconds)},[()=>({complete:d(f)<0})]),ue(a,g),nt()}function Yl(a,n){X(n,!d(n))}var Vl=(a,n,r)=>n(d(r)),Gl=be('<li class="svelte-1aqe5wr"><button type="button" class="svelte-1aqe5wr"><span class="svelte-1aqe5wr"> </span> <span class="svelte-1aqe5wr"> </span></button></li>'),Ql=be('<label class="svelte-1aqe5wr"><button type="button" class="svelte-1aqe5wr"><!> <span class="svelte-1aqe5wr"> </span> <!></button> <ul></ul></label>');function Jl(a,n){tt(n,!0);let r=ge(n,"items",19,()=>[]),i=ge(n,"units",3,"oz"),l=ge(n,"value",3,0),f=he(!1),h=he(void 0),g=he(void 0);Jt(()=>(document.addEventListener("click",y),()=>{document.removeEventListener("click",y)}));function y(b){!d(h).contains(b.target)&&!d(g).contains(b.target)&&X(f,!1)}function x(b){X(f,!1),n.onchange&&n.onchange(b.value)}var A=Ql(),P=R(A);P.__click=[Yl,f];var H=R(P);Je(H,{height:"20",icon:"material-symbols:water-drop-outline-rounded",width:"20"});var W=V(H,2),q=R(W);M(W);var Y=V(W,2);Je(Y,{height:"20",icon:"material-symbols:keyboard-arrow-down-rounded",width:"20"}),M(P),ot(P,b=>X(h,b),()=>d(h));var F=V(P,2);let N;Et(F,21,r,Ct,(b,I)=>{var S=Gl(),z=R(S);z.__click=[Vl,x,I];var j=R(z),B=R(j,!0);M(j);var oe=V(j,2),ie=R(oe);M(oe),M(z),M(S),Oe(()=>{ke(B,d(I).label),ke(ie,`${d(I).value??""} ${i()??""}`)}),ue(b,S)}),M(F),ot(F,b=>X(g,b),()=>d(g)),M(A),Oe(b=>{ke(q,`${l()??""} ${i()??""}`),N=Ve(F,1,"svelte-1aqe5wr",null,N,b)},[()=>({open:d(f)})]),ue(a,A),nt()}ut(["click"]);function Xl(a,n,r){n()===null?r.onstart&&r.onstart():r.onend&&r.onend()}function Zl(a,n){n.onweight&&n.onweight()}var $l=be('<p class="started ended svelte-99v722">Your last fast ended<br/> </p>'),ec=be('<p class="svelte-99v722">You are not fasting.</p> <!>',1),tc=be('<p class="svelte-99v722">You are fasting.</p> <!> <!> <p class="started svelte-99v722"> </p>',1),nc=be('<section class="svelte-99v722"><header class="svelte-99v722"><h3 class="svelte-99v722">Fasting</h3> <button class="icon svelte-99v722" type="button"><!></button> <button class="icon svelte-99v722" type="button"><!></button></header> <article class="svelte-99v722"><!> <button class="primary svelte-99v722" type="button"> </button></article> <div class="graph svelte-99v722"><!></div> <footer class="svelte-99v722"><!> <!></footer></section>');function rc(a,n){tt(n,!0);let r=ge(n,"activity",3,null),i=ge(n,"duration",3,0),l=ge(n,"ended",3,null),f=ge(n,"hunger",3,5),h=ge(n,"levels",19,()=>[]),g=ge(n,"now",3,null),y=ge(n,"started",3,null),x=ge(n,"sun",3,null),A=ge(n,"volume",3,null),P=ge(n,"volumes",19,()=>[]),H=ge(n,"water",3,0),W=ge(n,"weight",19,()=>[]);function q(De){return De===null?null:new Intl.DateTimeFormat(navigator.language,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(De)}var Y=nc(),F=R(Y),N=V(R(F),2);N.__click=[Zl,n];var b=R(N);Je(b,{height:"20",icon:"hugeicons:weight-scale",width:"20"}),M(N);var I=V(N,2);I.__click=function(...De){var Ie;(Ie=n.onsettings)==null||Ie.apply(this,De)};var S=R(I);Je(S,{height:"20",icon:"material-symbols:person-outline-rounded",width:"20"}),M(I),M(F);var z=V(F,2),j=R(z);{var B=De=>{var Ie=ec(),Le=V(et(Ie),2);{var Ne=qe=>{var te=$l(),G=V(R(te),2,!0);M(te),Oe(Z=>ke(G,Z),[()=>q(l())]),ue(qe,te)};Qe(Le,qe=>{l()!==null&&qe(Ne)})}ue(De,Ie)},oe=De=>{var Ie=tc(),Le=V(et(Ie),2);Ul(Le,{get duration(){return i()},get now(){return g()},get started(){return y()}});var Ne=V(Le,2);il(Ne,{get onchange(){return n.onduration},get value(){return i()}});var qe=V(Ne,2),te=R(qe);M(qe),Oe(G=>ke(te,`Started ${G??""}`),[()=>q(y())]),ue(De,Ie)};Qe(j,De=>{y()===null?De(B):De(oe,!1)})}var ie=V(j,2);ie.__click=[Xl,y,n];var $=R(ie);M(ie),M(z);var fe=V(z,2),_e=R(fe);yi(_e,{get activity(){return r()},days:7,get onsun(){return n.onsun},get sun(){return x()},get water(){return A()},get weight(){return W()}}),M(fe);var xe=V(fe,2),Ge=R(xe);zl(Ge,{get items(){return h()},get onchange(){return n.onhunger},get value(){return f()}});var Ke=V(Ge,2);Jl(Ke,{get items(){return P()},get onchange(){return n.onwater},get value(){return H()}}),M(xe),M(Y),Oe(()=>ke($,`${y()===null?"Start":"Stop"} fasting`)),ue(a,Y),nt()}ut(["click"]);function ac(a,n,r,i){const l=new Date(parseInt(a.currentTarget.getAttribute("data-year")),parseInt(a.currentTarget.getAttribute("data-month")),parseInt(a.currentTarget.getAttribute("data-date")));l.getMonth()!==n().getMonth()&&n(new Date(l.getTime())),r(new Date(l.getTime())),i.onchange&&i.onchange(r())}var oc=be('<button type="button"> </button>'),ic=be('<section><header class="svelte-1ll096s"><h3 class="svelte-1ll096s"> </h3> <button type="button" class="svelte-1ll096s"><!></button> <button type="button" class="svelte-1ll096s"><!></button></header> <article class="svelte-1ll096s"><p class="svelte-1ll096s">Sun</p> <p class="svelte-1ll096s">Mon</p> <p class="svelte-1ll096s">Tue</p> <p class="svelte-1ll096s">Wed</p> <p class="svelte-1ll096s">Thu</p> <p class="svelte-1ll096s">Fri</p> <p class="svelte-1ll096s">Sat</p></article> <article class="svelte-1ll096s"></article></section>');function sc(a,n){tt(n,!0);let r=ge(n,"display",23,()=>new Date),i=ge(n,"value",23,()=>new Date),l=Ee(()=>new Intl.DateTimeFormat(navigator.language,{month:"long",year:"numeric"}).format(r())),f=Ee(()=>{const N=[],b=new Date,I=new Date(r().getFullYear(),r().getMonth(),1);I.setDate(I.getDate()-I.getDay());for(let S=0;S<42;S++){const z={date:I.getDate(),month:I.getMonth(),year:I.getFullYear(),outside:!0,today:!1,selected:!1,after:!1};I.getFullYear()===r().getFullYear()&&I.getMonth()===r().getMonth()&&(z.outside=!1),I.getTime()>Date.now()&&(z.after=!0),I.getFullYear()===b.getFullYear()&&I.getMonth()===b.getMonth()&&I.getDate()===b.getDate()&&(z.today=!0),I.getFullYear()===i().getFullYear()&&I.getMonth()===i().getMonth()&&I.getDate()===i().getDate()&&(z.selected=!0),I.setDate(I.getDate()+1),N.push(z)}return N});function h(){let N=r().getMonth(),b=r().getFullYear();b=N===0?b-1:b,N=N===0?11:N-1,r(new Date(b,N,r().getDate()))}function g(){let N=r().getMonth(),b=r().getFullYear();b=N===11?b+1:b,N=(N+1)%12,r(new Date(b,N,r().getDate()))}var y=ic(),x=R(y),A=R(x),P=R(A,!0);M(A);var H=V(A,2);H.__click=h;var W=R(H);Je(W,{height:"24",icon:"material-symbols:navigate-before",width:"24"}),M(H);var q=V(H,2);q.__click=g;var Y=R(q);Je(Y,{height:"24",icon:"material-symbols:navigate-next",width:"24"}),M(q),M(x);var F=V(x,4);Et(F,21,()=>d(f),Ct,(N,b)=>{var I=oc();I.__click=[ac,r,i,n];let S;var z=R(I,!0);M(I),Oe(j=>{vt(I,"data-year",d(b).year),vt(I,"data-month",d(b).month),vt(I,"data-date",d(b).date),I.disabled=d(b).after,S=Ve(I,1,"svelte-1ll096s",null,S,j),ke(z,d(b).date)},[()=>({outside:d(b).outside,today:d(b).today,selected:d(b).selected})]),ue(N,I)}),M(F),M(y),Oe(()=>ke(P,d(l))),ue(a,y),nt()}ut(["click"]);function uc(a,n,r){const i=new Date(n().getTime());i.getHours()>=12?i.getHours()===12?i.setHours(23):i.setHours(i.getHours()-1):i.getHours()===0?i.setHours(11):i.setHours(i.getHours()-1),n(new Date(i.getTime())),r.onchange&&r.onchange(n())}function lc(a,n,r){const i=new Date(n().getTime());i.getHours()>=12?i.getHours()===23?i.setHours(12):i.setHours(i.getHours()+1):i.getHours()===11?i.setHours(0):i.setHours(i.getHours()+1),n(new Date(i.getTime())),r.onchange&&r.onchange(n())}function cc(a,n,r){const i=new Date(n().getTime());i.getHours()>=12&&i.setHours(i.getHours()-12),n(new Date(i.getTime())),r.onchange&&r.onchange(n())}function fc(a,n,r){const i=new Date(n().getTime());i.getHours()<12&&i.setHours(i.getHours()+12),n(new Date(i.getTime())),r.onchange&&r.onchange(n())}function dc(a,n,r){const i=new Date(n().getTime());i.getMinutes()===0?i.setMinutes(59):i.setMinutes(i.getMinutes()-1),n(new Date(i.getTime())),r.onchange&&r.onchange(n())}function hc(a,n,r){const i=new Date(n().getTime());i.getMinutes()===59?i.setMinutes(0):i.setMinutes(i.getMinutes()+1),n(new Date(i.getTime())),r.onchange&&r.onchange(n())}var vc=be('<article class="svelte-1bevvpj"><div class="time svelte-1bevvpj"><div class="dial svelte-1bevvpj"><button type="button" class="svelte-1bevvpj"><!></button> <p class="svelte-1bevvpj"> </p> <button type="button" class="svelte-1bevvpj"><!></button></div> <p class="svelte-1bevvpj">:</p> <div class="dial svelte-1bevvpj"><button type="button" class="svelte-1bevvpj"><!></button> <p class="svelte-1bevvpj"> </p> <button type="button" class="svelte-1bevvpj"><!></button></div></div> <div class="meridian svelte-1bevvpj"><button type="button">AM</button> <button type="button">PM</button></div></article>');function gc(a,n){tt(n,!0);let r=ge(n,"value",23,()=>new Date),i=Ee(()=>r().getHours()%12||12),l=Ee(()=>r().getMinutes().toString(10).padStart(2,"0")),f=Ee(()=>r().getHours()>=12?"PM":"AM");var h=vc(),g=R(h),y=R(g),x=R(y);x.__click=[lc,r,n];var A=R(x);Je(A,{height:"24",icon:"material-symbols:keyboard-arrow-up-rounded",width:"24"}),M(x);var P=V(x,2),H=R(P,!0);M(P);var W=V(P,2);W.__click=[uc,r,n];var q=R(W);Je(q,{height:"24",icon:"material-symbols:keyboard-arrow-down-rounded",width:"24"}),M(W),M(y);var Y=V(y,4),F=R(Y);F.__click=[hc,r,n];var N=R(F);Je(N,{height:"24",icon:"material-symbols:keyboard-arrow-up-rounded",width:"24"}),M(F);var b=V(F,2),I=R(b,!0);M(b);var S=V(b,2);S.__click=[dc,r,n];var z=R(S);Je(z,{height:"24",icon:"material-symbols:keyboard-arrow-down-rounded",width:"24"}),M(S),M(Y),M(g);var j=V(g,2),B=R(j);B.__click=[cc,r,n];let oe;var ie=V(B,2);ie.__click=[fc,r,n];let $;M(j),M(h),Oe((fe,_e)=>{ke(H,d(i)),ke(I,d(l)),oe=Ve(B,1,"svelte-1bevvpj",null,oe,fe),$=Ve(ie,1,"svelte-1bevvpj",null,$,_e)},[()=>({selected:d(f)==="AM"}),()=>({selected:d(f)==="PM"})]),ue(a,h),nt()}ut(["click"]);function pc(a,n){X(n,"calendar")}function mc(a,n){X(n,"clock")}var yc=be('<article class="svelte-1tr6oad"><header class="svelte-1tr6oad"><button type="button"><p class="svelte-1tr6oad"> </p> <p class="svelte-1tr6oad"> </p></button> <button type="button"><p class="svelte-1tr6oad"> </p></button></header> <!></article>');function Nr(a,n){tt(n,!0);let r=ge(n,"value",23,()=>new Date),i=he("calendar");function l(B){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric"}).format(B)}function f(B){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(B)}function h(B){B.setHours(r().getHours()),B.setMinutes(r().getMinutes()),B.setSeconds(r().getSeconds()),r(new Date(B.getTime())),n.onchange&&n.onchange(r())}function g(B){B.setFullYear(r().getFullYear()),B.getMonth(r().getMonth()),B.getDate(r().getDate()),r(new Date(B.getTime())),n.onchange&&n.onchange(r())}var y=yc(),x=R(y),A=R(x);A.__click=[pc,i];let P;var H=R(A),W=R(H,!0);M(H);var q=V(H,2),Y=R(q,!0);M(q),M(A);var F=V(A,2);F.__click=[mc,i];let N;var b=R(F),I=R(b,!0);M(b),M(F),M(x);var S=V(x,2);{var z=B=>{sc(B,{onchange:h,get value(){return r()}})},j=B=>{gc(B,{onchange:g,get value(){return r()}})};Qe(S,B=>{d(i)===null||d(i)==="calendar"?B(z):B(j,!1)})}M(y),Oe((B,oe,ie,$)=>{P=Ve(A,1,"svelte-1tr6oad",null,P,B),ke(W,n.label),ke(Y,oe),N=Ve(F,1,"svelte-1tr6oad",null,N,ie),ke(I,$)},[()=>({selected:d(i)==="calendar"}),()=>l(r()),()=>({selected:d(i)==="clock"}),()=>f(r())]),ue(a,y),nt()}ut(["click"]);function bc(a,n,r,i){n(),r(null),i.oncancel&&i.oncancel()}function _c(a,n,r,i){n.ondelete&&n.ondelete(r(),i().id)}function wc(a,n){const r=a.currentTarget.value.trim().length===0?null:a.currentTarget.value;n({...n(),notes:r})}function kc(a,n,r){n.onsave&&n.onsave(r())}var xc=be('<dialog class="svelte-13glclx"><h3 class="svelte-13glclx"> </h3> <!> <textarea placeholder="Notes" class="svelte-13glclx"></textarea> <footer class="svelte-13glclx"><button class="delete svelte-13glclx" type="button">Delete</button> <button class="cancel svelte-13glclx" type="button">Cancel</button> <button type="button" class="svelte-13glclx">Save</button></footer></dialog>');function Dc(a,n){tt(n,!0);let r=ge(n,"field",3,"started"),i=ge(n,"item",7,null),l=ge(n,"label",3,"Started"),f=ge(n,"title",3,"Edit Fast Start"),h=he(void 0);function g(I){const S={...i()};S[r()]=new Date(I.getTime()),i({...S})}function y(){d(h).close()}function x(){d(h).showModal()}var A=xc(),P=R(A),H=R(P,!0);M(P);var W=V(P,2);{let I=Ee(()=>i()&&i().id&&i().id!==null?i()[r()]:new Date);Nr(W,{get label(){return l()},onchange:g,get value(){return d(I)}})}var q=V(W,2);Zo(q),q.__input=[wc,i];var Y=V(q,2),F=R(Y);F.__click=[_c,n,r,i];var N=V(F,2);N.__click=[bc,y,i,n];var b=V(N,2);return b.__click=[kc,n,i],M(Y),M(A),ot(A,I=>X(h,I),()=>d(h)),Oe(()=>{ke(H,f()),ri(q,i()&&i().id&&i().id!==null?i().notes:"")}),ue(a,A),nt({close:y,showModal:x})}ut(["input","click"]);var Sc=be('<article class="svelte-1vxkmhw"><p class="svelte-1vxkmhw">Your fasting history<br/>will be displayed here.</p></article>'),Tc=be('<li class="header svelte-1vxkmhw"><p class="svelte-1vxkmhw"> </p></li>'),Cc=(a,n,r)=>n(d(r).type,d(r).id),Ec=be('<p class="svelte-1vxkmhw">Started Fast</p> <p class="svelte-1vxkmhw"></p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Ic=be('<p class="svelte-1vxkmhw">Water</p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Oc=be('<p class="svelte-1vxkmhw">Weight</p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Mc=be('<p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"></p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Pc=be('<p class="svelte-1vxkmhw">Ended Fast</p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p> <p class="svelte-1vxkmhw"> </p>',1),Ac=be('<li class="svelte-1vxkmhw"><button type="button" class="svelte-1vxkmhw"><!></button></li>'),jc=be('<ul class="svelte-1vxkmhw"></ul>');function Fc(a,n){tt(n,!0);let r=ge(n,"items",19,()=>[]);function i(W){return new Intl.DateTimeFormat(navigator.language,{month:"short",day:"numeric",year:"numeric"}).format(W)}function l(W,q){const Y=q.getTime()-W.getTime(),F=Math.floor(Y/1e3),N=Math.floor(F/3600),b=Math.floor(F%3600/60);return new Intl.DurationFormat(navigator.language,{style:"short",units:["hour","minute"]}).format({hours:N,minutes:b})}function f(W){return new Intl.DateTimeFormat(navigator.language,{weekday:"long",month:"short",day:"numeric"}).format(W)}function h(W){return new Intl.NumberFormat(navigator.language).format(W)}function g(W){return new Intl.DateTimeFormat(navigator.language,{hour:"numeric",minute:"2-digit"}).format(W)}function y(W,q){n.onchange&&n.onchange(W,q)}var x=Dt(),A=et(x);{var P=W=>{var q=Sc();ue(W,q)},H=W=>{var q=jc();Et(q,21,r,Ct,(Y,F)=>{var N=Dt(),b=et(N);{var I=z=>{var j=Tc(),B=R(j),oe=R(B,!0);M(B),M(j),Oe(ie=>ke(oe,ie),[()=>f(d(F).timed)]),ue(z,j)},S=z=>{var j=Ac(),B=R(j);B.__click=[Cc,y,F];var oe=R(B);{var ie=fe=>{var _e=Ec(),xe=V(et(_e),4),Ge=R(xe,!0);M(xe);var Ke=V(xe,2),De=R(Ke,!0);M(Ke),Oe((Ie,Le)=>{ke(Ge,Ie),ke(De,Le)},[()=>i(d(F).timed),()=>g(d(F).timed)]),ue(fe,_e)},$=fe=>{var _e=Dt(),xe=et(_e);{var Ge=De=>{var Ie=Ic(),Le=V(et(Ie),2),Ne=R(Le);M(Le);var qe=V(Le,2),te=R(qe,!0);M(qe);var G=V(qe,2),Z=R(G,!0);M(G),Oe((pe,we)=>{ke(Ne,`${d(F).volume??""} oz`),ke(te,pe),ke(Z,we)},[()=>i(d(F).timed),()=>g(d(F).timed)]),ue(De,Ie)},Ke=De=>{var Ie=Dt(),Le=et(Ie);{var Ne=te=>{var G=Oc(),Z=V(et(G),2),pe=R(Z);M(Z);var we=V(Z,2),Ae=R(we,!0);M(we);var ye=V(we,2),Ce=R(ye,!0);M(ye),Oe((ae,Be,Ye)=>{ke(pe,`${ae??""} ${d(F).units??""}`),ke(Ae,Be),ke(Ce,Ye)},[()=>h(d(F).weight),()=>i(d(F).timed),()=>g(d(F).timed)]),ue(te,G)},qe=te=>{var G=Dt(),Z=et(G);{var pe=Ae=>{var ye=Mc(),Ce=et(ye),ae=R(Ce,!0);M(Ce);var Be=V(Ce,4),Ye=R(Be,!0);M(Be);var Se=V(Be,2),ft=R(Se,!0);M(Se),Oe((lt,it)=>{ke(ae,d(F).level),ke(Ye,lt),ke(ft,it)},[()=>i(d(F).timed),()=>g(d(F).timed)]),ue(Ae,ye)},we=Ae=>{var ye=Dt(),Ce=et(ye);{var ae=Be=>{var Ye=Pc(),Se=V(et(Ye),2),ft=R(Se,!0);M(Se);var lt=V(Se,2),it=R(lt,!0);M(lt);var It=V(lt,2),_t=R(It,!0);M(It),Oe((yt,St,Ot)=>{ke(ft,yt),ke(it,St),ke(_t,Ot)},[()=>l(d(F).started,d(F).ended),()=>i(d(F).timed),()=>g(d(F).timed)]),ue(Be,Ye)};Qe(Ce,Be=>{d(F).type==="end"&&Be(ae)},!0)}ue(Ae,ye)};Qe(Z,Ae=>{d(F).type==="hunger"?Ae(pe):Ae(we,!1)},!0)}ue(te,G)};Qe(Le,te=>{d(F).type==="weight"?te(Ne):te(qe,!1)},!0)}ue(De,Ie)};Qe(xe,De=>{d(F).type==="water"?De(Ge):De(Ke,!1)},!0)}ue(fe,_e)};Qe(oe,fe=>{d(F).type==="start"?fe(ie):fe($,!1)})}M(B),M(j),ue(z,j)};Qe(b,z=>{d(F).type==="header"?z(I):z(S,!1)})}ue(Y,N)}),M(q),ue(W,q)};Qe(A,W=>{r().length===0?W(P):W(H,!1)})}ue(a,x),nt()}ut(["click"]);var Kc=be('<section class="svelte-1moll0f"><header class="svelte-1moll0f"><h3 class="svelte-1moll0f">Hours</h3></header> <div class="svelte-1moll0f"><!></div> <article class="svelte-1moll0f"><!></article></section>');function qc(a,n){let r=ge(n,"activity",3,null),i=ge(n,"history",19,()=>[]);ge(n,"levels",19,()=>[]);let l=ge(n,"sun",3,null);var f=Kc(),h=V(R(f),2),g=R(h);yi(g,{get activity(){return r()},days:7,get onsun(){return n.onsun},get sun(){return l()},get water(){return n.volume},get weight(){return n.weight}}),M(h);var y=V(h,2),x=R(y);Fc(x,{get items(){return i()},get onchange(){return n.onchange}}),M(y),M(f),ue(a,f)}function Rc(a,n,r,i){const l=d(n).getBoundingClientRect();d(r).style.width=l.width-2+"px",X(i,!d(i))}var Nc=(a,n,r)=>n(d(r)),Bc=be('<li><button type="button" class="svelte-5n0me"><span class="svelte-5n0me"> </span> <!></button></li>'),Hc=be('<label class="svelte-5n0me"><button tabindex="-1" type="button" class="svelte-5n0me"><!> <span class="svelte-5n0me"> </span> <!></button> <ul></ul></label>');function Lc(a,n){tt(n,!0);let r=ge(n,"items",19,()=>[]),i=ge(n,"value",7,0),l=he(!1),f=he(void 0),h=he(void 0),g=Ee(()=>r().length===0?"":r().find(I=>I.value===i()).label);Jt(()=>(document.addEventListener("click",y),()=>{document.removeEventListener("click",y)}));function y(b){!d(f).contains(b.target)&&!d(h).contains(b.target)&&X(l,!1)}function x(b){i(b.value),X(l,!1),n.onchange&&n.onchange(b.value)}var A=Hc(),P=R(A);P.__click=[Rc,f,h,l];var H=R(P);Je(H,{height:"20",icon:"material-symbols:fork-spoon-rounded",width:"20"});var W=V(H,2),q=R(W,!0);M(W);var Y=V(W,2);Je(Y,{height:"20",icon:"material-symbols:keyboard-arrow-down-rounded",width:"20"}),M(P),ot(P,b=>X(f,b),()=>d(f));var F=V(P,2);let N;Et(F,21,r,Ct,(b,I)=>{var S=Bc();let z;var j=R(S);j.__click=[Nc,x,I];var B=R(j),oe=R(B,!0);M(B);var ie=V(B,2);{var $=fe=>{Je(fe,{height:"20",icon:"material-symbols:check-rounded",width:"20"})};Qe(ie,fe=>{d(I).value===i()&&fe($)})}M(j),M(S),Oe(fe=>{z=Ve(S,1,"svelte-5n0me",null,z,fe),ke(oe,d(I).label)},[()=>({selected:i()===d(I).value})]),ue(b,S)}),M(F),ot(F,b=>X(h,b),()=>d(h)),M(A),Oe(b=>{ke(q,d(g)),N=Ve(F,1,"svelte-5n0me",null,N,b)},[()=>({open:d(l)})]),ue(a,A),nt()}ut(["click"]);function zc(a,n,r,i){n(),r(null),i.oncancel&&i.oncancel()}function Wc(a,n,r){n.ondelete&&n.ondelete(r().id)}function Uc(a,n,r){n.onsave&&n.onsave(r())}var Yc=be('<dialog class="svelte-1hqchgg"><h3 class="svelte-1hqchgg">Edit Hunger</h3> <!> <!> <footer class="svelte-1hqchgg"><button class="delete svelte-1hqchgg" type="button">Delete</button> <button class="cancel svelte-1hqchgg" type="button">Cancel</button> <button type="button" class="svelte-1hqchgg">Save</button></footer></dialog>');function Vc(a,n){tt(n,!0);let r=ge(n,"item",7,null),i=ge(n,"levels",19,()=>[]),l=he(void 0),f=Ee(()=>r()&&r().level&&r().level!==null?r().level:5);function h(N){const b=new Date(N.getTime());r({...r(),created:b})}function g(N){const b=N;r({...r(),level:b})}function y(){d(l).close(),r(null)}function x(){d(l).showModal()}var A=Yc(),P=V(R(A),2);Lc(P,{get items(){return i()},onchange:g,get value(){return d(f)}});var H=V(P,2);{let N=Ee(()=>r()&&r().created?r().created:new Date);Nr(H,{label:"Checked",onchange:h,get value(){return d(N)}})}var W=V(H,2),q=R(W);q.__click=[Wc,n,r];var Y=V(q,2);Y.__click=[zc,y,r,n];var F=V(Y,2);return F.__click=[Uc,n,r],M(W),M(A),ot(A,N=>X(l,N),()=>d(l)),ue(a,A),nt({close:y,showModal:x})}ut(["click"]);function Gc(a,n,r){n()!==0&&(n(0),r.onchange&&r.onchange(n()))}function Qc(a,n,r){n()!==1&&(n(1),r.onchange&&r.onchange(n()))}var Jc=be('<ul class="svelte-tu3q0a"><li><button type="button">Fasting</button></li> <li><button type="button">Hours</button></li></ul>');function Xc(a,n){tt(n,!0);let r=ge(n,"value",7,0);var i=Jc(),l=R(i),f=R(l);let h;f.__click=[Gc,r,n],M(l);var g=V(l,2),y=R(g);let x;y.__click=[Qc,r,n],M(g),M(i),Oe((A,P)=>{h=Ve(f,1,"fasting svelte-tu3q0a",null,h,A),x=Ve(y,1,"hours svelte-tu3q0a",null,x,P)},[()=>({selected:r()===0}),()=>({selected:r()===1})]),ue(a,i),nt()}ut(["click"]);function Zc(a,n,r,i){n(""),X(r,!1),i.oncancel&&i.oncancel()}function $c(a,n,r,i){n(""),X(r,!1),i.ondone&&i.ondone()}function ef(a,n,r,i,l){if(n().trim().length===0){X(r,!0),d(i).focus();return}if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(n())){X(r,!0),d(i).focus();return}X(r,!1),l.onverify&&l.onverify(n())}var tf=be('<section class="svelte-gtv1v9"><figure class="svelte-gtv1v9"><button type="button" class="svelte-gtv1v9"><!></button> <div class="svelte-gtv1v9"><h3 class="svelte-gtv1v9">Thank you!</h3> <p class="svelte-gtv1v9">Thank you for being a valued member of the Fasting Hours community, and for supporting future development.</p></div></figure> <form class="svelte-gtv1v9"><div class="svelte-gtv1v9"><p>Email address</p> <input type="text" class="svelte-gtv1v9"/></div></form> <footer class="svelte-gtv1v9"><button class="cancel svelte-gtv1v9" type="button">Cancel</button> <button type="button" class="svelte-gtv1v9">Verify</button></footer></section>');function nf(a,n){tt(n,!0);let r=ge(n,"disabled",3,!1),i=ge(n,"email",7,null),l=he(!1),f=he(void 0);var h=tf(),g=R(h),y=R(g);y.__click=[$c,i,l,n];var x=R(y);Je(x,{height:"24",icon:"material-symbols:cancel-rounded",width:"24"}),M(y),On(2),M(g);var A=V(g,2),P=R(A),H=R(P);let W;var q=V(H,2);Kr(q),ot(q,b=>X(f,b),()=>d(f)),M(P),M(A);var Y=V(A,2),F=R(Y);F.__click=[Zc,i,l,n];var N=V(F,2);N.__click=[ef,i,l,f,n],M(Y),M(h),Oe(b=>{W=Ve(H,1,"svelte-gtv1v9",null,W,b),q.disabled=r(),F.disabled=r(),N.disabled=r()},[()=>({error:d(l)})]),Ir(q,i),ue(a,h),nt()}ut(["click"]);function rf(a,n,r,i){n(""),r(""),i.ondone&&i.ondone()}function af(a,n){n.onlogin&&n.onlogin()}function of(a,n,r,i,l,f,h,g){if(n().trim().length===0){X(r,!0),d(i).focus();return}if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(n())){X(r,!0),d(i).focus();return}if(X(r,!1),l().trim().length===0){X(f,!0),d(h).focus();return}X(f,!1),g.onsend&&g.onsend({email:n(),message:l()})}var sf=be('<section class="svelte-cr8czn"><figure class="svelte-cr8czn"><button type="button" class="svelte-cr8czn"><!></button> <div class="svelte-cr8czn"><h3 class="svelte-cr8czn">Fasting Hours</h3> <p class="svelte-cr8czn">Want more features?</p> <ul class="svelte-cr8czn"><li class="svelte-cr8czn">Automated backup</li> <li class="svelte-cr8czn">Sync across devices</li> <li class="svelte-cr8czn">Export/import data</li></ul> <p class="svelte-cr8czn">Send me a message with the login email address that you would like to use. The first ten messages get a lifetime account for <span class="svelte-cr8czn">FREE</span>.</p></div></figure> <form class="svelte-cr8czn"><div class="svelte-cr8czn"><p>Email address</p> <input type="text" class="svelte-cr8czn"/></div> <div class="svelte-cr8czn"><p>Message</p> <textarea class="svelte-cr8czn"></textarea></div></form> <footer class="svelte-cr8czn"><button class="login svelte-cr8czn" type="button">Login</button> <button type="button" class="svelte-cr8czn">Send</button></footer></section>');function uf(a,n){tt(n,!0);let r=ge(n,"disabled",3,!1),i=ge(n,"email",7,null),l=ge(n,"message",7,null),f=he(!1),h=he(void 0),g=he(!1),y=he(void 0);var x=sf(),A=R(x),P=R(A);P.__click=[rf,i,l,n];var H=R(P);Je(H,{height:"24",icon:"material-symbols:cancel-rounded",width:"24"}),M(P),On(2),M(A);var W=V(A,2),q=R(W),Y=R(q);let F;var N=V(Y,2);Kr(N),ot(N,ie=>X(h,ie),()=>d(h)),M(q);var b=V(q,2),I=R(b);let S;var z=V(I,2);Zo(z),ot(z,ie=>X(y,ie),()=>d(y)),M(b),M(W);var j=V(W,2),B=R(j);B.__click=[af,n],_n(B,"",{},{display:"none"});var oe=V(B,2);oe.__click=[of,i,f,h,l,g,y,n],M(j),M(x),Oe((ie,$)=>{F=Ve(Y,1,"svelte-cr8czn",null,F,ie),N.disabled=r(),S=Ve(I,1,"svelte-cr8czn",null,S,$),z.disabled=r(),B.disabled=r(),oe.disabled=r()},[()=>({error:d(f)}),()=>({error:d(g)})]),Ir(N,i),Ir(z,l),ue(a,x),nt()}ut(["click"]);function lf(a,n,r,i){n(""),X(r,!1),i.oncancel&&i.oncancel()}function cf(a,n,r,i){n(""),X(r,!1),i.ondone&&i.ondone()}function ff(a,n,r,i,l){if(n().trim().length===0){X(r,!0),d(i).focus();return}X(r,!1),l.onlogin&&l.onlogin(n())}var df=be('<section class="svelte-1rh2cl1"><figure class="svelte-1rh2cl1"><button type="button" class="svelte-1rh2cl1"><!></button> <div class="svelte-1rh2cl1"><h3 class="svelte-1rh2cl1">Check your email</h3> <p class="svelte-1rh2cl1">A one-time password has been sent to the email address you provided. You will remain logged in on this device as long as you visit within 30 days (rolling).</p></div></figure> <form class="svelte-1rh2cl1"><div class="svelte-1rh2cl1"><p>One-time password</p> <input type="text" class="svelte-1rh2cl1"/></div></form> <footer class="svelte-1rh2cl1"><button class="cancel svelte-1rh2cl1" type="button">Cancel</button> <button type="button" class="svelte-1rh2cl1">Login</button></footer></section>');function hf(a,n){tt(n,!0);let r=ge(n,"disabled",3,!1),i=ge(n,"value",7,null),l=he(!1),f=he(void 0);var h=df(),g=R(h),y=R(g);y.__click=[cf,i,l,n];var x=R(y);Je(x,{height:"24",icon:"material-symbols:cancel-rounded",width:"24"}),M(y),On(2),M(g);var A=V(g,2),P=R(A),H=R(P);let W;var q=V(H,2);Kr(q),ot(q,b=>X(f,b),()=>d(f)),M(P),M(A);var Y=V(A,2),F=R(Y);F.__click=[lf,i,l,n];var N=V(F,2);N.__click=[ff,i,l,f,n],M(Y),M(h),Oe(b=>{W=Ve(H,1,"svelte-1rh2cl1",null,W,b),q.disabled=r(),F.disabled=r(),N.disabled=r()},[()=>({error:d(l)})]),Ir(q,i),ue(a,h),nt()}ut(["click"]);var vf=be('<dialog class="svelte-1jngsku"><!></dialog>');function gf(a,n){tt(n,!0),ge(n,"authenticated",3,!1);let r=he(void 0),i=he(!1),l=he(""),f=he("signup"),h=he(!1),g=he(""),y=he(""),x=he(!1),A=he("");function P(){X(f,"signup"),X(i,!1)}function H(){S()}function W($){X(l,$,!0),X(i,!0)}function q(){S()}function Y(){X(f,"login")}function F($){X(h,!0)}function N(){X(f,"signup"),X(x,!1)}function b(){S()}function I($){X(A,$,!0),X(x,!0)}function S(){d(r).close(),X(f,"signup"),X(h,!1),X(g,null),X(y,null),X(i,!1),X(l,null),X(x,!1),X(A,null)}function z(){d(r).showModal()}var j=vf(),B=R(j);{var oe=$=>{uf($,{get disabled(){return d(h)},get email(){return d(g)},get message(){return d(y)},ondone:q,onlogin:Y,onsend:F})},ie=$=>{var fe=Dt(),_e=et(fe);{var xe=Ke=>{nf(Ke,{get disabled(){return d(i)},get email(){return d(l)},oncancel:P,ondone:H,onverify:W})},Ge=Ke=>{var De=Dt(),Ie=et(De);{var Le=Ne=>{hf(Ne,{get disabled(){return d(x)},oncancel:N,ondone:b,onlogin:I,get value(){return d(A)}})};Qe(Ie,Ne=>{d(f)==="token"&&Ne(Le)},!0)}ue(Ke,De)};Qe(_e,Ke=>{d(f)==="login"?Ke(xe):Ke(Ge,!1)},!0)}ue($,fe)};Qe(B,$=>{d(f)==="signup"?$(oe):$(ie,!1)})}return M(j),ot(j,$=>X(r,$),()=>d(r)),ue(a,j),nt({close:S,showModal:z})}function pf(a,n,r,i){const l=d(n).getBoundingClientRect();d(r).style.width=l.width-2+"px",X(i,!d(i))}var mf=(a,n,r)=>n(d(r)),yf=be('<li><button type="button" class="svelte-10gmc7n"><span class="svelte-10gmc7n"> </span> <span class="svelte-10gmc7n"> </span> <!></button></li>'),bf=be('<label class="svelte-10gmc7n"><button tabindex="-1" type="button" class="svelte-10gmc7n"><!> <span class="svelte-10gmc7n"> </span> <span class="svelte-10gmc7n"> </span> <!></button> <ul></ul></label>');function _f(a,n){tt(n,!0);let r=ge(n,"items",19,()=>[]),i=ge(n,"units",3,"oz"),l=ge(n,"value",7,0),f=he(!1),h=he(void 0),g=he(void 0),y=Ee(()=>r().length===0?"":r().find(j=>j.value===l()).label);Jt(()=>(document.addEventListener("click",x),()=>{document.removeEventListener("click",x)}));function x(z){!d(h).contains(z.target)&&!d(g).contains(z.target)&&X(f,!1)}function A(z){l(z.value),X(f,!1),n.onchange&&n.onchange(z.value)}var P=bf(),H=R(P);H.__click=[pf,h,g,f];var W=R(H);Je(W,{height:"20",icon:"material-symbols:water-drop-outline-rounded",width:"20"});var q=V(W,2),Y=R(q,!0);M(q);var F=V(q,2),N=R(F);M(F);var b=V(F,2);Je(b,{height:"20",icon:"material-symbols:keyboard-arrow-down-rounded",width:"20"}),M(H),ot(H,z=>X(h,z),()=>d(h));var I=V(H,2);let S;Et(I,21,r,Ct,(z,j)=>{var B=yf();let oe;var ie=R(B);ie.__click=[mf,A,j];var $=R(ie),fe=R($,!0);M($);var _e=V($,2),xe=R(_e);M(_e);var Ge=V(_e,2);{var Ke=De=>{Je(De,{height:"20",icon:"material-symbols:check-rounded",width:"20"})};Qe(Ge,De=>{d(j).value===l()&&De(Ke)})}M(ie),M(B),Oe(De=>{oe=Ve(B,1,"svelte-10gmc7n",null,oe,De),ke(fe,d(j).label),ke(xe,`${d(j).value??""} oz`)},[()=>({selected:l()===d(j).value})]),ue(z,B)}),M(I),ot(I,z=>X(g,z),()=>d(g)),M(P),Oe(z=>{ke(Y,d(y)),ke(N,`${l()??""} ${i()??""}`),S=Ve(I,1,"svelte-10gmc7n",null,S,z)},[()=>({open:d(f)})]),ue(a,P),nt()}ut(["click"]);function wf(a,n,r,i){n(),r(null),i.oncancel&&i.oncancel()}function kf(a,n,r){n.ondelete&&n.ondelete(r().id)}function xf(a,n,r){n.onsave&&n.onsave(r())}var Df=be('<dialog class="svelte-1kewhwu"><h3 class="svelte-1kewhwu">Edit Water</h3> <!> <!> <footer class="svelte-1kewhwu"><button class="delete svelte-1kewhwu" type="button">Delete</button> <button class="cancel svelte-1kewhwu" type="button">Cancel</button> <button type="button" class="svelte-1kewhwu">Save</button></footer></dialog>');function Sf(a,n){tt(n,!0);let r=ge(n,"item",7,null),i=ge(n,"options",19,()=>[]),l=ge(n,"units",3,"oz"),f=he(void 0),h=Ee(()=>r()&&r().volume&&r().volume!==null?r().volume:8);function g(b){const I=new Date(b.getTime());r({...r(),created:I})}function y(b){const I=b;r({...r(),volume:I})}function x(){d(f).close(),r(null)}function A(){d(f).showModal()}var P=Df(),H=V(R(P),2);_f(H,{get items(){return i()},onchange:y,get units(){return l()},get value(){return d(h)}});var W=V(H,2);{let b=Ee(()=>r()&&r().created?r().created:new Date);Nr(W,{label:"Finished",onchange:g,get value(){return d(b)}})}var q=V(W,2),Y=R(q);Y.__click=[kf,n,r];var F=V(Y,2);F.__click=[wf,x,r,n];var N=V(F,2);return N.__click=[xf,n,r],M(q),M(P),ot(P,b=>X(f,b),()=>d(f)),ue(a,P),nt({close:x,showModal:A})}ut(["click"]);function Tf(a,n,r,i){n(),r(null),i.oncancel&&i.oncancel()}function Cf(a,n,r){n.ondelete&&n.ondelete(r().id)}function Ef(a,n){const r=a.currentTarget.value;n({...n(),weight:r})}function If(a,n,r,i,l,f){console.log(n(),"Item"),console.log(d(r),"Weight");const h=i(d(r));if(console.log(h,"Parsed"),h===null){d(l).focus();return}else n({...n(),weight:h});n().type||n({...n(),type:"weight"}),n().created||n({...n(),created:new Date}),n({...n(),updated:new Date}),n().units||n({...n(),units:"lbs"}),f.onsave&&f.onsave(n())}var Of=(a,n,r)=>n(d(r)),Mf=be('<button class="delete svelte-1hw3www" type="button">Delete</button>'),Pf=be('<dialog class="svelte-1hw3www"><h3 class="svelte-1hw3www"> </h3> <label class="svelte-1hw3www"><!> <input inputmode="decimal" placeholder="Weight" type="text" class="svelte-1hw3www"/> <button type="button" class="svelte-1hw3www"> </button></label> <!> <footer class="svelte-1hw3www"><!> <button class="cancel svelte-1hw3www" type="button">Cancel</button> <button type="button" class="svelte-1hw3www">Save</button></footer></dialog>');function Af(a,n){tt(n,!0);let r=ge(n,"item",7,null),i=he(void 0),l=he(void 0),f=Ee(()=>r()&&r().units&&r().units!==null?r().units:"lbs"),h=Ee(()=>r()&&r().weight&&r().weight!==null?r().weight:"");function g($){const fe=new Date($.getTime());r({...r(),created:fe})}function y($){const fe=$==="lbs"?"kg":"lbs";r({...r(),units:fe})}function x($){if(typeof $=="number")return $;if(typeof $=="string"){const fe=$.trim();if(fe==="")return null;const _e=navigator.language||"en-US",xe=Intl.NumberFormat(_e).format(12345.6),Ge=xe.match(/12(.*?)345/)[1],Ke=xe.match(/345(.*?)6/)[1],De=Ne=>Ne.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");let Ie=fe.replace(new RegExp(De(Ge),"g"),"").replace(new RegExp(De(Ke)),".");if(/^[+-]?(?:\d+\.?\d*|\.\d+)(?:[eE][+-]?\d+)?$/.test(Ie))return parseFloat(Ie)}return null}function A(){d(i).close(),r(null)}function P(){d(i).showModal()}var H=Pf(),W=R(H),q=R(W);M(W);var Y=V(W,2),F=R(Y);Je(F,{height:"20",icon:"hugeicons:weight-scale",width:"20"});var N=V(F,2);Kr(N),N.__input=[Ef,r],ot(N,$=>X(l,$),()=>d(l));var b=V(N,2);b.__click=[Of,y,f];var I=R(b,!0);M(b),M(Y);var S=V(Y,2);{let $=Ee(()=>r()&&r().created?r().created:new Date);Nr(S,{label:"Measured",onchange:g,get value(){return d($)}})}var z=V(S,2),j=R(z);{var B=$=>{var fe=Mf();fe.__click=[Cf,n,r],ue($,fe)};Qe(j,$=>{r()&&r().id&&r().id!==null&&$(B)})}var oe=V(j,2);oe.__click=[Tf,A,r,n];var ie=V(oe,2);return ie.__click=[If,r,h,x,l,n],M(z),M(H),ot(H,$=>X(i,$),()=>d(i)),Oe(()=>{ke(q,`${r()===null||!r().id||r().id===null?"New":"Edit"} Weight`),ri(N,d(h)),ke(I,d(f))}),ue(a,H),nt({close:A,showModal:P})}ut(["input","click"]);var jf=be('<main class="svelte-91q1x4"><header class="svelte-91q1x4"><button class="icon svelte-91q1x4" type="button"><!></button> <!> <button type="button" class="svelte-91q1x4"><!></button></header> <section class="svelte-91q1x4"><article class="svelte-91q1x4"><!></article> <article class="svelte-91q1x4"><!></article></section></main> <!> <!> <!> <!> <!>',1);function Xf(a,n){tt(n,!0);const r=new Ys,i=Qs;let l=0,f=he(null),h=he(0),g=he(null),y=he(xr([])),x=he(void 0),A=he("started"),P=he(null),H=he("Started"),W=he("Edit Fast Started"),q=he(void 0),Y=he(null),F=he(5),N=he(null),b=he(0),I=he(void 0),S=he(null),z=he(null),j=he(null),B=he(0),oe=he(void 0),ie=he(null),$=he(xr([])),fe=he(void 0),_e=he(null),xe=xr([{value:1,label:"Starving"},{value:2,label:"Very hungry"},{value:3,label:"Pretty hungry"},{value:4,label:"Snacky"},{value:5,label:"Satisfied"},{value:6,label:"Slightly full"},{value:7,label:"Uncomfortable"},{value:8,label:"Stuffed"},{value:9,label:"Stomach aches"},{value:10,label:"Sick"}]),Ge=xr([{value:8,label:"Cup"},{value:12,label:"Can"},{value:16,label:"Bottle"},{value:20,label:"Medium"},{value:30,label:"Gatorade"},{value:32,label:"Big Q"},{value:44,label:"QT Large"},{value:52,label:"Extra Large"}]);Jt(()=>{let L=window.localStorage.getItem("fh_screen");X(b,L===null?0:parseInt(L),!0);let ve=window.localStorage.getItem("fh_duration");X(h,ve===null?0:parseInt(ve),!0);const Te=window.localStorage.getItem("fh_latitude");Te!==null&&Te!=="DENIED"&&qe(),setInterval(()=>{if(l===60){De();const je=window.localStorage.getItem("fh_latitude");je!==null&&je!=="DENIED"&&qe(),l=0}else l=l+1;d(S)!==null&&X(N,Date.now(),!0)},1e3),Ne(),De(),Le(),te(),G(),Ie(),new URLSearchParams(window.location.search).has("signup")&&d(I).showModal()});function Ke(L){const ve=L.getFullYear(),Te=String(L.getMonth()+1).padStart(2,"0"),Xe=String(L.getDate()).padStart(2,"0");return`${ve}-${Te}-${Xe}`}function De(L=7){r.browseHistory().then(ve=>{const Te={},Xe=new Date,je=new Date(Xe.getFullYear(),Xe.getMonth(),Xe.getDate()),Re=new Date(je);if(Re.setDate(je.getDate()-(L-1)),!Array.isArray(ve)||ve.length===0){const st=new Date(Re);for(;st<=je;){const gt=Ke(st);Te[gt]=Array(24).fill(0),st.setDate(st.getDate()+1)}}else{for(const gt of ve){const $e=new Date(gt.started),pt=gt.ended?new Date(gt.ended):new Date,nr=new Date($e.getTime());nr.setSeconds(0,0);const dn=new Date(pt.getTime());dn.setSeconds(0,0);let Pt=new Date(nr);for(;Pt<dn;){const en=Ke(Pt),rr=new Date(Pt.getFullYear(),Pt.getMonth(),Pt.getDate());if(rr>=Re&&rr<=je){const Bt=Pt.getHours();Te[en]||(Te[en]=Array(24).fill(0)),Te[en][Bt]+=1}Pt.setMinutes(Pt.getMinutes()+1)}}for(const gt in Te)Te[gt]=Te[gt].map($e=>+(Math.min($e,60)/60).toFixed(6));const st=new Date(Re);for(;st<=je;){const gt=Ke(st);Te[gt]||(Te[gt]=Array(24).fill(0)),st.setDate(st.getDate()+1)}}const ze=Object.keys(Te).sort((st,gt)=>gt.localeCompare(st)),Ze={};for(const st of ze)Ze[st]=Te[st];const Mt=Array(24).fill(0);for(const st of Array(24).keys())for(const gt of ze)Mt[st]+=Ze[gt][st];const $t=Mt.map(st=>+(st/L).toFixed(6));X(f,{daily:Ze,average:$t},!0)})}function Ie(){r.browseHistory().then(L=>{let ve=null,Te=structuredClone(L);Te.forEach(je=>{je.type="start",je.timed=new Date(je.started.getTime())});let Xe=structuredClone(L);Xe=Xe.filter(je=>je.ended!==null),Xe.forEach(je=>{je.type="end",je.timed=new Date(je.ended.getTime())}),Te=Te.concat(Xe),ve=[...Te],r.browseHunger().then(je=>(je=je.map(Re=>{const ze=xe.find(Ze=>Ze.value===Re.level);return Re.level=ze.label,Re.timed=new Date(Re.created.getTime()),Re}),ve=ve.concat(je),r.browseWeight())).then(je=>(je=je.map(Re=>(Re.timed=new Date(Re.created.getTime()),Re)),ve=ve.concat(je),r.browseWater())).then(je=>{je=je.map(ze=>(ze.timed=new Date(ze.created.getTime()),ze)),ve=ve.concat(je),ve.sort((ze,Ze)=>ze.timed.getTime()<Ze.timed.getTime()?1:ze.timed.getTime()>Ze.timed.getTime()?-1:0);const Re=[];for(let ze=0;ze<ve.length;ze++){const Ze=new Date(ve[ze].timed.getTime());Ze.setHours(23),Ze.setMinutes(59),Ze.setSeconds(59),Ze.setMilliseconds(999),Re.length===0?Re.push({type:"header",timed:Ze}):(Re[Re.length-1].timed.getDate()!==ve[ze].timed.getDate()||Re[Re.length-1].timed.getMonth()!==ve[ze].timed.getMonth()||Re[Re.length-1].timed.getFullYear()!==ve[ze].timed.getFullYear())&&Re.push({type:"header",timed:Ze})}ve=ve.concat(Re),ve.sort((ze,Ze)=>ze.timed.getTime()<Ze.timed.getTime()?1:ze.timed.getTime()>Ze.timed.getTime()?-1:0),X(y,[...ve],!0)})})}function Le(){r.browseHunger(!0).then(L=>{if(L===null)X(F,5);else{const ve=new Date,Te=new Date(L.created);ve.getFullYear()===Te.getFullYear()&&ve.getMonth()===Te.getMonth()&&ve.getDate()===Te.getDate()?X(F,L.level,!0):X(F,5)}})}function Ne(){r.browseHistory().then(L=>{L.length===0&&(X(S,null),X(N,null),X(g,null)),L.sort((ve,Te)=>ve.started.getTime()>Te.started.getTime()?-1:ve.started.getTime()<Te.started.getTime()?1:0),L[0].ended===null?(X(S,new Date(L[0].started.getTime()),!0),X(N,Date.now(),!0),X(g,null)):X(g,new Date(L[0].ended.getTime()),!0)})}function qe(){const L=parseFloat(window.localStorage.getItem("fh_latitude")),ve=parseFloat(window.localStorage.getItem("fh_longitude")),Te=new Date;let Xe=null,je=i.getTimes(Te,L,ve),Re=null;if(Date.now()<je.sunrise.getTime())Re=new Date(je.sunrise.getTime()),Xe="material-symbols:wb-sunny-outline-rounded";else if(Date.now()>je.sunrise.getTime()&&Date.now()<je.sunset.getTime())Re=new Date(je.sunset.getTime()),Xe="material-symbols:moon-stars-outline-rounded";else{const ze=new Date;ze.setDate(Te.getDate()+1),je=i.getTimes(ze,L,ve),Re=new Date(je.sunrise.getTime()),Xe="material-symbols:wb-sunny-outline-rounded"}X(z,{icon:Xe,timing:Re},!0)}function te(){r.browseWater(!0).then(L=>{const ve=L.reduce((Te,Xe)=>Te+Xe.volume,0);return X(B,ve,!0),r.browseWater()}).then(L=>{const ve=new Date;ve.setHours(0,0,0,0);const Te={};for(const{created:ze,volume:Ze}of L){const Mt=Z(ze);Te[Mt]=(Te[Mt]||0)+Ze}const Xe=[];for(let ze=0;ze<7;ze++){const Ze=new Date(ve.getTime());Ze.setDate(ve.getDate()-ze);const Mt=Z(Ze);Xe.push({created:new Date(Ze.getTime()),volume:Te[Mt]||0})}const Re=Xe.reduce((ze,{volume:Ze})=>ze+Ze,0)/Xe.length;X(j,{average:Re,daily:[...Xe]},!0)})}function G(){r.browseWeight().then(L=>X($,L===null?[]:[...L],!0))}function Z(L){const ve=L.getFullYear(),Te=String(L.getMonth()+1).padStart(2,"0"),Xe=String(L.getDate()).padStart(2,"0");return`${ve}-${Te}-${Xe}`}function pe(L){X(h,L,!0),window.localStorage.setItem("fh_duration",d(h))}function we(){X(S,null),X(N,null),r.browseHistoryByEnd().then(L=>(L.ended=new Date,r.editHistory(L))).then(()=>{Ne(),De(),Ie()})}function Ae(){r.addHistory().then(()=>{Ne(),De(),Ie()})}function ye(){d(fe).showModal()}function Ce(L,ve){console.log("Delete: "+ve),d(S)!==null&&d(P).started.getTime()===d(S).getTime()&&(X(S,null),X(N,null)),r.deleteHistory(ve).then(()=>{d(x).close(),X(P,null),Ne(),De(),Ie()})}function ae(L){r.editHistory(L).then(()=>{d(x).close(),X(P,null),Ne(),De(),Ie()})}function Be(L,ve){L==="start"?(X(A,"started"),X(H,"Started"),X(W,"Edit Fast Started"),r.readHistory(ve).then(Te=>{X(P,{...Te},!0),d(x).showModal()})):L==="end"?(X(A,"ended"),X(H,"Ended"),X(W,"Edit Fast Ended"),r.readHistory(ve).then(Te=>{X(P,{...Te},!0),d(x).showModal()})):L==="water"?r.readWater(ve).then(Te=>{X(ie,{...Te},!0),d(oe).showModal()}):L==="weight"?r.readWeight(ve).then(Te=>{X(_e,{...Te},!0),d(fe).showModal()}):L==="hunger"&&r.readHunger(ve).then(Te=>{X(Y,{...Te},!0),d(q).showModal()})}function Ye(L){r.addHunger(L).then(ve=>{Le(),Ie()})}function Se(L){r.deleteHunger(L).then(()=>{d(q).close(),X(Y,null),Le(),Ie()})}function ft(L){r.editHunger(L).then(ve=>{d(q).close(),X(Y,null),Le(),Ie()})}function lt(L){d(b)!==L&&(window.localStorage.setItem("fh_screen",L),X(b,L,!0))}function it(){d(I).showModal()}function It(){confirm("Sunrise/set (important for religious observations) needs to know your location? Enable location detection?")?navigator.geolocation.getCurrentPosition(ve=>{window.localStorage.setItem("fh_latitude",ve.coords.latitude),window.localStorage.setItem("fh_longitude",ve.coords.longitude),qe()}):window.localStorage.setItem("fh_latitude","DENIED")}function _t(L){r.addWater(L).then(ve=>{te(),Ie()})}function yt(L){r.deleteWater(L).then(()=>{d(oe).close(),X(ie,null),te(),Ie()})}function St(L){r.editWater(L).then(ve=>{d(oe).close(),X(ie,null),te(),Ie()})}function Ot(L){r.deleteWeight(L).then(()=>{d(fe).close(),X(_e,null),G(),Ie()})}function rt(L){console.log(L),L.id?r.editWeight(L).then(ve=>{d(fe).close(),X(_e,null),G(),Ie()}):r.addWeight(L).then(ve=>{d(fe).close(),X(_e,null),G(),Ie()})}var Kt=jf(),Wt=et(Kt),wn=R(Wt),qt=R(wn);qt.__click=ye;var Ut=R(qt);Je(Ut,{height:"20",icon:"hugeicons:weight-scale",width:"20"}),M(qt);var Rt=V(qt,2);Xc(Rt,{onchange:lt,get value(){return d(b)}});var un=V(Rt,2);un.__click=it;var ln=R(un);Je(ln,{height:"20",icon:"material-symbols:person-outline-rounded",width:"20"}),M(un),M(wn);var cn=V(wn,2),Xt=R(cn),Yt=R(Xt);rc(Yt,{get activity(){return d(f)},get duration(){return d(h)},get ended(){return d(g)},get hunger(){return d(F)},get levels(){return xe},get now(){return d(N)},onduration:pe,onend:we,onhunger:Ye,onsettings:it,onstart:Ae,onsun:It,onwater:_t,onweight:ye,get started(){return d(S)},get sun(){return d(z)},get volume(){return d(j)},get volumes(){return Ge},get water(){return d(B)},get weight(){return d($)}}),M(Xt);var fn=V(Xt,2),An=R(fn);qc(An,{get activity(){return d(f)},get history(){return d(y)},get levels(){return xe},onchange:Be,onsun:It,get sun(){return d(z)},get volume(){return d(j)},get weight(){return d($)}}),M(fn),M(cn),M(Wt);var Ft=V(Wt,2);ot(Dc(Ft,{get field(){return d(A)},get item(){return d(P)},get label(){return d(H)},ondelete:Ce,onsave:ae,get title(){return d(W)}}),L=>X(x,L,!0),()=>d(x));var me=V(Ft,2);ot(Vc(me,{get item(){return d(Y)},get levels(){return xe},ondelete:Se,onsave:ft}),L=>X(q,L,!0),()=>d(q));var Zt=V(me,2);ot(Sf(Zt,{get item(){return d(ie)},ondelete:yt,onsave:St,get options(){return Ge}}),L=>X(oe,L,!0),()=>d(oe));var Nt=V(Zt,2);ot(Af(Nt,{get item(){return d(_e)},ondelete:Ot,onsave:rt}),L=>X(fe,L,!0),()=>d(fe));var kn=V(Nt,2);ot(gf(kn,{}),L=>X(I,L,!0),()=>d(I)),Oe(()=>vt(cn,"data-screen",d(b)===0?"fasting":"hours")),ue(a,Kt),nt()}ut(["click"]);export{Xf as component};
